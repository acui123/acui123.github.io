(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{619:function(e,s,a){"use strict";a.r(s);var v=a(12),_=Object(v.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("Boxx",{attrs:{type:"tip",changeTime:"6000"}}),e._v(" "),a("h2",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[e._v("#")]),e._v(" cookie")]),e._v(" "),a("p",[e._v("网络早期最大的问题之一是如何管理状态。简而言之，服务器无法知道两个请求是否来自同一个浏览器。当时最")]),e._v(" "),a("p",[e._v("简单的方法是在请求时，在页面中插入一些参数，并在下一个请求中传回参数。这需要使用包含参数的隐藏的表")]),e._v(" "),a("p",[e._v("单，或者作为URL参数的一部分传递。这两个解决方案都手动操作，容易出错。cookie出现来解决这个问题。")]),e._v(" "),a("p",[e._v("h5之前，存储主要是cookies。cookies缺点有在请求头上带着数据，大小在4K之内。主Domain污染。")]),e._v(" "),a("p",[e._v("主要应用：购物车、客户记录")]),e._v(" "),a("p",[e._v("对于IE浏览器有UserData,大小是64k,只有IE浏览器支持。\nCookie是保存在客户机的文本文件（IE保存在本地的一个txt文件中）, 这个文件与特定的 Web 文档关联在一")]),e._v(" "),a("p",[e._v("起, 保存了该客户机访问这个Web 文档时的信息, 当客户机再次访问这个 Web 文档时这些信息可供该文档使用。")]),e._v(" "),a("p",[e._v("请求服务器时放在http请求头里面（不论是否需要，都会放在请求头里面）")]),e._v(" "),a("p",[e._v("特征：")]),e._v(" "),a("p",[e._v("不同的浏览器存放的cookie位置不一样，也是不能通用的。")]),e._v(" "),a("p",[e._v("cookie的存储是以域名形式进行区分的，不同的域下存储的cookie是独立的。")]),e._v(" "),a("p",[e._v("我们可以设置cookie生效的域（当前设置cookie所在域的子域），也就是说，我们能够操作的cookie是当前域以及当前域下的所有子域")]),e._v(" "),a("p",[e._v("一个域名下存放的cookie的个数是有限制的，不同的浏览器存放的个数不一样,一般为20个。")]),e._v(" "),a("p",[e._v("每个cookie存放的内容大小也是有限制的，不同的浏览器存放大小不一样，一般为4KB。")]),e._v(" "),a("p",[e._v("cookie也可以设置过期的时间，默认是会话结束的时候，当时间到期自动销毁")]),e._v(" "),a("p",[e._v("目标：")]),e._v(" "),a("p",[e._v("解决4K的大小问题")]),e._v(" "),a("p",[e._v("解决请求体常带储存信息的问题")]),e._v(" "),a("p",[e._v("解决关系型储存的问题")]),e._v(" "),a("p",[e._v("跨浏览器")]),e._v(" "),a("p",[e._v("如何工作：")]),e._v(" "),a("p",[e._v("当网页要发http请求时，浏览器会先检查是否有相应的cookie，有则自动添加在request header中的cookie字段")]),e._v(" "),a("p",[e._v("中。这些是浏览器自动帮我们做的，而且每一次http请求浏览器都会自动帮我们做。这个特点很重要，因为这关")]),e._v(" "),a("p",[e._v("系到“什么样的数据适合存储在cookie中”。")]),e._v(" "),a("p",[e._v("存储在cookie中的数据，每次都会被浏览器自动放在http请求中，如果这些数据并不是每个请求都需要发给服务")]),e._v(" "),a("p",[e._v("端的数据，浏览器这设置自动处理无疑增加了网络开销；但如果这些数据是每个请求都需要发给服务端的数据")]),e._v(" "),a("p",[e._v("（比如身份认证信息），浏览器这设置自动处理就大大免去了重复添加操作。所以对于那种设置“每次请求都要携")]),e._v(" "),a("p",[e._v("带的信息（最典型的就是身份认证信息）”就特别适合放在cookie中，其他类型的数据就不适合了。")]),e._v(" "),a("h3",{attrs:{id:"本地存储localstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地存储localstorage"}},[e._v("#")]),e._v(" 本地存储localstorage")]),e._v(" "),a("p",[e._v("存储方式：以键值对的方式存储，永久存储，永不失效，除非手动删除")]),e._v(" "),a("p",[e._v("大小：每个域名5M")]),e._v(" "),a("p",[e._v("常用的API：")]),e._v(" "),a("p",[e._v("getItem //取记录")]),e._v(" "),a("p",[e._v("setItem //设置记录")]),e._v(" "),a("p",[e._v("removeItem //移除记录")]),e._v(" "),a("p",[e._v("key //取key所对应的值")]),e._v(" "),a("p",[e._v("clear //清除记录")]),e._v(" "),a("p",[e._v("存储的内容：")]),e._v(" "),a("p",[e._v("数组，图片，json,样式，脚本（只要能序列化成字符串的内容都可以存储）")]),e._v(" "),a("h3",{attrs:{id:"本地存储sessionstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地存储sessionstorage"}},[e._v("#")]),e._v(" 本地存储sessionstorage")]),e._v(" "),a("p",[e._v("HTML5的本地存储API中localStorage与sessionStorage在使用方法上是相同的，区别在于sessionStorage在关闭页面后被清空，而localStorage则会一直保存")]),e._v(" "),a("h3",{attrs:{id:"cookie、localstorage、sessionstorage区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie、localstorage、sessionstorage区别"}},[e._v("#")]),e._v(" cookie、localStorage、sessionStorage区别")]),e._v(" "),a("p",[e._v("相同：在本地（浏览器端）存储数据。")]),e._v(" "),a("p",[e._v("不同：")]),e._v(" "),a("p",[e._v("localStorage、sessionStorage")]),e._v(" "),a("p",[e._v("localStorage只要在相同的协议、相同的主机名、相同的端口下，就能读取/修改到同一份localStorage数据。")]),e._v(" "),a("p",[e._v("sessionStorage比localStorage更严苛一点，除了协议、主机名、端口外，还要求在同一窗口（也就是浏览器的标签页）下。")]),e._v(" "),a("p",[e._v("localStorage是永久存储，除非手动删除。")]),e._v(" "),a("p",[e._v("sessionStorage当会话结束（当前页面关闭的时候，自动销毁）")]),e._v(" "),a("p",[e._v("cookie的数据会在每一次发送http请求的时候，同时发送给服务器而localStorage、sessionStorage不会。")]),e._v(" "),a("h3",{attrs:{id:"离线缓存-application-cache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#离线缓存-application-cache"}},[e._v("#")]),e._v(" 离线缓存 application cache")]),e._v(" "),a("p",[e._v("本地缓存应用所需的文件")]),e._v(" "),a("p",[e._v("使用方法：")]),e._v(" "),a("p",[e._v("①配置manifest")]),e._v(" "),a("p",[e._v("页面上")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<!DOCTYPE HTML>\n\n<html manifest="demo.appcache">\n\n...\n\n</html>\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("Manifest文件：")]),e._v(" "),a("p",[e._v("manifest文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。")]),e._v(" "),a("p",[e._v("manifest文件可分为三个部分：")]),e._v(" "),a("p",[e._v("① CACHE MANIFEST 在此标题下列出的文件将在首次下载后缓存")]),e._v(" "),a("p",[e._v("② NETWORK 在此标题下列出的文件需要与服务器的连接，且不会被缓存")]),e._v(" "),a("p",[e._v("③ FALLBACK 在此标题下列出的文件规定当前页面无法访问时的回退页面")]),e._v(" "),a("p",[e._v("完整demo:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CACHE MANIFEST\n\n# 2016-07-24 v1.0.0\n\n/theme.css\n\n/main.js\n\nNETWORK:\n\nlogin.jsp\n\nFALLBACK:\n\n/html/ /offline.html\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br")])]),a("p",[e._v('服务器上：manifest文件需要配置正确的MIME-type,即"text/cache-manifest"')]),e._v(" "),a("p",[e._v("如Tomcat:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<mime-mapping>\n\n     <extension>manifest</extension>\n\n     <mime-type>text/cache-manifest</mime-type>\n\n</mime-mapping>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("常用API")]),e._v(" "),a("p",[e._v("核心是applicationCache对象，有个status属性，表示应用缓存的当前状态：")]),e._v(" "),a("p",[e._v("0（UNCACHED） :  无缓存， 即没有与页面相关的应用缓存")]),e._v(" "),a("p",[e._v("1（IDLE） : 闲置，即应用缓存未得到更新")]),e._v(" "),a("p",[e._v("2 （CHECKING） : 检查中，即正在下载描述文件并检查更新")]),e._v(" "),a("p",[e._v("3 （DOWNLOADING） : 下载中，即应用缓存正在下载描述文件中指定的资源")]),e._v(" "),a("p",[e._v("4 （UPDATEREADY） : 更新完成，所有资源都已下载完毕")]),e._v(" "),a("p",[e._v("5 （IDLE） :  废弃，即应用缓存的描述文件已经不存在了，因此页面无法再访问应用缓存")]),e._v(" "),a("p",[e._v("相关的事件：")]),e._v(" "),a("p",[e._v("表示应用缓存状态的改变：")]),e._v(" "),a("p",[e._v("checking : 在浏览器为应用缓存查找更新时触发")]),e._v(" "),a("p",[e._v("error : 在检查更新或下载资源期间发送错误时触发")]),e._v(" "),a("p",[e._v("noupdate : 在检查描述文件发现文件无变化时触发")]),e._v(" "),a("p",[e._v("downloading : 在开始下载应用缓存资源时触发")]),e._v(" "),a("p",[e._v("progress：在文件下载应用缓存的过程中持续不断地下载地触发")]),e._v(" "),a("p",[e._v("updateready : 在页面新的应用缓存下载完毕触发")]),e._v(" "),a("p",[e._v("cached : 在应用缓存完整可用时触发")]),e._v(" "),a("p",[e._v("Application Cache的三个优势：")]),e._v(" "),a("p",[e._v("① 离线浏览")]),e._v(" "),a("p",[e._v("② 提升页面载入速度")]),e._v(" "),a("p",[e._v("③ 降低服务器压力")]),e._v(" "),a("h3",{attrs:{id:"web-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-sql"}},[e._v("#")]),e._v(" Web SQL")]),e._v(" "),a("p",[e._v("关系数据库，通过SQL语句访问")]),e._v(" "),a("p",[e._v("Web SQL 数据库API并不是HTML5规范的一部分，但是它是一个独立的规范，引入了一组使用SQL操作客户端数据库")]),e._v(" "),a("p",[e._v("的APIS")]),e._v(" "),a("p",[e._v("支持情况：")]),e._v(" "),a("p",[e._v("Web SQL 数据库可以在最新版的 Safari, Chrome 和 Opera 浏览器中工作。")]),e._v(" "),a("p",[e._v("核心方法：")]),e._v(" "),a("p",[e._v("①openDatabase：这个方法使用现有的数据库或者新建的数据库创建一个数据库对象。")]),e._v(" "),a("p",[e._v("②transaction：这个方法让我们能够控制一个事务，以及基于这种情况执行提交或者回滚。")]),e._v(" "),a("p",[e._v("③executeSql：这个方法用于执行实际的 SQL 查询。")]),e._v(" "),a("h3",{attrs:{id:"indexeddb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb"}},[e._v("#")]),e._v(" IndexedDB")]),e._v(" "),a("p",[e._v("索引数据库 (IndexedDB) API（作为 HTML5 的一部分）对创建具有丰富本地存储数据的数据密集型的离线")]),e._v(" "),a("p",[e._v("HTML5 Web 应用程序很有用。同时它还有助于本地缓存数据，使传统在线 Web 应用程序（比如移动 Web 应用程")]),e._v(" "),a("p",[e._v("序）能够更快地运行和响应。")])],1)}),[],!1,null,null,null);s.default=_.exports}}]);