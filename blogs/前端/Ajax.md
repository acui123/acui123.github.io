---
title: Ajax
date: 2021-3-14
tags:
 - 前端
categories:
 -  前端
---

## Ajax基础

### 传统网站中存在的问题

1. 网速慢的情况下，页面加载时间较长，用户只能等待

2.表单提交后，如果一项内容不合格，需要重新填写表单所有内容

3.页面跳转，重新加载页面，造成资源浪费，增加用户等待时间

## Ajax概述

浏览器提供的一套方法，可以实现页面无刷新更新数据，提高用户浏览网站应用的体验

## Ajax的应用加载场景

1.页面上拉加载更多数据

2.列表数据无刷新分页

3.表单项离开焦点数据验证

4.搜索框提示文字下拉列表

应用于不刷新页面时，发送请求

## Ajax的运行环境

Ajax技术需要运行在网站环境中才能生效

## Ajax运行原理及实现

### Ajax运行原理
Ajax相当于浏览器发送请求于接收响应的代理人，以实现在不影响用户浏览页面的情况下，局部更新页面数据，

从而提高用户体验

### Ajax的实现步骤
1.创建Ajax对象

``` js
var xhr = new XMLHttpRequest();
```

2.告诉Ajax请求地址以及请求方式


``` js
xhr.open('get','http://www.example.com')

```

3.发送请求

``` js
xhr.send()
```

4.获取服务器端返回客户端的响应数据

### 服务器端相应的数据格式

在真实的项目中，服务器端大多数情况下会以JSON对象作为响应数据的格式。当客户端拿到响应数据时，需要将

JSON数据和HTML字符串进行拼接，然后将拼接的结果展示在页面中

在http请求与响应过程中，无论是请求参数还是响应内容，如果是对象类型，最终都会被转换为对象字符串进行

传输

```js
JSON.parse() //将JSON对象转化为JSON对象

```

### 请求参数传递

传统网站表单提交

POST请求

必须设置请求报文

请求报文

在HTTP请求和响应过程中传递的数据块就叫报文，包括要传送的数据和一些附加信息，这些数据和信息要遵守规

定好的格式

报文头

报文体

``` js
xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded') //第一个值 报文属性名称 第二个参数 报文属性内容
xhr.send('具体参数')
```
### 请求参数的格式

application/json
``` js
{name:'zhangsan',age:'20'}

```

在请求头中指定Content-Type属性的值是application/json。告诉服务器端当前请求参数的格式是json

```JS
JSON.stringify()
```

### 获取服务端的响应

Ajax状态码

在创建ajax对象，配置ajax对象，发送请求，以及接收完服务器响应数据，这个