{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\@vue\\composition-api\\dist\\vue-composition-api.esm.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\@vue\\composition-api\\dist\\vue-composition-api.esm.js","mtime":1613623285000},{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3FkL2Jsb2cvdnVlcHJlc3MtYmxvZy1kZW1vL3hjdWktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3Qub3duLWtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXMtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1mbG9hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Quc2VhbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5pcy1leHRlbnNpYmxlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZnJlZXplLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGgudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24udG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKCnZhciB0b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKHgpIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpOwp9OwoKZnVuY3Rpb24gaXNOYXRpdmUoQ3RvcikgewogIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoQ3Rvci50b1N0cmluZygpKTsKfQoKdmFyIGhhc1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFN5bWJvbCkgJiYgdHlwZW9mIFJlZmxlY3QgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFJlZmxlY3Qub3duS2V5cyk7Cgp2YXIgbm9vcEZuID0gZnVuY3Rpb24gbm9vcEZuKF8pIHsKICByZXR1cm4gXzsKfTsKCnZhciBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24gPSB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZ2V0OiBub29wRm4sCiAgc2V0OiBub29wRm4KfTsKCmZ1bmN0aW9uIHByb3h5KHRhcmdldCwga2V5LCBfYSkgewogIHZhciBnZXQgPSBfYS5nZXQsCiAgICAgIHNldCA9IF9hLnNldDsKICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gZ2V0IHx8IG5vb3BGbjsKICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gc2V0IHx8IG5vb3BGbjsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbik7Cn0KCmZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICB2YWx1ZTogdmFsLAogICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLAogICAgd3JpdGFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUKICB9KTsKfQoKZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7CiAgcmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTsKfQoKZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbXNnKSB7CiAgaWYgKCFjb25kaXRpb24pIHsKICAgIHRocm93IG5ldyBFcnJvcigiW3Z1ZS1jb21wb3NpdGlvbi1hcGldICIgKyBtc2cpOwogIH0KfQoKZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IC8vICRmbG93LWRpc2FibGUtbGluZQogIF90eXBlb2YodmFsdWUpID09PSAnc3ltYm9sJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJzsKfQoKZnVuY3Rpb24gaXNBcnJheSh4KSB7CiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoeCk7Cn0KCmZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4KHZhbCkgewogIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7CiAgcmV0dXJuIG4gPj0gMCAmJiBNYXRoLmZsb29yKG4pID09PSBuICYmIGlzRmluaXRlKHZhbCk7Cn0KCmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkgewogIHJldHVybiB2YWwgIT09IG51bGwgJiYgX3R5cGVvZih2YWwpID09PSAnb2JqZWN0JzsKfQoKZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh4KSB7CiAgcmV0dXJuIHRvU3RyaW5nKHgpID09PSAnW29iamVjdCBPYmplY3RdJzsKfQoKZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7CiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nOwp9CgpmdW5jdGlvbiBpc1VuZGVmKHYpIHsKICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGw7Cn0KCmZ1bmN0aW9uIHdhcm4obXNnLCB2bSkgewogIFZ1ZS51dGlsLndhcm4obXNnLCB2bSk7Cn0KCmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdm0sIGluZm8pIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgd2FybigiRXJyb3IgaW4gIiArIGluZm8gKyAiOiBcIiIgKyBlcnIudG9TdHJpbmcoKSArICJcIiIsIHZtKTsKICB9CgogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICB9IGVsc2UgewogICAgdGhyb3cgZXJyOwogIH0KfQoKdmFyIHZ1ZURlcGVuZGVuY3kgPSB1bmRlZmluZWQ7Cgp0cnkgewogIHZhciByZXF1aXJlZFZ1ZSA9IHJlcXVpcmUoJ3Z1ZScpOwoKICBpZiAocmVxdWlyZWRWdWUgJiYgaXNWdWUocmVxdWlyZWRWdWUpKSB7CiAgICB2dWVEZXBlbmRlbmN5ID0gcmVxdWlyZWRWdWU7CiAgfSBlbHNlIGlmIChyZXF1aXJlZFZ1ZSAmJiAnZGVmYXVsdCcgaW4gcmVxdWlyZWRWdWUgJiYgaXNWdWUocmVxdWlyZWRWdWVbImRlZmF1bHQiXSkpIHsKICAgIHZ1ZURlcGVuZGVuY3kgPSByZXF1aXJlZFZ1ZVsiZGVmYXVsdCJdOwogIH0KfSBjYXRjaCAoX2EpIHsvLyBub3QgYXZhaWxhYmxlCn0KCnZhciB2dWVDb25zdHJ1Y3RvciA9IG51bGw7CnZhciBjdXJyZW50SW5zdGFuY2UgPSBudWxsOwp2YXIgUGx1Z2luSW5zdGFsbGVkRmxhZyA9ICdfX2NvbXBvc2l0aW9uX2FwaV9pbnN0YWxsZWRfXyc7CgpmdW5jdGlvbiBpc1Z1ZShvYmopIHsKICByZXR1cm4gb2JqICYmIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicgJiYgb2JqLm5hbWUgPT09ICdWdWUnOwp9CgpmdW5jdGlvbiBpc1Z1ZVJlZ2lzdGVyZWQoVnVlKSB7CiAgcmV0dXJuIGhhc093bihWdWUsIFBsdWdpbkluc3RhbGxlZEZsYWcpOwp9CgpmdW5jdGlvbiBnZXRWdWVDb25zdHJ1Y3RvcigpIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgYXNzZXJ0KHZ1ZUNvbnN0cnVjdG9yLCAibXVzdCBjYWxsIFZ1ZS51c2UoVnVlQ29tcG9zaXRpb25BUEkpIGJlZm9yZSB1c2luZyBhbnkgZnVuY3Rpb24uIik7CiAgfQoKICByZXR1cm4gdnVlQ29uc3RydWN0b3I7Cn0gLy8gcmV0dXJucyByZWdpc3RlcmVkIHZ1ZSBvciBgdnVlYCBkZXBlbmRlbmN5CgoKZnVuY3Rpb24gZ2V0UmVnaXN0ZXJlZFZ1ZU9yRGVmYXVsdCgpIHsKICB2YXIgY29uc3RydWN0b3IgPSB2dWVDb25zdHJ1Y3RvciB8fCB2dWVEZXBlbmRlbmN5OwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgYXNzZXJ0KGNvbnN0cnVjdG9yLCAiTm8gdnVlIGRlcGVuZGVuY3kgZm91bmQuIik7CiAgfQoKICByZXR1cm4gY29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIHNldFZ1ZUNvbnN0cnVjdG9yKFZ1ZSkgewogIC8vIEB0cy1pZ25vcmUKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB2dWVDb25zdHJ1Y3RvciAmJiBWdWUuX19wcm90b19fICE9PSB2dWVDb25zdHJ1Y3Rvci5fX3Byb3RvX18pIHsKICAgIHdhcm4oJ1t2dWUtY29tcG9zaXRpb24tYXBpXSBhbm90aGVyIGluc3RhbmNlIG9mIFZ1ZSBpbnN0YWxsZWQnKTsKICB9CgogIHZ1ZUNvbnN0cnVjdG9yID0gVnVlOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsIFBsdWdpbkluc3RhbGxlZEZsYWcsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgdmFsdWU6IHRydWUKICB9KTsKfQoKZnVuY3Rpb24gc2V0Q3VycmVudEluc3RhbmNlKHZtKSB7CiAgLy8gY3VycmVudEluc3RhbmNlPy4kc2NvcGVkU2xvdHMKICBjdXJyZW50SW5zdGFuY2UgPSB2bTsKfQoKZnVuY3Rpb24gZ2V0Q3VycmVudFZ1ZTJJbnN0YW5jZSgpIHsKICByZXR1cm4gY3VycmVudEluc3RhbmNlOwp9CgpmdW5jdGlvbiBnZXRDdXJyZW50SW5zdGFuY2UoKSB7CiAgaWYgKGN1cnJlbnRJbnN0YW5jZSkgewogICAgcmV0dXJuIHRvVnVlM0NvbXBvbmVudEluc3RhbmNlKGN1cnJlbnRJbnN0YW5jZSk7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKdmFyIGluc3RhbmNlTWFwQ2FjaGUgPSBuZXcgV2Vha01hcCgpOwoKZnVuY3Rpb24gdG9WdWUzQ29tcG9uZW50SW5zdGFuY2UodnVlMkluc3RhbmNlKSB7CiAgaWYgKGluc3RhbmNlTWFwQ2FjaGUuaGFzKHZ1ZTJJbnN0YW5jZSkpIHsKICAgIHJldHVybiBpbnN0YW5jZU1hcENhY2hlLmdldCh2dWUySW5zdGFuY2UpOwogIH0KCiAgdmFyIGluc3RhbmNlID0gewogICAgcHJveHk6IHZ1ZTJJbnN0YW5jZSwKICAgIHVwZGF0ZTogdnVlMkluc3RhbmNlLiRmb3JjZVVwZGF0ZSwKICAgIHVpZDogdnVlMkluc3RhbmNlLl91aWQsCiAgICAvLyAkZW1pdCBpcyBkZWZpbmVkIG9uIHByb3RvdHlwZSBhbmQgaXQgZXhwZWN0ZWQgdG8gYmUgYm91bmQKICAgIGVtaXQ6IHZ1ZTJJbnN0YW5jZS4kZW1pdC5iaW5kKHZ1ZTJJbnN0YW5jZSksCiAgICBwYXJlbnQ6IG51bGwsCiAgICByb290OiBudWxsCiAgfTsgLy8gbWFwIHZtLiRwcm9wcyA9CgogIHZhciBpbnN0YW5jZVByb3BzID0gWydkYXRhJywgJ3Byb3BzJywgJ2F0dHJzJywgJ3JlZnMnLCAndm5vZGUnLCAnc2xvdHMnXTsKICBpbnN0YW5jZVByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHsKICAgIHByb3h5KGluc3RhbmNlLCBwcm9wLCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB2dWUySW5zdGFuY2VbIiQiICsgcHJvcF07CiAgICAgIH0KICAgIH0pOwogIH0pOwogIHByb3h5KGluc3RhbmNlLCAnaXNNb3VudGVkJywgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcHJpdmF0ZSBhcGkKICAgICAgcmV0dXJuIHZ1ZTJJbnN0YW5jZS5faXNNb3VudGVkOwogICAgfQogIH0pOwogIHByb3h5KGluc3RhbmNlLCAnaXNVbm1vdW50ZWQnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwcml2YXRlIGFwaQogICAgICByZXR1cm4gdnVlMkluc3RhbmNlLl9pc0Rlc3Ryb3llZDsKICAgIH0KICB9KTsKICBwcm94eShpbnN0YW5jZSwgJ2lzRGVhY3RpdmF0ZWQnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwcml2YXRlIGFwaQogICAgICByZXR1cm4gdnVlMkluc3RhbmNlLl9pbmFjdGl2ZTsKICAgIH0KICB9KTsKICBwcm94eShpbnN0YW5jZSwgJ2VtaXR0ZWQnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwcml2YXRlIGFwaQogICAgICByZXR1cm4gdnVlMkluc3RhbmNlLl9ldmVudHM7CiAgICB9CiAgfSk7CiAgaW5zdGFuY2VNYXBDYWNoZS5zZXQodnVlMkluc3RhbmNlLCBpbnN0YW5jZSk7CgogIGlmICh2dWUySW5zdGFuY2UuJHBhcmVudCkgewogICAgaW5zdGFuY2UucGFyZW50ID0gdG9WdWUzQ29tcG9uZW50SW5zdGFuY2UodnVlMkluc3RhbmNlLiRwYXJlbnQpOwogIH0KCiAgaWYgKHZ1ZTJJbnN0YW5jZS4kcm9vdCkgewogICAgaW5zdGFuY2Uucm9vdCA9IHRvVnVlM0NvbXBvbmVudEluc3RhbmNlKHZ1ZTJJbnN0YW5jZS4kcm9vdCk7CiAgfQoKICByZXR1cm4gaW5zdGFuY2U7Cn0KCmZ1bmN0aW9uIGN1cnJlbnRWTUluRm4oaG9vaykgewogIHZhciB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdm0pIHsKICAgIHdhcm4oaG9vayArICIgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSAiICsgImFzc29jaWF0ZWQgd2l0aC4gIiArICJMaWZlY3ljbGUgaW5qZWN0aW9uIEFQSXMgY2FuIG9ubHkgYmUgdXNlZCBkdXJpbmcgZXhlY3V0aW9uIG9mIHNldHVwKCkuIik7CiAgfQoKICByZXR1cm4gdm0gPT09IG51bGwgfHwgdm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZtLnByb3h5Owp9CgpmdW5jdGlvbiBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShDdG9yLCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgb3B0aW9ucyA9IHt9OwogIH0KCiAgdmFyIHNpbGVudCA9IEN0b3IuY29uZmlnLnNpbGVudDsKICBDdG9yLmNvbmZpZy5zaWxlbnQgPSB0cnVlOwogIHZhciB2bSA9IG5ldyBDdG9yKG9wdGlvbnMpOwogIEN0b3IuY29uZmlnLnNpbGVudCA9IHNpbGVudDsKICByZXR1cm4gdm07Cn0KCmZ1bmN0aW9uIGlzQ29tcG9uZW50SW5zdGFuY2Uob2JqKSB7CiAgdmFyIFZ1ZSA9IGdldFZ1ZUNvbnN0cnVjdG9yKCk7CiAgcmV0dXJuIFZ1ZSAmJiBvYmogaW5zdGFuY2VvZiBWdWU7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNsb3RQcm94eSh2bSwgc2xvdE5hbWUpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIGFyZ3MgPSBbXTsKCiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CgogICAgaWYgKCF2bS4kc2NvcGVkU2xvdHNbc2xvdE5hbWVdKSB7CiAgICAgIHJldHVybiB3YXJuKCJzbG90cy4iICsgc2xvdE5hbWUgKyAiKCkgZ290IGNhbGxlZCBvdXRzaWRlIG9mIHRoZSBcInJlbmRlcigpXCIgc2NvcGUiLCB2bSk7CiAgICB9CgogICAgcmV0dXJuIHZtLiRzY29wZWRTbG90c1tzbG90TmFtZV0uYXBwbHkodm0sIGFyZ3MpOwogIH07Cn0KCmZ1bmN0aW9uIHJlc29sdmVTbG90cyhzbG90cywgbm9ybWFsU2xvdHMpIHsKICB2YXIgcmVzOwoKICBpZiAoIXNsb3RzKSB7CiAgICByZXMgPSB7fTsKICB9IGVsc2UgaWYgKHNsb3RzLl9ub3JtYWxpemVkKSB7CiAgICAvLyBmYXN0IHBhdGggMTogY2hpbGQgY29tcG9uZW50IHJlLXJlbmRlciBvbmx5LCBwYXJlbnQgZGlkIG5vdCBjaGFuZ2UKICAgIHJldHVybiBzbG90cy5fbm9ybWFsaXplZDsKICB9IGVsc2UgewogICAgcmVzID0ge307CgogICAgZm9yICh2YXIga2V5IGluIHNsb3RzKSB7CiAgICAgIGlmIChzbG90c1trZXldICYmIGtleVswXSAhPT0gJyQnKSB7CiAgICAgICAgcmVzW2tleV0gPSB0cnVlOwogICAgICB9CiAgICB9CiAgfSAvLyBleHBvc2Ugbm9ybWFsIHNsb3RzIG9uIHNjb3BlZFNsb3RzCgoKICBmb3IgKHZhciBrZXkgaW4gbm9ybWFsU2xvdHMpIHsKICAgIGlmICghKGtleSBpbiByZXMpKSB7CiAgICAgIHJlc1trZXldID0gdHJ1ZTsKICAgIH0KICB9CgogIHJldHVybiByZXM7Cn0KCnZhciB2dWVJbnRlcm5hbENsYXNzZXM7Cgp2YXIgZ2V0VnVlSW50ZXJuYWxDbGFzc2VzID0gZnVuY3Rpb24gZ2V0VnVlSW50ZXJuYWxDbGFzc2VzKCkgewogIGlmICghdnVlSW50ZXJuYWxDbGFzc2VzKSB7CiAgICB2YXIgdm0gPSBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShnZXRWdWVDb25zdHJ1Y3RvcigpLCB7CiAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsgLy8gdG8gZ2V0IFdhdGNoZXIgY2xhc3MKCiAgICB2YXIgV2F0Y2hlciA9IHZtLl9jb21wdXRlZFdhdGNoZXJzLnZhbHVlLmNvbnN0cnVjdG9yOyAvLyB0byBnZXQgRGVwIGNsYXNzCgogICAgdmFyIERlcCA9IHZtLl9kYXRhLl9fb2JfXy5kZXAuY29uc3RydWN0b3I7CiAgICB2dWVJbnRlcm5hbENsYXNzZXMgPSB7CiAgICAgIFdhdGNoZXI6IFdhdGNoZXIsCiAgICAgIERlcDogRGVwCiAgICB9OwogICAgdm0uJGRlc3Ryb3koKTsKICB9CgogIHJldHVybiB2dWVJbnRlcm5hbENsYXNzZXM7Cn07Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uDQoNClBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueQ0KcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSA0KUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZDQpBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQpJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00NCkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SDQpPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQpQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KCgp2YXIgX2Fzc2lnbiA9IGZ1bmN0aW9uIF9fYXNzaWduKCkgewogIF9hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHsKICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICBzID0gYXJndW1lbnRzW2ldOwoKICAgICAgZm9yICh2YXIgcCBpbiBzKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdDsKICB9OwoKICByZXR1cm4gX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwoKZnVuY3Rpb24gX192YWx1ZXMobykgewogIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsCiAgICAgIG0gPSBzICYmIG9bc10sCiAgICAgIGkgPSAwOwogIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwogIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CiAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiBvICYmIG9baSsrXSwKICAgICAgICBkb25lOiAhbwogICAgICB9OwogICAgfQogIH07CiAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cn0KCmZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7CiAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9bU3ltYm9sLml0ZXJhdG9yXTsKICBpZiAoIW0pIHJldHVybiBvOwogIHZhciBpID0gbS5jYWxsKG8pLAogICAgICByLAogICAgICBhciA9IFtdLAogICAgICBlOwoKICB0cnkgewogICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIHsKICAgICAgYXIucHVzaChyLnZhbHVlKTsKICAgIH0KICB9IGNhdGNoIChlcnJvcikgewogICAgZSA9IHsKICAgICAgZXJyb3I6IGVycm9yCiAgICB9OwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVsicmV0dXJuIl0pKSBtLmNhbGwoaSk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoZSkgdGhyb3cgZS5lcnJvcjsKICAgIH0KICB9CgogIHJldHVybiBhcjsKfQoKZnVuY3Rpb24gX19zcHJlYWQoKSB7CiAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTsKICB9CgogIHJldHVybiBhcjsKfQoKZnVuY3Rpb24gY3JlYXRlU3ltYm9sKG5hbWUpIHsKICByZXR1cm4gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXShuYW1lKSA6IG5hbWU7Cn0KCnZhciBXYXRjaGVyUHJlRmx1c2hRdWV1ZUtleSA9IGNyZWF0ZVN5bWJvbCgnY29tcG9zaXRpb24tYXBpLnByZUZsdXNoUXVldWUnKTsKdmFyIFdhdGNoZXJQb3N0Rmx1c2hRdWV1ZUtleSA9IGNyZWF0ZVN5bWJvbCgnY29tcG9zaXRpb24tYXBpLnBvc3RGbHVzaFF1ZXVlJyk7IC8vIG11c3QgYmUgYSBzdHJpbmcsIHN5bWJvbCBrZXkgaXMgaWdub3JlZCBpbiByZWFjdGl2ZQoKdmFyIFJlZktleSA9ICdjb21wb3NpdGlvbi1hcGkucmVmS2V5JzsKdmFyIGFjY2Vzc01vZGlmaWVkU2V0ID0gbmV3IFdlYWtNYXAoKTsKdmFyIHJhd1NldCA9IG5ldyBXZWFrTWFwKCk7CnZhciByZWFkb25seVNldCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgUmVmSW1wbCA9Ci8qKiBAY2xhc3MgKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlZkltcGwoX2EpIHsKICAgIHZhciBnZXQgPSBfYS5nZXQsCiAgICAgICAgc2V0ID0gX2Euc2V0OwogICAgcHJveHkodGhpcywgJ3ZhbHVlJywgewogICAgICBnZXQ6IGdldCwKICAgICAgc2V0OiBzZXQKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlZkltcGw7Cn0oKTsKCmZ1bmN0aW9uIGNyZWF0ZVJlZihvcHRpb25zLCByZWFkb25seSkgewogIHZhciByID0gbmV3IFJlZkltcGwob3B0aW9ucyk7IC8vIHNlYWwgdGhlIHJlZiwgdGhpcyBjb3VsZCBwcmV2ZW50IHJlZiBmcm9tIGJlaW5nIG9ic2VydmVkCiAgLy8gSXQncyBzYWZlIHRvIHNlYWwgdGhlIHJlZiwgc2luY2Ugd2UgcmVhbGx5IHNob3VsZG4ndCBleHRlbmQgaXQuCiAgLy8gcmVsYXRlZCBpc3N1ZXM6ICM3OQoKICB2YXIgc2VhbGVkID0gT2JqZWN0LnNlYWwocik7CiAgcmVhZG9ubHlTZXQuc2V0KHNlYWxlZCwgdHJ1ZSk7CiAgcmV0dXJuIHNlYWxlZDsKfQoKZnVuY3Rpb24gcmVmKHJhdykgewogIHZhciBfYTsKCiAgaWYgKGlzUmVmKHJhdykpIHsKICAgIHJldHVybiByYXc7CiAgfQoKICB2YXIgdmFsdWUgPSByZWFjdGl2ZSgoX2EgPSB7fSwgX2FbUmVmS2V5XSA9IHJhdywgX2EpKTsKICByZXR1cm4gY3JlYXRlUmVmKHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdmFsdWVbUmVmS2V5XTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgIHJldHVybiB2YWx1ZVtSZWZLZXldID0gdjsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gaXNSZWYodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBSZWZJbXBsOwp9CgpmdW5jdGlvbiB1bnJlZihyZWYpIHsKICByZXR1cm4gaXNSZWYocmVmKSA/IHJlZi52YWx1ZSA6IHJlZjsKfQoKZnVuY3Rpb24gdG9SZWZzKG9iaikgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1JlYWN0aXZlKG9iaikpIHsKICAgIHdhcm4oInRvUmVmcygpIGV4cGVjdHMgYSByZWFjdGl2ZSBvYmplY3QgYnV0IHJlY2VpdmVkIGEgcGxhaW4gb25lLiIpOwogIH0KCiAgaWYgKCFpc1BsYWluT2JqZWN0KG9iaikpIHJldHVybiBvYmo7CiAgdmFyIHJldCA9IHt9OwoKICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICByZXRba2V5XSA9IHRvUmVmKG9iaiwga2V5KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGN1c3RvbVJlZihmYWN0b3J5KSB7CiAgdmFyIHZlcnNpb24gPSByZWYoMCk7CiAgcmV0dXJuIGNyZWF0ZVJlZihmYWN0b3J5KGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB2b2lkIHZlcnNpb24udmFsdWU7CiAgfSwgZnVuY3Rpb24gKCkgewogICAgKyt2ZXJzaW9uLnZhbHVlOwogIH0pKTsKfQoKZnVuY3Rpb24gdG9SZWYob2JqZWN0LCBrZXkpIHsKICB2YXIgdiA9IG9iamVjdFtrZXldOwogIGlmIChpc1JlZih2KSkgcmV0dXJuIHY7CiAgcmV0dXJuIGNyZWF0ZVJlZih7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIG9iamVjdFtrZXldOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgcmV0dXJuIG9iamVjdFtrZXldID0gdjsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gc2hhbGxvd1JlZihyYXcpIHsKICB2YXIgX2E7CgogIGlmIChpc1JlZihyYXcpKSB7CiAgICByZXR1cm4gcmF3OwogIH0KCiAgdmFyIHZhbHVlID0gc2hhbGxvd1JlYWN0aXZlKChfYSA9IHt9LCBfYVtSZWZLZXldID0gcmF3LCBfYSkpOwogIHJldHVybiBjcmVhdGVSZWYoewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB2YWx1ZVtSZWZLZXldOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgcmV0dXJuIHZhbHVlW1JlZktleV0gPSB2OwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiB0cmlnZ2VyUmVmKHZhbHVlKSB7CiAgaWYgKCFpc1JlZih2YWx1ZSkpIHJldHVybjsKICB2YWx1ZS52YWx1ZSA9IHZhbHVlLnZhbHVlOwp9CgpmdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHsKICB2YXIgX2EsIGVfMSwgX2I7CgogIGlmIChpc1JlYWN0aXZlKG9iamVjdFdpdGhSZWZzKSkgewogICAgcmV0dXJuIG9iamVjdFdpdGhSZWZzOwogIH0KCiAgdmFyIHZhbHVlID0gcmVhY3RpdmUoKF9hID0ge30sIF9hW1JlZktleV0gPSBvYmplY3RXaXRoUmVmcywgX2EpKTsKCiAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiBfbG9vcF8xKGtleSkgewogICAgcHJveHkodmFsdWUsIGtleSwgewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICBpZiAoaXNSZWYodmFsdWVba2V5XSkpIHsKICAgICAgICAgIHJldHVybiB2YWx1ZVtrZXldLnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhbHVlW2tleV07CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgICBpZiAoaXNSZWYodmFsdWVba2V5XSkpIHsKICAgICAgICAgIHJldHVybiB2YWx1ZVtrZXldLnZhbHVlID0gdW5yZWYodik7CiAgICAgICAgfQoKICAgICAgICB2YWx1ZVtrZXldID0gdW5yZWYodik7CiAgICAgIH0KICAgIH0pOwogIH07CgogIHRyeSB7CiAgICBmb3IgKHZhciBfYyA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKG9iamVjdFdpdGhSZWZzKSksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKICAgICAgdmFyIGtleSA9IF9kLnZhbHVlOwoKICAgICAgX2xvb3BfMShrZXkpOwogICAgfQogIH0gY2F0Y2ggKGVfMV8xKSB7CiAgICBlXzEgPSB7CiAgICAgIGVycm9yOiBlXzFfMQogICAgfTsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKF9kICYmICFfZC5kb25lICYmIChfYiA9IF9jWyJyZXR1cm4iXSkpIF9iLmNhbGwoX2MpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOwogICAgfQogIH0KCiAgcmV0dXJuIHZhbHVlOwp9CgpmdW5jdGlvbiBpc1JhdyhvYmopIHsKICB2YXIgX2E7CgogIHJldHVybiBCb29sZWFuKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouX19vYl9fKSAmJiAoKF9hID0gb2JqLl9fb2JfXykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9fcmF3X18pKTsKfQoKZnVuY3Rpb24gaXNSZWFjdGl2ZShvYmopIHsKICB2YXIgX2E7CgogIHJldHVybiBCb29sZWFuKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouX19vYl9fKSAmJiAhKChfYSA9IG9iai5fX29iX18pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fX3Jhd19fKSk7Cn0KLyoqDQogKiBQcm94aW5nIHByb3BlcnR5IGFjY2VzcyBvZiB0YXJnZXQuDQogKiBXZSBjYW4gZG8gdW53cmFwcGluZyBhbmQgb3RoZXIgdGhpbmdzIGhlcmUuDQogKi8KCgpmdW5jdGlvbiBzZXR1cEFjY2Vzc0NvbnRyb2wodGFyZ2V0KSB7CiAgaWYgKCFpc1BsYWluT2JqZWN0KHRhcmdldCkgfHwgaXNSYXcodGFyZ2V0KSB8fCBBcnJheS5pc0FycmF5KHRhcmdldCkgfHwgaXNSZWYodGFyZ2V0KSB8fCBpc0NvbXBvbmVudEluc3RhbmNlKHRhcmdldCkgfHwgYWNjZXNzTW9kaWZpZWRTZXQuaGFzKHRhcmdldCkpIHJldHVybjsKICBhY2Nlc3NNb2RpZmllZFNldC5zZXQodGFyZ2V0LCB0cnVlKTsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRhcmdldCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgZGVmaW5lQWNjZXNzQ29udHJvbCh0YXJnZXQsIGtleXNbaV0pOwogIH0KfQovKioNCiAqIEF1dG8gdW53cmFwcGluZyB3aGVuIGFjY2VzcyBwcm9wZXJ0eQ0KICovCgoKZnVuY3Rpb24gZGVmaW5lQWNjZXNzQ29udHJvbCh0YXJnZXQsIGtleSwgdmFsKSB7CiAgaWYgKGtleSA9PT0gJ19fb2JfXycpIHJldHVybjsKICBpZiAoaXNSYXcodGFyZ2V0W2tleV0pKSByZXR1cm47CiAgdmFyIGdldHRlcjsKICB2YXIgc2V0dGVyOwogIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpOwoKICBpZiAocHJvcGVydHkpIHsKICAgIGlmIChwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBnZXR0ZXIgPSBwcm9wZXJ0eS5nZXQ7CiAgICBzZXR0ZXIgPSBwcm9wZXJ0eS5zZXQ7CgogICAgaWYgKCghZ2V0dGVyIHx8IHNldHRlcikgJiYKICAgIC8qIG5vdCBvbmx5IGhhdmUgZ2V0dGVyICovCiAgICBhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICAgIHZhbCA9IHRhcmdldFtrZXldOwogICAgfQogIH0KCiAgc2V0dXBBY2Nlc3NDb250cm9sKHZhbCk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXR0ZXJIYW5kbGVyKCkgewogICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbCh0YXJnZXQpIDogdmFsOyAvLyBpZiB0aGUga2V5IGlzIGVxdWFsIHRvIFJlZktleSwgc2tpcCB0aGUgdW53cmFwIGxvZ2ljCgogICAgICBpZiAoa2V5ICE9PSBSZWZLZXkgJiYgaXNSZWYodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0dGVySGFuZGxlcihuZXdWYWwpIHsKICAgICAgaWYgKGdldHRlciAmJiAhc2V0dGVyKSByZXR1cm47CiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKHRhcmdldCkgOiB2YWw7IC8vIElmIHRoZSBrZXkgaXMgZXF1YWwgdG8gUmVmS2V5LCBza2lwIHRoZSB1bndyYXAgbG9naWMKICAgICAgLy8gSWYgYW5kIG9ubHkgaWYgInZhbHVlIiBpcyByZWYgYW5kICJuZXdWYWwiIGlzIG5vdCBhIHJlZiwKICAgICAgLy8gdGhlIGFzc2lnbm1lbnQgc2hvdWxkIGJlIHByb3hpZWQgdG8gInZhbHVlIiByZWYuCgogICAgICBpZiAoa2V5ICE9PSBSZWZLZXkgJiYgaXNSZWYodmFsdWUpICYmICFpc1JlZihuZXdWYWwpKSB7CiAgICAgICAgdmFsdWUudmFsdWUgPSBuZXdWYWw7CiAgICAgIH0gZWxzZSBpZiAoc2V0dGVyKSB7CiAgICAgICAgc2V0dGVyLmNhbGwodGFyZ2V0LCBuZXdWYWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbCA9IG5ld1ZhbDsKICAgICAgfQoKICAgICAgc2V0dXBBY2Nlc3NDb250cm9sKG5ld1ZhbCk7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIG9ic2VydmUob2JqKSB7CiAgdmFyIFZ1ZSA9IGdldFJlZ2lzdGVyZWRWdWVPckRlZmF1bHQoKTsKICB2YXIgb2JzZXJ2ZWQ7CgogIGlmIChWdWUub2JzZXJ2YWJsZSkgewogICAgb2JzZXJ2ZWQgPSBWdWUub2JzZXJ2YWJsZShvYmopOwogIH0gZWxzZSB7CiAgICB2YXIgdm0gPSBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShWdWUsIHsKICAgICAgZGF0YTogewogICAgICAgICQkc3RhdGU6IG9iagogICAgICB9CiAgICB9KTsKICAgIG9ic2VydmVkID0gdm0uX2RhdGEuJCRzdGF0ZTsKICB9IC8vIGluIFNTUiwgdGhlcmUgaXMgbm8gX19vYl9fLiBNb2NrIGZvciByZWFjdGl2aXR5IGNoZWNrCgoKICBpZiAoIWhhc093bihvYnNlcnZlZCwgJ19fb2JfXycpKSB7CiAgICBkZWYob2JzZXJ2ZWQsICdfX29iX18nLCBtb2NrT2JzZXJ2ZXIob2JzZXJ2ZWQpKTsKICB9CgogIHJldHVybiBvYnNlcnZlZDsKfQoKZnVuY3Rpb24gY3JlYXRlT2JzZXJ2ZXIoKSB7CiAgcmV0dXJuIG9ic2VydmUoe30pLl9fb2JfXzsKfQoKZnVuY3Rpb24gbW9ja09ic2VydmVyKHZhbHVlKSB7CiAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsKICAgIHZhbHVlID0ge307CiAgfQoKICByZXR1cm4gewogICAgdmFsdWU6IHZhbHVlLAogICAgZGVwOiB7CiAgICAgIG5vdGlmeTogbm9vcEZuLAogICAgICBkZXBlbmQ6IG5vb3BGbiwKICAgICAgYWRkU3ViOiBub29wRm4sCiAgICAgIHJlbW92ZVN1Yjogbm9vcEZuCiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gc2hhbGxvd1JlYWN0aXZlKG9iaikgewogIHZhciBlXzEsIF9hOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhb2JqKSB7CiAgICB3YXJuKCcic2hhbGxvd1JlYWN0aXZlKCkiIGlzIGNhbGxlZCB3aXRob3V0IHByb3ZpZGUgYW4gIm9iamVjdCIuJyk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIShpc1BsYWluT2JqZWN0KG9iaikgfHwgaXNBcnJheShvYmopKSB8fCBpc1JhdyhvYmopIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKG9iaikpIHsKICAgIHJldHVybiBvYmo7CiAgfQoKICB2YXIgb2JzZXJ2ZWQgPSBvYnNlcnZlKHt9KTsKICBzZXR1cEFjY2Vzc0NvbnRyb2wob2JzZXJ2ZWQpOwogIHZhciBvYiA9IG9ic2VydmVkLl9fb2JfXzsKCiAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiBfbG9vcF8xKGtleSkgewogICAgdmFyIHZhbCA9IG9ialtrZXldOwogICAgdmFyIGdldHRlcjsKICAgIHZhciBzZXR0ZXI7CiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTsKCiAgICBpZiAocHJvcGVydHkpIHsKICAgICAgaWYgKHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgfQoKICAgICAgZ2V0dGVyID0gcHJvcGVydHkuZ2V0OwogICAgICBzZXR0ZXIgPSBwcm9wZXJ0eS5zZXQ7CiAgICB9CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9ic2VydmVkLCBrZXksIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldHRlckhhbmRsZXIoKSB7CiAgICAgICAgdmFyIF9hOwoKICAgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsOwogICAgICAgIChfYSA9IG9iLmRlcCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlcGVuZCgpOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXR0ZXJIYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIHZhciBfYTsKCiAgICAgICAgaWYgKGdldHRlciAmJiAhc2V0dGVyKSByZXR1cm47CgogICAgICAgIGlmIChzZXR0ZXIpIHsKICAgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsID0gbmV3VmFsOwogICAgICAgIH0KCiAgICAgICAgKF9hID0gb2IuZGVwKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eubm90aWZ5KCk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIHRyeSB7CiAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKG9iaikpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CiAgICAgIHZhciBrZXkgPSBfYy52YWx1ZTsKCiAgICAgIF9sb29wXzEoa2V5KTsKICAgIH0KICB9IGNhdGNoIChlXzFfMSkgewogICAgZV8xID0gewogICAgICBlcnJvcjogZV8xXzEKICAgIH07CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYlsicmV0dXJuIl0pKSBfYS5jYWxsKF9iKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsKICAgIH0KICB9CgogIHJldHVybiBvYnNlcnZlZDsKfQovKioNCiAqIE1ha2Ugb2JqIHJlYWN0aXZpdHkNCiAqLwoKCmZ1bmN0aW9uIHJlYWN0aXZlKG9iaikgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFvYmopIHsKICAgIHdhcm4oJyJyZWFjdGl2ZSgpIiBpcyBjYWxsZWQgd2l0aG91dCBwcm92aWRlIGFuICJvYmplY3QiLicpOyAvLyBAdHMtaWdub3JlCgogICAgcmV0dXJuOwogIH0KCiAgaWYgKCEoaXNQbGFpbk9iamVjdChvYmopIHx8IGlzQXJyYXkob2JqKSkgfHwgaXNSYXcob2JqKSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopKSB7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgdmFyIG9ic2VydmVkID0gb2JzZXJ2ZShvYmopOwogIHNldHVwQWNjZXNzQ29udHJvbChvYnNlcnZlZCk7CiAgcmV0dXJuIG9ic2VydmVkOwp9Ci8qKg0KICogTWFrZSBzdXJlIG9iaiBjYW4ndCBiZSBhIHJlYWN0aXZlDQogKi8KCgpmdW5jdGlvbiBtYXJrUmF3KG9iaikgewogIGlmICghKGlzUGxhaW5PYmplY3Qob2JqKSB8fCBpc0FycmF5KG9iaikpIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKG9iaikpIHsKICAgIHJldHVybiBvYmo7CiAgfSAvLyBzZXQgdGhlIHZ1ZSBvYnNlcnZhYmxlIGZsYWcgYXQgb2JqCgoKICB2YXIgb2IgPSBjcmVhdGVPYnNlcnZlcigpOwogIG9iLl9fcmF3X18gPSB0cnVlOwogIGRlZihvYmosICdfX29iX18nLCBvYik7IC8vIG1hcmsgYXMgUmF3CgogIHJhd1NldC5zZXQob2JqLCB0cnVlKTsKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkgewogIHZhciBfYSwgX2I7CgogIGlmIChpc1JhdyhvYnNlcnZlZCkgfHwgIU9iamVjdC5pc0V4dGVuc2libGUob2JzZXJ2ZWQpKSB7CiAgICByZXR1cm4gb2JzZXJ2ZWQ7CiAgfQoKICByZXR1cm4gKChfYiA9IChfYSA9IG9ic2VydmVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX19vYl9fKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudmFsdWUpIHx8IG9ic2VydmVkOwp9CgpmdW5jdGlvbiBpc1JlYWRvbmx5KG9iaikgewogIHJldHVybiByZWFkb25seVNldC5oYXMob2JqKTsKfQovKioNCiAqICoqSW4gQHZ1ZS9jb21wb3NpdGlvbi1hcGksIGByZWFjdGl2ZWAgb25seSBwcm92aWRlcyB0eXBlLWxldmVsIHJlYWRvbmx5IGNoZWNrKioNCiAqDQogKiBDcmVhdGVzIGEgcmVhZG9ubHkgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LiBOb3RlIHRoZSByZXR1cm5lZCBjb3B5IGlzIG5vdA0KICogbWFkZSByZWFjdGl2ZSwgYnV0IGByZWFkb25seWAgY2FuIGJlIGNhbGxlZCBvbiBhbiBhbHJlYWR5IHJlYWN0aXZlIG9iamVjdC4NCiAqLwoKCmZ1bmN0aW9uIHJlYWRvbmx5KHRhcmdldCkgewogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIHNoYWxsb3dSZWFkb25seShvYmopIHsKICB2YXIgZV8xLCBfYTsKCiAgaWYgKCEoaXNQbGFpbk9iamVjdChvYmopIHx8IGlzQXJyYXkob2JqKSkgfHwgIU9iamVjdC5pc0V4dGVuc2libGUob2JqKSkgewogICAgcmV0dXJuIG9iajsKICB9CgogIHZhciByZWFkb25seU9iaiA9IHt9OwogIHZhciBzb3VyY2UgPSByZWFjdGl2ZSh7fSk7CiAgdmFyIG9iID0gc291cmNlLl9fb2JfXzsKCiAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiBfbG9vcF8xKGtleSkgewogICAgdmFyIHZhbCA9IG9ialtrZXldOwogICAgdmFyIGdldHRlcjsKICAgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpOwoKICAgIGlmIChwcm9wZXJ0eSkgewogICAgICBpZiAocHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICB9CgogICAgICBnZXR0ZXIgPSBwcm9wZXJ0eS5nZXQ7CiAgICB9CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlYWRvbmx5T2JqLCBrZXksIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldHRlckhhbmRsZXIoKSB7CiAgICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDsKICAgICAgICBvYi5kZXAuZGVwZW5kKCk7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgIHdhcm4oIlNldCBvcGVyYXRpb24gb24ga2V5IFwiIiArIGtleSArICJcIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS4iKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIHRyeSB7CiAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKG9iaikpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CiAgICAgIHZhciBrZXkgPSBfYy52YWx1ZTsKCiAgICAgIF9sb29wXzEoa2V5KTsKICAgIH0KICB9IGNhdGNoIChlXzFfMSkgewogICAgZV8xID0gewogICAgICBlcnJvcjogZV8xXzEKICAgIH07CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYlsicmV0dXJuIl0pKSBfYS5jYWxsKF9iKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsKICAgIH0KICB9CgogIHJlYWRvbmx5U2V0LnNldChyZWFkb25seU9iaiwgdHJ1ZSk7CiAgcmV0dXJuIHJlYWRvbmx5T2JqOwp9Ci8qKg0KICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHksIHRyaWdnZXJzIGNoYW5nZQ0KICogbm90aWZpY2F0aW9uIGFuZCBpbnRlcmNlcHQgaXQncyBzdWJzZXF1ZW50IGFjY2VzcyBpZiB0aGUgcHJvcGVydHkgZG9lc24ndA0KICogYWxyZWFkeSBleGlzdC4NCiAqLwoKCmZ1bmN0aW9uIHNldCh0YXJnZXQsIGtleSwgdmFsKSB7CiAgdmFyIFZ1ZSA9IGdldFZ1ZUNvbnN0cnVjdG9yKCk7CiAgdmFyIF9hID0gVnVlLnV0aWwsCiAgICAgIHdhcm4gPSBfYS53YXJuLAogICAgICBkZWZpbmVSZWFjdGl2ZSA9IF9hLmRlZmluZVJlYWN0aXZlOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAoaXNVbmRlZih0YXJnZXQpIHx8IGlzUHJpbWl0aXZlKHRhcmdldCkpKSB7CiAgICB3YXJuKCJDYW5ub3Qgc2V0IHJlYWN0aXZlIHByb3BlcnR5IG9uIHVuZGVmaW5lZCwgbnVsbCwgb3IgcHJpbWl0aXZlIHZhbHVlOiAiICsgdGFyZ2V0KTsKICB9CgogIGlmIChpc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkgewogICAgdGFyZ2V0Lmxlbmd0aCA9IE1hdGgubWF4KHRhcmdldC5sZW5ndGgsIGtleSk7CiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKTsKICAgIHJldHVybiB2YWw7CiAgfQoKICBpZiAoa2V5IGluIHRhcmdldCAmJiAhKGtleSBpbiBPYmplY3QucHJvdG90eXBlKSkgewogICAgdGFyZ2V0W2tleV0gPSB2YWw7CiAgICByZXR1cm4gdmFsOwogIH0KCiAgdmFyIG9iID0gdGFyZ2V0Ll9fb2JfXzsKCiAgaWYgKHRhcmdldC5faXNWdWUgfHwgb2IgJiYgb2Iudm1Db3VudCkgewogICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCBhZGRpbmcgcmVhY3RpdmUgcHJvcGVydGllcyB0byBhIFZ1ZSBpbnN0YW5jZSBvciBpdHMgcm9vdCAkZGF0YSAnICsgJ2F0IHJ1bnRpbWUgLSBkZWNsYXJlIGl0IHVwZnJvbnQgaW4gdGhlIGRhdGEgb3B0aW9uLicpOwogICAgcmV0dXJuIHZhbDsKICB9CgogIGlmICghb2IpIHsKICAgIHRhcmdldFtrZXldID0gdmFsOwogICAgcmV0dXJuIHZhbDsKICB9CgogIGRlZmluZVJlYWN0aXZlKG9iLnZhbHVlLCBrZXksIHZhbCk7IC8vIElNUE9SVEFOVDogZGVmaW5lIGFjY2VzcyBjb250cm9sIGJlZm9yZSB0cmlnZ2VyIHdhdGNoZXIKCiAgZGVmaW5lQWNjZXNzQ29udHJvbCh0YXJnZXQsIGtleSwgdmFsKTsKICBvYi5kZXAubm90aWZ5KCk7CiAgcmV0dXJuIHZhbDsKfQovKioNCiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuDQogKi8KCgpmdW5jdGlvbiBkZWwodGFyZ2V0LCBrZXkpIHsKICB2YXIgVnVlID0gZ2V0VnVlQ29uc3RydWN0b3IoKTsKICB2YXIgd2FybiA9IFZ1ZS51dGlsLndhcm47CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIChpc1VuZGVmKHRhcmdldCkgfHwgaXNQcmltaXRpdmUodGFyZ2V0KSkpIHsKICAgIHdhcm4oIkNhbm5vdCBkZWxldGUgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6ICIgKyB0YXJnZXQpOwogIH0KCiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJiBpc1ZhbGlkQXJyYXlJbmRleChrZXkpKSB7CiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgb2IgPSB0YXJnZXQuX19vYl9fOwoKICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCBvYiAmJiBvYi52bUNvdW50KSB7CiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIGRlbGV0aW5nIHByb3BlcnRpZXMgb24gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJyk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIWhhc093bih0YXJnZXQsIGtleSkpIHsKICAgIHJldHVybjsKICB9CgogIGRlbGV0ZSB0YXJnZXRba2V5XTsKCiAgaWYgKCFvYikgewogICAgcmV0dXJuOwogIH0KCiAgb2IuZGVwLm5vdGlmeSgpOwp9Cgp2YXIgZ2VuTmFtZSA9IGZ1bmN0aW9uIGdlbk5hbWUobmFtZSkgewogIHJldHVybiAib24iICsgKG5hbWVbMF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSkpOwp9OwoKZnVuY3Rpb24gY3JlYXRlTGlmZUN5Y2xlKGxpZmVDeWNsZWhvb2spIHsKICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICB2YXIgdm0gPSBjdXJyZW50Vk1JbkZuKGdlbk5hbWUobGlmZUN5Y2xlaG9vaykpOwoKICAgIGlmICh2bSkgewogICAgICBpbmplY3RIb29rT3B0aW9uKGdldFZ1ZUNvbnN0cnVjdG9yKCksIHZtLCBsaWZlQ3ljbGVob29rLCBjYWxsYmFjayk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gaW5qZWN0SG9va09wdGlvbihWdWUsIHZtLCBob29rLCB2YWwpIHsKICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zOwogIHZhciBtZXJnZUZuID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXNbaG9va107CiAgb3B0aW9uc1tob29rXSA9IG1lcmdlRm4ob3B0aW9uc1tob29rXSwgd3JhcEhvb2tDYWxsKHZtLCB2YWwpKTsKfQoKZnVuY3Rpb24gd3JhcEhvb2tDYWxsKHZtLCBmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2E7CgogICAgdmFyIGFyZ3MgPSBbXTsKCiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CgogICAgdmFyIHByZVZtID0gKF9hID0gZ2V0Q3VycmVudEluc3RhbmNlKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm94eTsKICAgIHNldEN1cnJlbnRJbnN0YW5jZSh2bSk7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIGZuLmFwcGx5KHZvaWQgMCwgX19zcHJlYWQoYXJncykpOwogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0Q3VycmVudEluc3RhbmNlKHByZVZtKTsKICAgIH0KICB9Owp9IC8vIGV4cG9ydCBjb25zdCBvbkNyZWF0ZWQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2NyZWF0ZWQnKTsKCgp2YXIgb25CZWZvcmVNb3VudCA9IGNyZWF0ZUxpZmVDeWNsZSgnYmVmb3JlTW91bnQnKTsKdmFyIG9uTW91bnRlZCA9IGNyZWF0ZUxpZmVDeWNsZSgnbW91bnRlZCcpOwp2YXIgb25CZWZvcmVVcGRhdGUgPSBjcmVhdGVMaWZlQ3ljbGUoJ2JlZm9yZVVwZGF0ZScpOwp2YXIgb25VcGRhdGVkID0gY3JlYXRlTGlmZUN5Y2xlKCd1cGRhdGVkJyk7CnZhciBvbkJlZm9yZVVubW91bnQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2JlZm9yZURlc3Ryb3knKTsKdmFyIG9uVW5tb3VudGVkID0gY3JlYXRlTGlmZUN5Y2xlKCdkZXN0cm95ZWQnKTsKdmFyIG9uRXJyb3JDYXB0dXJlZCA9IGNyZWF0ZUxpZmVDeWNsZSgnZXJyb3JDYXB0dXJlZCcpOwp2YXIgb25BY3RpdmF0ZWQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2FjdGl2YXRlZCcpOwp2YXIgb25EZWFjdGl2YXRlZCA9IGNyZWF0ZUxpZmVDeWNsZSgnZGVhY3RpdmF0ZWQnKTsKdmFyIG9uU2VydmVyUHJlZmV0Y2ggPSBjcmVhdGVMaWZlQ3ljbGUoJ3NlcnZlclByZWZldGNoJyk7CnZhciBmYWxsYmFja1ZNOwoKZnVuY3Rpb24gZmx1c2hQcmVRdWV1ZSgpIHsKICBmbHVzaFF1ZXVlKHRoaXMsIFdhdGNoZXJQcmVGbHVzaFF1ZXVlS2V5KTsKfQoKZnVuY3Rpb24gZmx1c2hQb3N0UXVldWUoKSB7CiAgZmx1c2hRdWV1ZSh0aGlzLCBXYXRjaGVyUG9zdEZsdXNoUXVldWVLZXkpOwp9CgpmdW5jdGlvbiBoYXNXYXRjaEVudih2bSkgewogIHJldHVybiB2bVtXYXRjaGVyUHJlRmx1c2hRdWV1ZUtleV0gIT09IHVuZGVmaW5lZDsKfQoKZnVuY3Rpb24gaW5zdGFsbFdhdGNoRW52KHZtKSB7CiAgdm1bV2F0Y2hlclByZUZsdXNoUXVldWVLZXldID0gW107CiAgdm1bV2F0Y2hlclBvc3RGbHVzaFF1ZXVlS2V5XSA9IFtdOwogIHZtLiRvbignaG9vazpiZWZvcmVVcGRhdGUnLCBmbHVzaFByZVF1ZXVlKTsKICB2bS4kb24oJ2hvb2s6dXBkYXRlZCcsIGZsdXNoUG9zdFF1ZXVlKTsKfQoKZnVuY3Rpb24gZ2V0V2F0Y2hlck9wdGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIF9hc3NpZ24oewogICAgaW1tZWRpYXRlOiBmYWxzZSwKICAgIGRlZXA6IGZhbHNlLAogICAgZmx1c2g6ICdwcmUnCiAgfSwgb3B0aW9ucyk7Cn0KCmZ1bmN0aW9uIGdldFdhdGNoRWZmZWN0T3B0aW9uKG9wdGlvbnMpIHsKICByZXR1cm4gX2Fzc2lnbih7CiAgICBpbW1lZGlhdGU6IHRydWUsCiAgICBkZWVwOiBmYWxzZSwKICAgIGZsdXNoOiAncHJlJwogIH0sIG9wdGlvbnMpOwp9CgpmdW5jdGlvbiBnZXRXYXRjaGVyVk0oKSB7CiAgdmFyIF9hOwoKICB2YXIgdm0gPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwoKICBpZiAoIXZtKSB7CiAgICBpZiAoIWZhbGxiYWNrVk0pIHsKICAgICAgZmFsbGJhY2tWTSA9IGRlZmluZUNvbXBvbmVudEluc3RhbmNlKGdldFZ1ZUNvbnN0cnVjdG9yKCkpOwogICAgfQoKICAgIHZtID0gZmFsbGJhY2tWTTsKICB9IGVsc2UgaWYgKCFoYXNXYXRjaEVudih2bSkpIHsKICAgIGluc3RhbGxXYXRjaEVudih2bSk7CiAgfQoKICByZXR1cm4gdm07Cn0KCmZ1bmN0aW9uIGZsdXNoUXVldWUodm0sIGtleSkgewogIHZhciBxdWV1ZSA9IHZtW2tleV07CgogIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZS5sZW5ndGg7IGluZGV4KyspIHsKICAgIHF1ZXVlW2luZGV4XSgpOwogIH0KCiAgcXVldWUubGVuZ3RoID0gMDsKfQoKZnVuY3Rpb24gcXVldWVGbHVzaEpvYih2bSwgZm4sIG1vZGUpIHsKICAvLyBmbHVzaCBhbGwgd2hlbiBiZWZvcmVVcGRhdGUgYW5kIHVwZGF0ZWQgYXJlIG5vdCBmaXJlZAogIHZhciBmYWxsYmFja0ZsdXNoID0gZnVuY3Rpb24gZmFsbGJhY2tGbHVzaCgpIHsKICAgIHZtLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh2bVtXYXRjaGVyUHJlRmx1c2hRdWV1ZUtleV0ubGVuZ3RoKSB7CiAgICAgICAgZmx1c2hRdWV1ZSh2bSwgV2F0Y2hlclByZUZsdXNoUXVldWVLZXkpOwogICAgICB9CgogICAgICBpZiAodm1bV2F0Y2hlclBvc3RGbHVzaFF1ZXVlS2V5XS5sZW5ndGgpIHsKICAgICAgICBmbHVzaFF1ZXVlKHZtLCBXYXRjaGVyUG9zdEZsdXNoUXVldWVLZXkpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBzd2l0Y2ggKG1vZGUpIHsKICAgIGNhc2UgJ3ByZSc6CiAgICAgIGZhbGxiYWNrRmx1c2goKTsKICAgICAgdm1bV2F0Y2hlclByZUZsdXNoUXVldWVLZXldLnB1c2goZm4pOwogICAgICBicmVhazsKCiAgICBjYXNlICdwb3N0JzoKICAgICAgZmFsbGJhY2tGbHVzaCgpOwogICAgICB2bVtXYXRjaGVyUG9zdEZsdXNoUXVldWVLZXldLnB1c2goZm4pOwogICAgICBicmVhazsKCiAgICBkZWZhdWx0OgogICAgICBhc3NlcnQoZmFsc2UsICJmbHVzaCBtdXN0IGJlIG9uZSBvZiBbXCJwb3N0XCIsIFwicHJlXCIsIFwic3luY1wiXSwgYnV0IGdvdCAiICsgbW9kZSk7CiAgICAgIGJyZWFrOwogIH0KfQoKZnVuY3Rpb24gY3JlYXRlVnVlV2F0Y2hlcih2bSwgZ2V0dGVyLCBjYWxsYmFjaywgb3B0aW9ucykgewogIHZhciBpbmRleCA9IHZtLl93YXRjaGVycy5sZW5ndGg7IC8vIEB0cy1pZ25vcmU6IHVzZSB1bmRvY3VtZW50ZWQgb3B0aW9ucwoKICB2bS4kd2F0Y2goZ2V0dGVyLCBjYWxsYmFjaywgewogICAgaW1tZWRpYXRlOiBvcHRpb25zLmltbWVkaWF0ZUludm9rZUNhbGxiYWNrLAogICAgZGVlcDogb3B0aW9ucy5kZWVwLAogICAgbGF6eTogb3B0aW9ucy5ub1J1biwKICAgIHN5bmM6IG9wdGlvbnMuc3luYywKICAgIGJlZm9yZTogb3B0aW9ucy5iZWZvcmUKICB9KTsKICByZXR1cm4gdm0uX3dhdGNoZXJzW2luZGV4XTsKfSAvLyBXZSBoYXZlIHRvIG1vbmtleXBhdGNoIHRoZSB0ZWFyZG93biBmdW5jdGlvbiBzbyBWdWUgd2lsbCBydW4KLy8gcnVuQ2xlYW51cCgpIHdoZW4gaXQgdGVhcnMgZG93biB0aGUgd2F0Y2hlciBvbiB1bm1vdW50ZWQuCgoKZnVuY3Rpb24gcGF0Y2hXYXRjaGVyVGVhcmRvd24od2F0Y2hlciwgcnVuQ2xlYW51cCkgewogIHZhciBfdGVhcmRvd24gPSB3YXRjaGVyLnRlYXJkb3duOwoKICB3YXRjaGVyLnRlYXJkb3duID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGFyZ3MgPSBbXTsKCiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CgogICAgX3RlYXJkb3duLmFwcGx5KHdhdGNoZXIsIGFyZ3MpOwoKICAgIHJ1bkNsZWFudXAoKTsKICB9Owp9CgpmdW5jdGlvbiBjcmVhdGVXYXRjaGVyKHZtLCBzb3VyY2UsIGNiLCBvcHRpb25zKSB7CiAgdmFyIF9hOwoKICB2YXIgZmx1c2hNb2RlID0gb3B0aW9ucy5mbHVzaDsKICB2YXIgaXNTeW5jID0gZmx1c2hNb2RlID09PSAnc3luYyc7CiAgdmFyIGNsZWFudXA7CgogIHZhciByZWdpc3RlckNsZWFudXAgPSBmdW5jdGlvbiByZWdpc3RlckNsZWFudXAoZm4pIHsKICAgIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgICB0cnkgewogICAgICAgIGZuKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgbG9nRXJyb3IoZXJyb3IsIHZtLCAnb25DbGVhbnVwKCknKTsKICAgICAgfQogICAgfTsKICB9OyAvLyBjbGVhbnVwIGJlZm9yZSBydW5uaW5nIGdldHRlciBhZ2FpbgoKCiAgdmFyIHJ1bkNsZWFudXAgPSBmdW5jdGlvbiBydW5DbGVhbnVwKCkgewogICAgaWYgKGNsZWFudXApIHsKICAgICAgY2xlYW51cCgpOwogICAgICBjbGVhbnVwID0gbnVsbDsKICAgIH0KICB9OwoKICB2YXIgY3JlYXRlU2NoZWR1bGVyID0gZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVyKGZuKSB7CiAgICBpZiAoaXNTeW5jIHx8CiAgICAvKiB3aXRob3V0IGEgY3VycmVudCBhY3RpdmUgaW5zdGFuY2UsIGlnbm9yZSBwcmV8cG9zdCBtb2RlICovCiAgICB2bSA9PT0gZmFsbGJhY2tWTSkgewogICAgICByZXR1cm4gZm47CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFyZ3MgPSBbXTsKCiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICB9CgogICAgICByZXR1cm4gcXVldWVGbHVzaEpvYih2bSwgZnVuY3Rpb24gKCkgewogICAgICAgIGZuLmFwcGx5KHZvaWQgMCwgX19zcHJlYWQoYXJncykpOwogICAgICB9LCBmbHVzaE1vZGUpOwogICAgfTsKICB9OyAvLyBlZmZlY3Qgd2F0Y2gKCgogIGlmIChjYiA9PT0gbnVsbCkgewogICAgdmFyIHJ1bm5pbmdfMSA9IGZhbHNlOwoKICAgIHZhciBnZXR0ZXJfMSA9IGZ1bmN0aW9uIGdldHRlcl8xKCkgewogICAgICAvLyBwcmV2ZW50aW5nIHRoZSB3YXRjaCBjYWxsYmFjayBiZWluZyBjYWxsIGluIHRoZSBzYW1lIGV4ZWN1dGlvbgogICAgICBpZiAocnVubmluZ18xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHJ1bm5pbmdfMSA9IHRydWU7CiAgICAgICAgc291cmNlKHJlZ2lzdGVyQ2xlYW51cCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgcnVubmluZ18xID0gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHdhdGNoZXJfMSA9IGNyZWF0ZVZ1ZVdhdGNoZXIodm0sIGdldHRlcl8xLCBub29wRm4sIHsKICAgICAgZGVlcDogb3B0aW9ucy5kZWVwIHx8IGZhbHNlLAogICAgICBzeW5jOiBpc1N5bmMsCiAgICAgIGJlZm9yZTogcnVuQ2xlYW51cAogICAgfSk7CiAgICBwYXRjaFdhdGNoZXJUZWFyZG93bih3YXRjaGVyXzEsIHJ1bkNsZWFudXApOyAvLyBlbmFibGUgdGhlIHdhdGNoZXIgdXBkYXRlCgogICAgd2F0Y2hlcl8xLmxhenkgPSBmYWxzZTsKICAgIHZhciBvcmlnaW5HZXQgPSB3YXRjaGVyXzEuZ2V0LmJpbmQod2F0Y2hlcl8xKTsgLy8gYWx3YXlzIHJ1biB3YXRjaEVmZmVjdAoKICAgIHdhdGNoZXJfMS5nZXQgPSBjcmVhdGVTY2hlZHVsZXIob3JpZ2luR2V0KTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHdhdGNoZXJfMS50ZWFyZG93bigpOwogICAgfTsKICB9CgogIHZhciBkZWVwID0gb3B0aW9ucy5kZWVwOwogIHZhciBnZXR0ZXI7CgogIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHsKICAgIGdldHRlciA9IGZ1bmN0aW9uIGdldHRlcigpIHsKICAgICAgcmV0dXJuIHNvdXJjZS5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gaXNSZWYocykgPyBzLnZhbHVlIDogcygpOwogICAgICB9KTsKICAgIH07CiAgfSBlbHNlIGlmIChpc1JlZihzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBmdW5jdGlvbiBnZXR0ZXIoKSB7CiAgICAgIHJldHVybiBzb3VyY2UudmFsdWU7CiAgICB9OwogIH0gZWxzZSBpZiAoaXNSZWFjdGl2ZShzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBmdW5jdGlvbiBnZXR0ZXIoKSB7CiAgICAgIHJldHVybiBzb3VyY2U7CiAgICB9OwoKICAgIGRlZXAgPSB0cnVlOwogIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBzb3VyY2U7CiAgfSBlbHNlIHsKICAgIGdldHRlciA9IG5vb3BGbjsKICAgIHdhcm4oIkludmFsaWQgd2F0Y2ggc291cmNlOiAiICsgSlNPTi5zdHJpbmdpZnkoc291cmNlKSArICIuXG4gICAgICBBIHdhdGNoIHNvdXJjZSBjYW4gb25seSBiZSBhIGdldHRlci9lZmZlY3QgZnVuY3Rpb24sIGEgcmVmLCBhIHJlYWN0aXZlIG9iamVjdCwgb3IgYW4gYXJyYXkgb2YgdGhlc2UgdHlwZXMuIiwgdm0pOwogIH0KCiAgdmFyIGFwcGx5Q2IgPSBmdW5jdGlvbiBhcHBseUNiKG4sIG8pIHsKICAgIC8vIGNsZWFudXAgYmVmb3JlIHJ1bm5pbmcgY2IgYWdhaW4KICAgIHJ1bkNsZWFudXAoKTsKICAgIGNiKG4sIG8sIHJlZ2lzdGVyQ2xlYW51cCk7CiAgfTsKCiAgdmFyIGNhbGxiYWNrID0gY3JlYXRlU2NoZWR1bGVyKGFwcGx5Q2IpOwoKICBpZiAob3B0aW9ucy5pbW1lZGlhdGUpIHsKICAgIHZhciBvcmlnaW5hbENhbGxiYWNrXzEgPSBjYWxsYmFjazsgLy8gYHNoaWZ0Q2FsbGJhY2tgIGlzIHVzZWQgdG8gaGFuZGxlIHRoZSBmaXJzdCBzeW5jIGVmZmVjdCBydW4uCiAgICAvLyBUaGUgc3Vic2VxdWVudCBjYWxsYmFja3Mgd2lsbCByZWRpcmVjdCB0byBgY2FsbGJhY2tgLgoKICAgIHZhciBfc2hpZnRDYWxsYmFja18gPSBmdW5jdGlvbiBzaGlmdENhbGxiYWNrXzEobiwgbykgewogICAgICBfc2hpZnRDYWxsYmFja18gPSBvcmlnaW5hbENhbGxiYWNrXzE7CiAgICAgIGFwcGx5Q2Iobiwgbyk7CiAgICB9OwoKICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2sobiwgbykgewogICAgICBfc2hpZnRDYWxsYmFja18obiwgbyk7CiAgICB9OwogIH0gLy8gQHRzLWlnbm9yZTogdXNlIHVuZG9jdW1lbnRlZCBvcHRpb24gInN5bmMiCgoKICB2YXIgc3RvcCA9IHZtLiR3YXRjaChnZXR0ZXIsIGNhbGxiYWNrLCB7CiAgICBpbW1lZGlhdGU6IG9wdGlvbnMuaW1tZWRpYXRlLAogICAgZGVlcDogZGVlcCwKICAgIHN5bmM6IGlzU3luYwogIH0pOyAvLyBPbmNlIGFnYWluLCB3ZSBoYXZlIHRvIGhhY2sgdGhlIHdhdGNoZXIgZm9yIHByb3BlciB0ZWFyZG93bgoKICB2YXIgd2F0Y2hlciA9IHZtLl93YXRjaGVyc1t2bS5fd2F0Y2hlcnMubGVuZ3RoIC0gMV07IC8vIGlmIHRoZSByZXR1cm4gdmFsdWUgaXMgcmVhY3RpdmUgYW5kIGRlZXA6dHJ1ZQogIC8vIHdhdGNoIGZvciBjaGFuZ2VzLCB0aGlzIG1pZ2h0IGhhcHBlbiB3aGVuIG5ldyBrZXkgaXMgYWRkZWQKCiAgaWYgKGlzUmVhY3RpdmUod2F0Y2hlci52YWx1ZSkgJiYgKChfYSA9IHdhdGNoZXIudmFsdWUuX19vYl9fKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVwKSAmJiBkZWVwKSB7CiAgICB3YXRjaGVyLnZhbHVlLl9fb2JfXy5kZXAuYWRkU3ViKHsKICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgICAgLy8gdGhpcyB3aWxsIGZvcmNlIHRoZSBzb3VyY2UgdG8gYmUgcmV2YWx1YXRlZCBhbmQgdGhlIGNhbGxiYWNrCiAgICAgICAgLy8gZXhlY3V0ZWQgaWYgbmVlZGVkCiAgICAgICAgd2F0Y2hlci5ydW4oKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBwYXRjaFdhdGNoZXJUZWFyZG93bih3YXRjaGVyLCBydW5DbGVhbnVwKTsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgc3RvcCgpOwogIH07Cn0KCmZ1bmN0aW9uIHdhdGNoRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykgewogIHZhciBvcHRzID0gZ2V0V2F0Y2hFZmZlY3RPcHRpb24ob3B0aW9ucyk7CiAgdmFyIHZtID0gZ2V0V2F0Y2hlclZNKCk7CiAgcmV0dXJuIGNyZWF0ZVdhdGNoZXIodm0sIGVmZmVjdCwgbnVsbCwgb3B0cyk7Cn0gLy8gaW1wbGVtZW50YXRpb24KCgpmdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKSB7CiAgdmFyIGNhbGxiYWNrID0gbnVsbDsKCiAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgewogICAgLy8gc291cmNlIHdhdGNoCiAgICBjYWxsYmFjayA9IGNiOwogIH0gZWxzZSB7CiAgICAvLyBlZmZlY3Qgd2F0Y2gKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgIHdhcm4oImB3YXRjaChmbiwgb3B0aW9ucz8pYCBzaWduYXR1cmUgaGFzIGJlZW4gbW92ZWQgdG8gYSBzZXBhcmF0ZSBBUEkuICIgKyAiVXNlIGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pYCBpbnN0ZWFkLiBgd2F0Y2hgIG5vdyBvbmx5ICIgKyAic3VwcG9ydHMgYHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnM/KSBzaWduYXR1cmUuIik7CiAgICB9CgogICAgb3B0aW9ucyA9IGNiOwogICAgY2FsbGJhY2sgPSBudWxsOwogIH0KCiAgdmFyIG9wdHMgPSBnZXRXYXRjaGVyT3B0aW9uKG9wdGlvbnMpOwogIHZhciB2bSA9IGdldFdhdGNoZXJWTSgpOwogIHJldHVybiBjcmVhdGVXYXRjaGVyKHZtLCBzb3VyY2UsIGNhbGxiYWNrLCBvcHRzKTsKfSAvLyBpbXBsZW1lbnQKCgpmdW5jdGlvbiBjb21wdXRlZChvcHRpb25zKSB7CiAgdmFyIF9hOwoKICB2YXIgdm0gPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwogIHZhciBnZXQsIHNldDsKCiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7CiAgICBnZXQgPSBvcHRpb25zOwogIH0gZWxzZSB7CiAgICBnZXQgPSBvcHRpb25zLmdldDsKICAgIHNldCA9IG9wdGlvbnMuc2V0OwogIH0KCiAgdmFyIGNvbXB1dGVkU2V0dGVyOwogIHZhciBjb21wdXRlZEdldHRlcjsKCiAgaWYgKHZtICYmICF2bS4kaXNTZXJ2ZXIpIHsKICAgIHZhciBfYiA9IGdldFZ1ZUludGVybmFsQ2xhc3NlcygpLAogICAgICAgIFdhdGNoZXJfMSA9IF9iLldhdGNoZXIsCiAgICAgICAgRGVwXzEgPSBfYi5EZXA7CgogICAgdmFyIHdhdGNoZXJfMTsKCiAgICBjb21wdXRlZEdldHRlciA9IGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkgewogICAgICBpZiAoIXdhdGNoZXJfMSkgewogICAgICAgIHdhdGNoZXJfMSA9IG5ldyBXYXRjaGVyXzEodm0sIGdldCwgbm9vcEZuLCB7CiAgICAgICAgICBsYXp5OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh3YXRjaGVyXzEuZGlydHkpIHsKICAgICAgICB3YXRjaGVyXzEuZXZhbHVhdGUoKTsKICAgICAgfQoKICAgICAgaWYgKERlcF8xLnRhcmdldCkgewogICAgICAgIHdhdGNoZXJfMS5kZXBlbmQoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHdhdGNoZXJfMS52YWx1ZTsKICAgIH07CgogICAgY29tcHV0ZWRTZXR0ZXIgPSBmdW5jdGlvbiBjb21wdXRlZFNldHRlcih2KSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzZXQpIHsKICAgICAgICB3YXJuKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seS4nLCB2bSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc2V0KSB7CiAgICAgICAgc2V0KHYpOwogICAgICB9CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBmYWxsYmFjawogICAgdmFyIGNvbXB1dGVkSG9zdF8xID0gZGVmaW5lQ29tcG9uZW50SW5zdGFuY2UoZ2V0VnVlQ29uc3RydWN0b3IoKSwgewogICAgICBjb21wdXRlZDogewogICAgICAgICQkc3RhdGU6IHsKICAgICAgICAgIGdldDogZ2V0LAogICAgICAgICAgc2V0OiBzZXQKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgdm0gJiYgdm0uJG9uKCdob29rOmRlc3Ryb3llZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGNvbXB1dGVkSG9zdF8xLiRkZXN0cm95KCk7CiAgICB9KTsKCiAgICBjb21wdXRlZEdldHRlciA9IGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkgewogICAgICByZXR1cm4gY29tcHV0ZWRIb3N0XzEuJCRzdGF0ZTsKICAgIH07CgogICAgY29tcHV0ZWRTZXR0ZXIgPSBmdW5jdGlvbiBjb21wdXRlZFNldHRlcih2KSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFzZXQpIHsKICAgICAgICB3YXJuKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seS4nLCB2bSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb21wdXRlZEhvc3RfMS4kJHN0YXRlID0gdjsKICAgIH07CiAgfQoKICByZXR1cm4gY3JlYXRlUmVmKHsKICAgIGdldDogY29tcHV0ZWRHZXR0ZXIsCiAgICBzZXQ6IGNvbXB1dGVkU2V0dGVyCiAgfSk7Cn0KCnZhciBOT1RfRk9VTkQgPSB7fTsKCmZ1bmN0aW9uIHJlc29sdmVJbmplY3QocHJvdmlkZUtleSwgdm0pIHsKICB2YXIgc291cmNlID0gdm07CgogIHdoaWxlIChzb3VyY2UpIHsKICAgIC8vIEB0cy1pZ25vcmUKICAgIGlmIChzb3VyY2UuX3Byb3ZpZGVkICYmIGhhc093bihzb3VyY2UuX3Byb3ZpZGVkLCBwcm92aWRlS2V5KSkgewogICAgICAvL0B0cy1pZ25vcmUKICAgICAgcmV0dXJuIHNvdXJjZS5fcHJvdmlkZWRbcHJvdmlkZUtleV07CiAgICB9CgogICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7CiAgfQoKICByZXR1cm4gTk9UX0ZPVU5EOwp9CgpmdW5jdGlvbiBwcm92aWRlKGtleSwgdmFsdWUpIHsKICB2YXIgdm0gPSBjdXJyZW50Vk1JbkZuKCdwcm92aWRlJyk7CiAgaWYgKCF2bSkgcmV0dXJuOwoKICBpZiAoIXZtLl9wcm92aWRlZCkgewogICAgdmFyIHByb3ZpZGVDYWNoZV8xID0ge307CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodm0sICdfcHJvdmlkZWQnLCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBwcm92aWRlQ2FjaGVfMTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3ZpZGVDYWNoZV8xLCB2KTsKICAgICAgfQogICAgfSk7CiAgfQoKICB2bS5fcHJvdmlkZWRba2V5XSA9IHZhbHVlOwp9CgpmdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSkgewogIHZhciBfYTsKCiAgaWYgKHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9PT0gdm9pZCAwKSB7CiAgICB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgPSBmYWxzZTsKICB9CgogIGlmICgha2V5KSB7CiAgICByZXR1cm4gZGVmYXVsdFZhbHVlOwogIH0KCiAgdmFyIHZtID0gKF9hID0gZ2V0Q3VycmVudEluc3RhbmNlKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm94eTsKCiAgaWYgKCF2bSkgewogICAgd2FybigiaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuIik7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdmFsID0gcmVzb2x2ZUluamVjdChrZXksIHZtKTsKCiAgaWYgKHZhbCAhPT0gTk9UX0ZPVU5EKSB7CiAgICByZXR1cm4gdmFsOwogIH0KCiAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgIHdhcm4oIkluamVjdGlvbiBcIiIgKyBTdHJpbmcoa2V5KSArICJcIiBub3QgZm91bmQiLCB2bSk7CiAgfQoKICByZXR1cm4gdHJlYXREZWZhdWx0QXNGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSgpIDogZGVmYXVsdFZhbHVlOwp9Cgp2YXIgRU1QVFlfT0JKID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IE9iamVjdC5mcmVlemUoe30pIDoge307Cgp2YXIgdXNlQ3NzTW9kdWxlID0gZnVuY3Rpb24gdXNlQ3NzTW9kdWxlKG5hbWUpIHsKICB2YXIgX2E7CgogIGlmIChuYW1lID09PSB2b2lkIDApIHsKICAgIG5hbWUgPSAnJHN0eWxlJzsKICB9CgogIHZhciBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpOwoKICBpZiAoIWluc3RhbmNlKSB7CiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oInVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKSIpOwogICAgcmV0dXJuIEVNUFRZX09CSjsKICB9CgogIHZhciBtb2QgPSAoX2EgPSBpbnN0YW5jZS5wcm94eSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW25hbWVdOwoKICBpZiAoIW1vZCkgewogICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCJDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiIgKyBuYW1lICsgIlwiLiIpOwogICAgcmV0dXJuIEVNUFRZX09CSjsKICB9CgogIHJldHVybiBtb2Q7Cn07Ci8qKg0KICogQGRlcHJlY2F0ZWQgdXNlIGB1c2VDc3NNb2R1bGVgIGluc3RlYWQuDQogKi8KCgp2YXIgdXNlQ1NTTW9kdWxlID0gdXNlQ3NzTW9kdWxlOwoKZnVuY3Rpb24gY3JlYXRlQXBwKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcykgewogIGlmIChyb290UHJvcHMgPT09IHZvaWQgMCkgewogICAgcm9vdFByb3BzID0gdW5kZWZpbmVkOwogIH0KCiAgdmFyIFYgPSBnZXRWdWVDb25zdHJ1Y3RvcigpOwogIHZhciBtb3VudGVkVk0gPSB1bmRlZmluZWQ7CiAgcmV0dXJuIHsKICAgIGNvbmZpZzogVi5jb25maWcsCiAgICB1c2U6IFYudXNlLmJpbmQoViksCiAgICBtaXhpbjogVi5taXhpbi5iaW5kKFYpLAogICAgY29tcG9uZW50OiBWLmNvbXBvbmVudC5iaW5kKFYpLAogICAgZGlyZWN0aXZlOiBWLmRpcmVjdGl2ZS5iaW5kKFYpLAogICAgbW91bnQ6IGZ1bmN0aW9uIG1vdW50KGVsLCBoeWRyYXRpbmcpIHsKICAgICAgaWYgKCFtb3VudGVkVk0pIHsKICAgICAgICBtb3VudGVkVk0gPSBuZXcgVihfYXNzaWduKHsKICAgICAgICAgIHByb3BzRGF0YTogcm9vdFByb3BzCiAgICAgICAgfSwgcm9vdENvbXBvbmVudCkpOwogICAgICAgIG1vdW50ZWRWTS4kbW91bnQoZWwsIGh5ZHJhdGluZyk7CiAgICAgICAgcmV0dXJuIG1vdW50ZWRWTTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgd2FybigiQXBwIGhhcyBhbHJlYWR5IGJlZW4gbW91bnRlZC5cbiIgKyAiSWYgeW91IHdhbnQgdG8gcmVtb3VudCB0aGUgc2FtZSBhcHAsIG1vdmUgeW91ciBhcHAgY3JlYXRpb24gbG9naWMgIiArICJpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggIiArICJtb3VudCAtIGUuZy4gYGNvbnN0IGNyZWF0ZU15QXBwID0gKCkgPT4gY3JlYXRlQXBwKEFwcClgIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbW91bnRlZFZNOwogICAgICB9CiAgICB9LAogICAgdW5tb3VudDogZnVuY3Rpb24gdW5tb3VudCgpIHsKICAgICAgaWYgKG1vdW50ZWRWTSkgewogICAgICAgIG1vdW50ZWRWTS4kZGVzdHJveSgpOwogICAgICAgIG1vdW50ZWRWTSA9IHVuZGVmaW5lZDsKICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgd2FybigiQ2Fubm90IHVubW91bnQgYW4gYXBwIHRoYXQgaXMgbm90IG1vdW50ZWQuIik7CiAgICAgIH0KICAgIH0KICB9Owp9Cgp2YXIgbmV4dFRpY2sgPSBmdW5jdGlvbiBuZXh0VGljaygpIHsKICB2YXIgX2E7CgogIHZhciBhcmdzID0gW107CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgfQoKICByZXR1cm4gKF9hID0gZ2V0VnVlQ29uc3RydWN0b3IoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5leHRUaWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwp9OwoKdmFyIGZhbGxiYWNrQ3JlYXRlRWxlbWVudDsKCnZhciBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHsKICB2YXIgX2E7CgogIHZhciBhcmdzID0gW107CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgfQoKICB2YXIgaW5zdGFuY2UgPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwoKICBpZiAoIWluc3RhbmNlKSB7CiAgICB3YXJuKCdgY3JlYXRlRWxlbWVudCgpYCBoYXMgYmVlbiBjYWxsZWQgb3V0c2lkZSBvZiByZW5kZXIgZnVuY3Rpb24uJyk7CgogICAgaWYgKCFmYWxsYmFja0NyZWF0ZUVsZW1lbnQpIHsKICAgICAgZmFsbGJhY2tDcmVhdGVFbGVtZW50ID0gZGVmaW5lQ29tcG9uZW50SW5zdGFuY2UoZ2V0VnVlQ29uc3RydWN0b3IoKSkuJGNyZWF0ZUVsZW1lbnQ7CiAgICB9CgogICAgcmV0dXJuIGZhbGxiYWNrQ3JlYXRlRWxlbWVudC5hcHBseShmYWxsYmFja0NyZWF0ZUVsZW1lbnQsIGFyZ3MpOwogIH0KCiAgcmV0dXJuIGluc3RhbmNlLiRjcmVhdGVFbGVtZW50LmFwcGx5KGluc3RhbmNlLCBhcmdzKTsKfTsKLyoqDQogKiBEaXNwbGF5cyBhIHdhcm5pbmcgbWVzc2FnZSAodXNpbmcgY29uc29sZS5lcnJvcikgd2l0aCBhIHN0YWNrIHRyYWNlIGlmIHRoZQ0KICogZnVuY3Rpb24gaXMgY2FsbGVkIGluc2lkZSBvZiBhY3RpdmUgY29tcG9uZW50Lg0KICoNCiAqIEBwYXJhbSBtZXNzYWdlIHdhcm5pbmcgbWVzc2FnZSB0byBiZSBkaXNwbGF5ZWQNCiAqLwoKCmZ1bmN0aW9uIHdhcm4kMShtZXNzYWdlKSB7CiAgdmFyIF9hOwoKICB3YXJuKG1lc3NhZ2UsIChfYSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJveHkpOwp9CgpmdW5jdGlvbiBzZXQkMSh2bSwga2V5LCB2YWx1ZSkgewogIHZhciBzdGF0ZSA9IHZtLl9fY29tcG9zaXRpb25fYXBpX3N0YXRlX18gPSB2bS5fX2NvbXBvc2l0aW9uX2FwaV9zdGF0ZV9fIHx8IHt9OwogIHN0YXRlW2tleV0gPSB2YWx1ZTsKfQoKZnVuY3Rpb24gZ2V0KHZtLCBrZXkpIHsKICByZXR1cm4gKHZtLl9fY29tcG9zaXRpb25fYXBpX3N0YXRlX18gfHwge30pW2tleV07Cn0KCnZhciB2bVN0YXRlTWFuYWdlciA9IHsKICBzZXQ6IHNldCQxLAogIGdldDogZ2V0Cn07CgpmdW5jdGlvbiBhc1ZtUHJvcGVydHkodm0sIHByb3BOYW1lLCBwcm9wVmFsdWUpIHsKICB2YXIgcHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wczsKCiAgaWYgKCEocHJvcE5hbWUgaW4gdm0pICYmICEocHJvcHMgJiYgaGFzT3duKHByb3BzLCBwcm9wTmFtZSkpKSB7CiAgICBpZiAoaXNSZWYocHJvcFZhbHVlKSkgewogICAgICBwcm94eSh2bSwgcHJvcE5hbWUsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiBwcm9wVmFsdWUudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICAgIHByb3BWYWx1ZS52YWx1ZSA9IHZhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB2bVtwcm9wTmFtZV0gPSBwcm9wVmFsdWU7CiAgICB9CgogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgLy8gZXhwb3NlIGJpbmRpbmcgdG8gVnVlIERldnRvb2wgYXMgYSBkYXRhIHByb3BlcnR5CiAgICAgIC8vIGRlbGF5IHRoaXMgdW50aWwgc3RhdGUgaGFzIGJlZW4gcmVzb2x2ZWQgdG8gcHJldmVudCByZXBlYXRlZCB3b3JrcwogICAgICB2bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChpc1JlZihwcm9wVmFsdWUpKSB7CiAgICAgICAgICBwcm94eSh2bS5fZGF0YSwgcHJvcE5hbWUsIHsKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS52YWx1ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgICAgICAgcHJvcFZhbHVlLnZhbHVlID0gdmFsOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uX2RhdGFbcHJvcE5hbWVdID0gcHJvcFZhbHVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICBpZiAocHJvcHMgJiYgaGFzT3duKHByb3BzLCBwcm9wTmFtZSkpIHsKICAgICAgd2FybigiVGhlIHNldHVwIGJpbmRpbmcgcHJvcGVydHkgXCIiICsgcHJvcE5hbWUgKyAiXCIgaXMgYWxyZWFkeSBkZWNsYXJlZCBhcyBhIHByb3AuIiwgdm0pOwogICAgfSBlbHNlIHsKICAgICAgd2FybigiVGhlIHNldHVwIGJpbmRpbmcgcHJvcGVydHkgXCIiICsgcHJvcE5hbWUgKyAiXCIgaXMgYWxyZWFkeSBkZWNsYXJlZC4iLCB2bSk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiB1cGRhdGVUZW1wbGF0ZVJlZih2bSkgewogIHZhciByYXdCaW5kaW5ncyA9IHZtU3RhdGVNYW5hZ2VyLmdldCh2bSwgJ3Jhd0JpbmRpbmdzJykgfHwge307CiAgaWYgKCFyYXdCaW5kaW5ncyB8fCAhT2JqZWN0LmtleXMocmF3QmluZGluZ3MpLmxlbmd0aCkgcmV0dXJuOwogIHZhciByZWZzID0gdm0uJHJlZnM7CiAgdmFyIG9sZFJlZktleXMgPSB2bVN0YXRlTWFuYWdlci5nZXQodm0sICdyZWZzJykgfHwgW107CgogIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBvbGRSZWZLZXlzLmxlbmd0aDsgaW5kZXgrKykgewogICAgdmFyIGtleSA9IG9sZFJlZktleXNbaW5kZXhdOwogICAgdmFyIHNldHVwVmFsdWUgPSByYXdCaW5kaW5nc1trZXldOwoKICAgIGlmICghcmVmc1trZXldICYmIHNldHVwVmFsdWUgJiYgaXNSZWYoc2V0dXBWYWx1ZSkpIHsKICAgICAgc2V0dXBWYWx1ZS52YWx1ZSA9IG51bGw7CiAgICB9CiAgfQoKICB2YXIgbmV3S2V5cyA9IE9iamVjdC5rZXlzKHJlZnMpOwogIHZhciB2YWxpZE5ld0tleXMgPSBbXTsKCiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG5ld0tleXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICB2YXIga2V5ID0gbmV3S2V5c1tpbmRleF07CiAgICB2YXIgc2V0dXBWYWx1ZSA9IHJhd0JpbmRpbmdzW2tleV07CgogICAgaWYgKHJlZnNba2V5XSAmJiBzZXR1cFZhbHVlICYmIGlzUmVmKHNldHVwVmFsdWUpKSB7CiAgICAgIHNldHVwVmFsdWUudmFsdWUgPSByZWZzW2tleV07CiAgICAgIHZhbGlkTmV3S2V5cy5wdXNoKGtleSk7CiAgICB9CiAgfQoKICB2bVN0YXRlTWFuYWdlci5zZXQodm0sICdyZWZzJywgdmFsaWROZXdLZXlzKTsKfQoKZnVuY3Rpb24gcmVzb2x2ZVNjb3BlZFNsb3RzKHZtLCBzbG90c1Byb3h5KSB7CiAgdmFyIHBhcmVudFZOb2RlID0gdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlOwogIGlmICghcGFyZW50Vk5vZGUpIHJldHVybjsKICB2YXIgcHJldlNsb3RzID0gdm1TdGF0ZU1hbmFnZXIuZ2V0KHZtLCAnc2xvdHMnKSB8fCBbXTsKICB2YXIgY3VyU2xvdHMgPSByZXNvbHZlU2xvdHMocGFyZW50Vk5vZGUuZGF0YS5zY29wZWRTbG90cywgdm0uJHNsb3RzKTsgLy8gcmVtb3ZlIHN0YWxlZCBzbG90cwoKICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcHJldlNsb3RzLmxlbmd0aDsgaW5kZXgrKykgewogICAgdmFyIGtleSA9IHByZXZTbG90c1tpbmRleF07CgogICAgaWYgKCFjdXJTbG90c1trZXldKSB7CiAgICAgIGRlbGV0ZSBzbG90c1Byb3h5W2tleV07CiAgICB9CiAgfSAvLyBwcm94eSBmcmVzaCBzbG90cwoKCiAgdmFyIHNsb3ROYW1lcyA9IE9iamVjdC5rZXlzKGN1clNsb3RzKTsKCiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHNsb3ROYW1lcy5sZW5ndGg7IGluZGV4KyspIHsKICAgIHZhciBrZXkgPSBzbG90TmFtZXNbaW5kZXhdOwoKICAgIGlmICghc2xvdHNQcm94eVtrZXldKSB7CiAgICAgIHNsb3RzUHJveHlba2V5XSA9IGNyZWF0ZVNsb3RQcm94eSh2bSwga2V5KTsKICAgIH0KICB9CgogIHZtU3RhdGVNYW5hZ2VyLnNldCh2bSwgJ3Nsb3RzJywgc2xvdE5hbWVzKTsKfQoKZnVuY3Rpb24gYWN0aXZhdGVDdXJyZW50SW5zdGFuY2Uodm0sIGZuLCBvbkVycm9yKSB7CiAgdmFyIHByZVZtID0gZ2V0Q3VycmVudFZ1ZTJJbnN0YW5jZSgpOwogIHNldEN1cnJlbnRJbnN0YW5jZSh2bSk7CgogIHRyeSB7CiAgICByZXR1cm4gZm4odm0pOwogIH0gY2F0Y2ggKGVycikgewogICAgaWYgKG9uRXJyb3IpIHsKICAgICAgb25FcnJvcihlcnIpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgZXJyOwogICAgfQogIH0gZmluYWxseSB7CiAgICBzZXRDdXJyZW50SW5zdGFuY2UocHJlVm0pOwogIH0KfQoKZnVuY3Rpb24gbWl4aW4oVnVlKSB7CiAgVnVlLm1peGluKHsKICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb25BcGlJbml0LAogICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgdXBkYXRlVGVtcGxhdGVSZWYodGhpcyk7CiAgICB9LAogICAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCgpIHsKICAgICAgdXBkYXRlVGVtcGxhdGVSZWYodGhpcyk7CiAgICB9CiAgfSk7CiAgLyoqDQogICAqIFZ1ZXggaW5pdCBob29rLCBpbmplY3RlZCBpbnRvIGVhY2ggaW5zdGFuY2VzIGluaXQgaG9va3MgbGlzdC4NCiAgICovCgogIGZ1bmN0aW9uIGZ1bmN0aW9uQXBpSW5pdCgpIHsKICAgIHZhciB2bSA9IHRoaXM7CiAgICB2YXIgJG9wdGlvbnMgPSB2bS4kb3B0aW9uczsKICAgIHZhciBzZXR1cCA9ICRvcHRpb25zLnNldHVwLAogICAgICAgIHJlbmRlciA9ICRvcHRpb25zLnJlbmRlcjsKCiAgICBpZiAocmVuZGVyKSB7CiAgICAgIC8vIGtlZXAgY3VycmVudEluc3RhbmNlIGFjY2Vzc2libGUgZm9yIGNyZWF0ZUVsZW1lbnQKICAgICAgJG9wdGlvbnMucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHZhciBhcmdzID0gW107CgogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYWN0aXZhdGVDdXJyZW50SW5zdGFuY2Uodm0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByZW5kZXIuYXBwbHkoX3RoaXMsIGFyZ3MpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQoKICAgIGlmICghc2V0dXApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICdmdW5jdGlvbicpIHsKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB3YXJuKCdUaGUgInNldHVwIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgb2JqZWN0IGluIGNvbXBvbmVudCBkZWZpbml0aW9ucy4nLCB2bSk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZGF0YSA9ICRvcHRpb25zLmRhdGE7IC8vIHdyYXBwZXIgdGhlIGRhdGEgb3B0aW9uLCBzbyB3ZSBjYW4gaW52b2tlIHNldHVwIGJlZm9yZSBkYXRhIGdldCByZXNvbHZlZAoKICAgICRvcHRpb25zLmRhdGEgPSBmdW5jdGlvbiB3cmFwcGVkRGF0YSgpIHsKICAgICAgaW5pdFNldHVwKHZtLCB2bS4kcHJvcHMpOwogICAgICByZXR1cm4gdHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicgPyBkYXRhLmNhbGwodm0sIHZtKSA6IGRhdGEgfHwge307CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaW5pdFNldHVwKHZtLCBwcm9wcykgewogICAgaWYgKHByb3BzID09PSB2b2lkIDApIHsKICAgICAgcHJvcHMgPSB7fTsKICAgIH0KCiAgICB2YXIgc2V0dXAgPSB2bS4kb3B0aW9ucy5zZXR1cDsKICAgIHZhciBjdHggPSBjcmVhdGVTZXR1cENvbnRleHQodm0pOyAvLyBmYWtlIHJlYWN0aXZlIGZvciBgdG9SZWZzKHByb3BzKWAKCiAgICBkZWYocHJvcHMsICdfX29iX18nLCBjcmVhdGVPYnNlcnZlcigpKTsgLy8gcmVzb2x2ZSBzY29wZWRTbG90cyBhbmQgc2xvdHMgdG8gZnVuY3Rpb25zCiAgICAvLyBAdHMtZXhwZWN0LWVycm9yCgogICAgcmVzb2x2ZVNjb3BlZFNsb3RzKHZtLCBjdHguc2xvdHMpOwogICAgdmFyIGJpbmRpbmc7CiAgICBhY3RpdmF0ZUN1cnJlbnRJbnN0YW5jZSh2bSwgZnVuY3Rpb24gKCkgewogICAgICAvLyBtYWtlIHByb3BzIHRvIGJlIGZha2UgcmVhY3RpdmUsIHRoaXMgaXMgZm9yIGB0b1JlZnMocHJvcHMpYAogICAgICBiaW5kaW5nID0gc2V0dXAocHJvcHMsIGN0eCk7CiAgICB9KTsKICAgIGlmICghYmluZGluZykgcmV0dXJuOwoKICAgIGlmIChpc0Z1bmN0aW9uKGJpbmRpbmcpKSB7CiAgICAgIC8vIGtlZXAgdHlwZXNjcmlwdCBoYXBweSB3aXRoIHRoZSBiaW5kaW5nIHR5cGUuCiAgICAgIHZhciBiaW5kaW5nRnVuY18xID0gYmluZGluZzsgLy8ga2VlcCBjdXJyZW50SW5zdGFuY2UgYWNjZXNzaWJsZSBmb3IgY3JlYXRlRWxlbWVudAoKICAgICAgdm0uJG9wdGlvbnMucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICByZXNvbHZlU2NvcGVkU2xvdHModm0sIGN0eC5zbG90cyk7CiAgICAgICAgcmV0dXJuIGFjdGl2YXRlQ3VycmVudEluc3RhbmNlKHZtLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gYmluZGluZ0Z1bmNfMSgpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgcmV0dXJuOwogICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGJpbmRpbmcpKSB7CiAgICAgIGlmIChpc1JlYWN0aXZlKGJpbmRpbmcpKSB7CiAgICAgICAgYmluZGluZyA9IHRvUmVmcyhiaW5kaW5nKTsKICAgICAgfQoKICAgICAgdm1TdGF0ZU1hbmFnZXIuc2V0KHZtLCAncmF3QmluZGluZ3MnLCBiaW5kaW5nKTsKICAgICAgdmFyIGJpbmRpbmdPYmpfMSA9IGJpbmRpbmc7CiAgICAgIE9iamVjdC5rZXlzKGJpbmRpbmdPYmpfMSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciBiaW5kaW5nVmFsdWUgPSBiaW5kaW5nT2JqXzFbbmFtZV07CgogICAgICAgIGlmICghaXNSZWYoYmluZGluZ1ZhbHVlKSkgewogICAgICAgICAgaWYgKCFpc1JlYWN0aXZlKGJpbmRpbmdWYWx1ZSkpIHsKICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYmluZGluZ1ZhbHVlKSkgewogICAgICAgICAgICAgIGJpbmRpbmdWYWx1ZSA9IGJpbmRpbmdWYWx1ZS5iaW5kKHZtKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghaXNPYmplY3QoYmluZGluZ1ZhbHVlKSkgewogICAgICAgICAgICAgIGJpbmRpbmdWYWx1ZSA9IHJlZihiaW5kaW5nVmFsdWUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGhhc1JlYWN0aXZlQXJyYXlDaGlsZChiaW5kaW5nVmFsdWUpKSB7CiAgICAgICAgICAgICAgLy8gY3JlYXRlcyBhIGN1c3RvbSByZWFjdGl2ZSBwcm9wZXJ0aWVzIHdpdGhvdXQgbWFrZSB0aGUgb2JqZWN0IGV4cGxpY2l0bHkgcmVhY3RpdmUKICAgICAgICAgICAgICAvLyBOT1RFIHdlIHNob3VsZCB0cnkgdG8gYXZvaWQgdGhpcywgYmV0dGVyIGltcGxlbWVudGF0aW9uIG5lZWRlZAogICAgICAgICAgICAgIGN1c3RvbVJlYWN0aXZlKGJpbmRpbmdWYWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShiaW5kaW5nVmFsdWUpKSB7CiAgICAgICAgICAgIGJpbmRpbmdWYWx1ZSA9IHJlZihiaW5kaW5nVmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXNWbVByb3BlcnR5KHZtLCBuYW1lLCBiaW5kaW5nVmFsdWUpOwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgIGFzc2VydChmYWxzZSwgIlwic2V0dXBcIiBtdXN0IHJldHVybiBhIFwiT2JqZWN0XCIgb3IgYSBcIkZ1bmN0aW9uXCIsIGdvdCBcIiIgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYmluZGluZykuc2xpY2UoOCwgLTEpICsgIlwiIik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjdXN0b21SZWFjdGl2ZSh0YXJnZXQpIHsKICAgIGlmICghaXNQbGFpbk9iamVjdCh0YXJnZXQpIHx8IGlzUmVmKHRhcmdldCkgfHwgaXNSZWFjdGl2ZSh0YXJnZXQpIHx8IGlzUmF3KHRhcmdldCkpIHJldHVybjsKICAgIHZhciBWdWUgPSBnZXRWdWVDb25zdHJ1Y3RvcigpOwogICAgdmFyIGRlZmluZVJlYWN0aXZlID0gVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmU7CiAgICBPYmplY3Qua2V5cyh0YXJnZXQpLmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgdmFyIHZhbCA9IHRhcmdldFtrXTsKICAgICAgZGVmaW5lUmVhY3RpdmUodGFyZ2V0LCBrLCB2YWwpOwoKICAgICAgaWYgKHZhbCkgewogICAgICAgIGN1c3RvbVJlYWN0aXZlKHZhbCk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gaGFzUmVhY3RpdmVBcnJheUNoaWxkKHRhcmdldCwgdmlzaXRlZCkgewogICAgaWYgKHZpc2l0ZWQgPT09IHZvaWQgMCkgewogICAgICB2aXNpdGVkID0gbmV3IE1hcCgpOwogICAgfQoKICAgIGlmICh2aXNpdGVkLmhhcyh0YXJnZXQpKSB7CiAgICAgIHJldHVybiB2aXNpdGVkLmdldCh0YXJnZXQpOwogICAgfQoKICAgIHZpc2l0ZWQuc2V0KHRhcmdldCwgZmFsc2UpOwoKICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNSZWFjdGl2ZSh0YXJnZXQpKSB7CiAgICAgIHZpc2l0ZWQuc2V0KHRhcmdldCwgdHJ1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmICghaXNQbGFpbk9iamVjdCh0YXJnZXQpIHx8IGlzUmF3KHRhcmdldCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBPYmplY3Qua2V5cyh0YXJnZXQpLnNvbWUoZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIGhhc1JlYWN0aXZlQXJyYXlDaGlsZCh0YXJnZXRbeF0sIHZpc2l0ZWQpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVTZXR1cENvbnRleHQodm0pIHsKICAgIHZhciBjdHggPSB7CiAgICAgIHNsb3RzOiB7fQogICAgfTsKICAgIHZhciBwcm9wc1BsYWluID0gWydyb290JywgJ3BhcmVudCcsICdyZWZzJywgJ2xpc3RlbmVycycsICdpc1NlcnZlcicsICdzc3JDb250ZXh0J107CiAgICB2YXIgcHJvcHNSZWFjdGl2ZVByb3h5ID0gWydhdHRycyddOwogICAgdmFyIG1ldGhvZFJldHVyblZvaWQgPSBbJ2VtaXQnXTsKICAgIHByb3BzUGxhaW4uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBzcmNLZXkgPSAiJCIgKyBrZXk7CiAgICAgIHByb3h5KGN0eCwga2V5LCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdm1bc3JjS2V5XTsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkgewogICAgICAgICAgd2FybigiQ2Fubm90IGFzc2lnbiB0byAnIiArIGtleSArICInIGJlY2F1c2UgaXQgaXMgYSByZWFkLW9ubHkgcHJvcGVydHkiLCB2bSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgcHJvcHNSZWFjdGl2ZVByb3h5LmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICB2YXIgc3JjS2V5ID0gIiQiICsga2V5OwogICAgICBwcm94eShjdHgsIGtleSwgewogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgdmFyIGVfMSwgX2E7CgogICAgICAgICAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7fSk7CiAgICAgICAgICB2YXIgc291cmNlID0gdm1bc3JjS2V5XTsKCiAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIF9sb29wXzEoYXR0cikgewogICAgICAgICAgICBwcm94eShkYXRhLCBhdHRyLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAvLyB0byBlbnN1cmUgaXQgYWx3YXlzIHJldHVybiB0aGUgbGF0ZXN0IHZhbHVlCiAgICAgICAgICAgICAgICByZXR1cm4gdm1bc3JjS2V5XVthdHRyXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKHNvdXJjZSkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CiAgICAgICAgICAgICAgdmFyIGF0dHIgPSBfYy52YWx1ZTsKCiAgICAgICAgICAgICAgX2xvb3BfMShhdHRyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZV8xXzEpIHsKICAgICAgICAgICAgZV8xID0gewogICAgICAgICAgICAgIGVycm9yOiBlXzFfMQogICAgICAgICAgICB9OwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2JbInJldHVybiJdKSkgX2EuY2FsbChfYik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHsKICAgICAgICAgIHdhcm4oIkNhbm5vdCBhc3NpZ24gdG8gJyIgKyBrZXkgKyAiJyBiZWNhdXNlIGl0IGlzIGEgcmVhZC1vbmx5IHByb3BlcnR5Iiwgdm0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIG1ldGhvZFJldHVyblZvaWQuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBzcmNLZXkgPSAiJCIgKyBrZXk7CiAgICAgIHByb3h5KGN0eCwga2V5LCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXJncyA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBmbiA9IHZtW3NyY0tleV07CiAgICAgICAgICAgIGZuLmFwcGx5KHZtLCBhcmdzKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7CiAgICAgIGN0eC5fdm0gPSB2bTsKICAgIH0KCiAgICByZXR1cm4gY3R4OwogIH0KfQovKioNCiAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLg0KICovCgoKZnVuY3Rpb24gbWVyZ2VEYXRhKGZyb20sIHRvKSB7CiAgaWYgKCFmcm9tKSByZXR1cm4gdG87CiAgaWYgKCF0bykgcmV0dXJuIGZyb207CiAgdmFyIGtleTsKICB2YXIgdG9WYWw7CiAgdmFyIGZyb21WYWw7CiAgdmFyIGtleXMgPSBoYXNTeW1ib2wgPyBSZWZsZWN0Lm93bktleXMoZnJvbSkgOiBPYmplY3Qua2V5cyhmcm9tKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBrZXlzW2ldOyAvLyBpbiBjYXNlIHRoZSBvYmplY3QgaXMgYWxyZWFkeSBvYnNlcnZlZC4uLgoKICAgIGlmIChrZXkgPT09ICdfX29iX18nKSBjb250aW51ZTsKICAgIHRvVmFsID0gdG9ba2V5XTsKICAgIGZyb21WYWwgPSBmcm9tW2tleV07CgogICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHsKICAgICAgdG9ba2V5XSA9IGZyb21WYWw7CiAgICB9IGVsc2UgaWYgKHRvVmFsICE9PSBmcm9tVmFsICYmIGlzUGxhaW5PYmplY3QodG9WYWwpICYmICFpc1JlZih0b1ZhbCkgJiYgaXNQbGFpbk9iamVjdChmcm9tVmFsKSAmJiAhaXNSZWYoZnJvbVZhbCkpIHsKICAgICAgbWVyZ2VEYXRhKGZyb21WYWwsIHRvVmFsKTsKICAgIH0KICB9CgogIHJldHVybiB0bzsKfQoKZnVuY3Rpb24gX2luc3RhbGwoVnVlKSB7CiAgaWYgKGlzVnVlUmVnaXN0ZXJlZChWdWUpKSB7CiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICB3YXJuKCdbdnVlLWNvbXBvc2l0aW9uLWFwaV0gYWxyZWFkeSBpbnN0YWxsZWQuIFZ1ZS51c2UoVnVlQ29tcG9zaXRpb25BUEkpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicpOwogICAgfQoKICAgIHJldHVybjsKICB9CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICBpZiAoVnVlLnZlcnNpb24pIHsKICAgICAgaWYgKFZ1ZS52ZXJzaW9uWzBdICE9PSAnMicgfHwgVnVlLnZlcnNpb25bMV0gIT09ICcuJykgewogICAgICAgIHdhcm4oIlt2dWUtY29tcG9zaXRpb24tYXBpXSBvbmx5IHdvcmtzIHdpdGggVnVlIDIsIHYiICsgVnVlLnZlcnNpb24gKyAiIGZvdW5kLiIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB3YXJuKCdbdnVlLWNvbXBvc2l0aW9uLWFwaV0gbm8gVnVlIHZlcnNpb24gZm91bmQnKTsKICAgIH0KICB9CgogIFZ1ZS5jb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzLnNldHVwID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHsKICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRTZXR1cEZuKHByb3BzLCBjb250ZXh0KSB7CiAgICAgIHJldHVybiBtZXJnZURhdGEodHlwZW9mIHBhcmVudCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudChwcm9wcywgY29udGV4dCkgfHwge30gOiB1bmRlZmluZWQsIHR5cGVvZiBjaGlsZCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkKHByb3BzLCBjb250ZXh0KSB8fCB7fSA6IHVuZGVmaW5lZCk7CiAgICB9OwogIH07CgogIHNldFZ1ZUNvbnN0cnVjdG9yKFZ1ZSk7CiAgbWl4aW4oVnVlKTsKfQoKdmFyIFBsdWdpbiA9IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgcmV0dXJuIF9pbnN0YWxsKFZ1ZSk7CiAgfQp9OyAvLyBpbXBsZW1lbnRhdGlvbiwgY2xvc2UgdG8gbm8tb3AKCmZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChvcHRpb25zKSB7CiAgcmV0dXJuIG9wdGlvbnM7Cn0KCmZ1bmN0aW9uIGRlZmluZUFzeW5jQ29tcG9uZW50KHNvdXJjZSkgewogIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHsKICAgIHNvdXJjZSA9IHsKICAgICAgbG9hZGVyOiBzb3VyY2UKICAgIH07CiAgfQoKICB2YXIgbG9hZGVyID0gc291cmNlLmxvYWRlciwKICAgICAgbG9hZGluZ0NvbXBvbmVudCA9IHNvdXJjZS5sb2FkaW5nQ29tcG9uZW50LAogICAgICBlcnJvckNvbXBvbmVudCA9IHNvdXJjZS5lcnJvckNvbXBvbmVudCwKICAgICAgX2EgPSBzb3VyY2UuZGVsYXksCiAgICAgIGRlbGF5ID0gX2EgPT09IHZvaWQgMCA/IDIwMCA6IF9hLAogICAgICB0aW1lb3V0ID0gc291cmNlLnRpbWVvdXQsCiAgICAgIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dAogIF9iID0gc291cmNlLnN1c3BlbnNpYmxlLAogICAgICAvLyB1bmRlZmluZWQgPSBuZXZlciB0aW1lcyBvdXQKICBzdXNwZW5zaWJsZSA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iLAogICAgICAvLyBpbiBWdWUgMyBkZWZhdWx0IGlzIHRydWUKICB1c2VyT25FcnJvciA9IHNvdXJjZS5vbkVycm9yOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBzdXNwZW5zaWJsZSkgewogICAgd2FybigiVGhlIHN1c3BlbnNpYmxiZSBvcHRpb24gZm9yIGFzeW5jIGNvbXBvbmVudHMgaXMgbm90IHN1cHBvcnRlZCBpbiBWdWUyLiBJdCBpcyBpZ25vcmVkLiIpOwogIH0KCiAgdmFyIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDsKICB2YXIgcmV0cmllcyA9IDA7CgogIHZhciByZXRyeSA9IGZ1bmN0aW9uIHJldHJ5KCkgewogICAgcmV0cmllcysrOwogICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsOwogICAgcmV0dXJuIGxvYWQoKTsKICB9OwoKICB2YXIgbG9hZCA9IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICB2YXIgdGhpc1JlcXVlc3Q7CiAgICByZXR1cm4gcGVuZGluZ1JlcXVlc3QgfHwgKHRoaXNSZXF1ZXN0ID0gcGVuZGluZ1JlcXVlc3QgPSBsb2FkZXIoKVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGVyciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKTsKCiAgICAgIGlmICh1c2VyT25FcnJvcikgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICB2YXIgdXNlclJldHJ5ID0gZnVuY3Rpb24gdXNlclJldHJ5KCkgewogICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXRyeSgpKTsKICAgICAgICAgIH07CgogICAgICAgICAgdmFyIHVzZXJGYWlsID0gZnVuY3Rpb24gdXNlckZhaWwoKSB7CiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTsKICAgICAgICAgIH07CgogICAgICAgICAgdXNlck9uRXJyb3IoZXJyLCB1c2VyUmV0cnksIHVzZXJGYWlsLCByZXRyaWVzICsgMSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21wKSB7CiAgICAgIGlmICh0aGlzUmVxdWVzdCAhPT0gcGVuZGluZ1JlcXVlc3QgJiYgcGVuZGluZ1JlcXVlc3QpIHsKICAgICAgICByZXR1cm4gcGVuZGluZ1JlcXVlc3Q7CiAgICAgIH0KCiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFjb21wKSB7CiAgICAgICAgd2FybigiQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuICIgKyAiSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuIik7CiAgICAgIH0gLy8gaW50ZXJvcCBtb2R1bGUgZGVmYXVsdAoKCiAgICAgIGlmIChjb21wICYmIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJykpIHsKICAgICAgICBjb21wID0gY29tcFsiZGVmYXVsdCJdOwogICAgICB9CgogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb21wICYmICFpc09iamVjdChjb21wKSAmJiAhaXNGdW5jdGlvbihjb21wKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBhc3luYyBjb21wb25lbnQgbG9hZCByZXN1bHQ6ICIgKyBjb21wKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbXA7CiAgICB9KSk7CiAgfTsKCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBjb21wb25lbnQgPSBsb2FkKCk7CiAgICByZXR1cm4gewogICAgICBjb21wb25lbnQ6IGNvbXBvbmVudCwKICAgICAgZGVsYXk6IGRlbGF5LAogICAgICB0aW1lb3V0OiB0aW1lb3V0LAogICAgICBlcnJvcjogZXJyb3JDb21wb25lbnQsCiAgICAgIGxvYWRpbmc6IGxvYWRpbmdDb21wb25lbnQKICAgIH07CiAgfTsKfQoKdmFyIHZlcnNpb24gPSAiMS4wLjAtcmMuMiI7IC8vIGF1dG8gaW5zdGFsbCB3aGVuIHVzaW5nIENETgoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHsKICB3aW5kb3cuVnVlLnVzZShQbHVnaW4pOwp9CgpleHBvcnQgZGVmYXVsdCBQbHVnaW47CmV4cG9ydCB7IGNvbXB1dGVkLCBjcmVhdGVBcHAsIGN1c3RvbVJlZiwgZGVmaW5lQXN5bmNDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgZGVsLCBnZXRDdXJyZW50SW5zdGFuY2UsIGNyZWF0ZUVsZW1lbnQgYXMgaCwgaW5qZWN0LCBpc1JhdywgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIG1hcmtSYXcsIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25CZWZvcmVNb3VudCwgb25CZWZvcmVVbm1vdW50LCBvbkJlZm9yZVVwZGF0ZSwgb25EZWFjdGl2YXRlZCwgb25FcnJvckNhcHR1cmVkLCBvbk1vdW50ZWQsIG9uU2VydmVyUHJlZmV0Y2gsIG9uVW5tb3VudGVkLCBvblVwZGF0ZWQsIHByb3ZpZGUsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHNldCwgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0cmlnZ2VyUmVmLCB1bnJlZiwgdXNlQ1NTTW9kdWxlLCB1c2VDc3NNb2R1bGUsIHZlcnNpb24sIHdhcm4kMSBhcyB3YXJuLCB3YXRjaCwgd2F0Y2hFZmZlY3QgfTs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/qd/blog/vuepress-blog-demo/xcui-blog/node_modules/@vue/composition-api/dist/vue-composition-api.esm.js"],"names":["Vue","toString","x","Object","prototype","call","isNative","Ctor","test","hasSymbol","Symbol","Reflect","ownKeys","noopFn","_","sharedPropertyDefinition","enumerable","configurable","get","set","proxy","target","key","_a","defineProperty","def","obj","val","value","writable","hasOwn","hasOwnProperty","assert","condition","msg","Error","isPrimitive","isArray","Array","isValidArrayIndex","n","parseFloat","String","Math","floor","isFinite","isObject","isPlainObject","isFunction","isUndef","v","undefined","warn","vm","util","logError","err","info","process","env","NODE_ENV","window","console","error","vueDependency","requiredVue","require","isVue","vueConstructor","currentInstance","PluginInstalledFlag","name","isVueRegistered","getVueConstructor","getRegisteredVueOrDefault","constructor","setVueConstructor","__proto__","setCurrentInstance","getCurrentVue2Instance","getCurrentInstance","toVue3ComponentInstance","instanceMapCache","WeakMap","vue2Instance","has","instance","update","$forceUpdate","uid","_uid","emit","$emit","bind","parent","root","instanceProps","forEach","prop","_isMounted","_isDestroyed","_inactive","_events","$parent","$root","currentVMInFn","hook","defineComponentInstance","options","silent","config","isComponentInstance","createSlotProxy","slotName","args","_i","arguments","length","$scopedSlots","apply","resolveSlots","slots","normalSlots","res","_normalized","vueInternalClasses","getVueInternalClasses","computed","Watcher","_computedWatchers","Dep","_data","__ob__","dep","$destroy","__assign","assign","t","s","i","p","__values","o","iterator","m","next","done","TypeError","__read","r","ar","e","push","__spread","concat","createSymbol","WatcherPreFlushQueueKey","WatcherPostFlushQueueKey","RefKey","accessModifiedSet","rawSet","readonlySet","RefImpl","createRef","readonly","sealed","seal","ref","raw","isRef","reactive","unref","toRefs","isReactive","ret","toRef","customRef","factory","version","object","shallowRef","shallowReactive","triggerRef","proxyRefs","objectWithRefs","e_1","_b","_loop_1","_c","keys","_d","e_1_1","isRaw","Boolean","__raw__","setupAccessControl","defineAccessControl","getter","setter","property","getOwnPropertyDescriptor","getterHandler","setterHandler","newVal","observe","observed","observable","data","$$state","mockObserver","createObserver","notify","depend","addSub","removeSub","isExtensible","ob","markRaw","toRaw","isReadonly","shallowReadonly","readonlyObj","source","defineReactive","max","splice","_isVue","vmCount","del","genName","toUpperCase","slice","createLifeCycle","lifeCyclehook","callback","injectHookOption","$options","mergeFn","optionMergeStrategies","wrapHookCall","fn","preVm","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onUnmounted","onErrorCaptured","onActivated","onDeactivated","onServerPrefetch","fallbackVM","flushPreQueue","flushQueue","flushPostQueue","hasWatchEnv","installWatchEnv","$on","getWatcherOption","immediate","deep","flush","getWatchEffectOption","getWatcherVM","queue","index","queueFlushJob","mode","fallbackFlush","$nextTick","createVueWatcher","_watchers","$watch","immediateInvokeCallback","lazy","noRun","sync","before","patchWatcherTeardown","watcher","runCleanup","_teardown","teardown","createWatcher","cb","flushMode","isSync","cleanup","registerCleanup","createScheduler","running_1","getter_1","watcher_1","originGet","map","JSON","stringify","applyCb","originalCallback_1","shiftCallback_1","stop","run","watchEffect","effect","opts","watch","computedSetter","computedGetter","$isServer","Watcher_1","Dep_1","dirty","evaluate","computedHost_1","NOT_FOUND","resolveInject","provideKey","_provided","provide","provideCache_1","inject","defaultValue","treatDefaultAsFactory","EMPTY_OBJ","freeze","useCssModule","mod","useCSSModule","createApp","rootComponent","rootProps","V","mountedVM","use","mixin","component","directive","mount","el","hydrating","propsData","$mount","unmount","nextTick","fallbackCreateElement","createElement","$createElement","warn$1","message","set$1","state","__composition_api_state__","vmStateManager","asVmProperty","propName","propValue","props","updateTemplateRef","rawBindings","refs","$refs","oldRefKeys","setupValue","newKeys","validNewKeys","resolveScopedSlots","slotsProxy","parentVNode","_parentVnode","prevSlots","curSlots","scopedSlots","$slots","slotNames","activateCurrentInstance","onError","beforeCreate","functionApiInit","mounted","updated","setup","render","_this","wrappedData","initSetup","$props","ctx","createSetupContext","binding","bindingFunc_1","bindingObj_1","bindingValue","hasReactiveArrayChild","customReactive","k","visited","Map","some","propsPlain","propsReactiveProxy","methodReturnVoid","srcKey","attr","_vm","mergeData","from","to","toVal","fromVal","install","child","mergedSetupFn","context","Plugin","defineComponent","defineAsyncComponent","loader","loadingComponent","errorComponent","delay","timeout","suspensible","userOnError","pendingRequest","retries","retry","load","thisRequest","Promise","resolve","reject","userRetry","userFail","then","comp","__esModule","toStringTag","loading","h"],"mappings":"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","sourcesContent":["import Vue from 'vue';\n\nvar toString = function (x) { return Object.prototype.toString.call(x); };\r\nfunction isNative(Ctor) {\r\n    return typeof Ctor === 'function' && /native code/.test(Ctor.toString());\r\n}\r\nvar hasSymbol = typeof Symbol !== 'undefined' &&\r\n    isNative(Symbol) &&\r\n    typeof Reflect !== 'undefined' &&\r\n    isNative(Reflect.ownKeys);\r\nvar noopFn = function (_) { return _; };\r\nvar sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: noopFn,\r\n    set: noopFn,\r\n};\r\nfunction proxy(target, key, _a) {\r\n    var get = _a.get, set = _a.set;\r\n    sharedPropertyDefinition.get = get || noopFn;\r\n    sharedPropertyDefinition.set = set || noopFn;\r\n    Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\r\nfunction def(obj, key, val, enumerable) {\r\n    Object.defineProperty(obj, key, {\r\n        value: val,\r\n        enumerable: !!enumerable,\r\n        writable: true,\r\n        configurable: true,\r\n    });\r\n}\r\nfunction hasOwn(obj, key) {\r\n    return Object.hasOwnProperty.call(obj, key);\r\n}\r\nfunction assert(condition, msg) {\r\n    if (!condition) {\r\n        throw new Error(\"[vue-composition-api] \" + msg);\r\n    }\r\n}\r\nfunction isPrimitive(value) {\r\n    return (typeof value === 'string' ||\r\n        typeof value === 'number' ||\r\n        // $flow-disable-line\r\n        typeof value === 'symbol' ||\r\n        typeof value === 'boolean');\r\n}\r\nfunction isArray(x) {\r\n    return Array.isArray(x);\r\n}\r\nfunction isValidArrayIndex(val) {\r\n    var n = parseFloat(String(val));\r\n    return n >= 0 && Math.floor(n) === n && isFinite(val);\r\n}\r\nfunction isObject(val) {\r\n    return val !== null && typeof val === 'object';\r\n}\r\nfunction isPlainObject(x) {\r\n    return toString(x) === '[object Object]';\r\n}\r\nfunction isFunction(x) {\r\n    return typeof x === 'function';\r\n}\r\nfunction isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\nfunction warn(msg, vm) {\r\n    Vue.util.warn(msg, vm);\r\n}\r\nfunction logError(err, vm, info) {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(\"Error in \" + info + \": \\\"\" + err.toString() + \"\\\"\", vm);\r\n    }\r\n    if (typeof window !== 'undefined' && typeof console !== 'undefined') {\r\n        console.error(err);\r\n    }\r\n    else {\r\n        throw err;\r\n    }\r\n}\n\nvar vueDependency = undefined;\r\ntry {\r\n    var requiredVue = require('vue');\r\n    if (requiredVue && isVue(requiredVue)) {\r\n        vueDependency = requiredVue;\r\n    }\r\n    else if (requiredVue &&\r\n        'default' in requiredVue &&\r\n        isVue(requiredVue.default)) {\r\n        vueDependency = requiredVue.default;\r\n    }\r\n}\r\ncatch (_a) {\r\n    // not available\r\n}\r\nvar vueConstructor = null;\r\nvar currentInstance = null;\r\nvar PluginInstalledFlag = '__composition_api_installed__';\r\nfunction isVue(obj) {\r\n    return obj && typeof obj === 'function' && obj.name === 'Vue';\r\n}\r\nfunction isVueRegistered(Vue) {\r\n    return hasOwn(Vue, PluginInstalledFlag);\r\n}\r\nfunction getVueConstructor() {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        assert(vueConstructor, \"must call Vue.use(VueCompositionAPI) before using any function.\");\r\n    }\r\n    return vueConstructor;\r\n}\r\n// returns registered vue or `vue` dependency\r\nfunction getRegisteredVueOrDefault() {\r\n    var constructor = vueConstructor || vueDependency;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        assert(constructor, \"No vue dependency found.\");\r\n    }\r\n    return constructor;\r\n}\r\nfunction setVueConstructor(Vue) {\r\n    // @ts-ignore\r\n    if ((process.env.NODE_ENV !== 'production') && vueConstructor && Vue.__proto__ !== vueConstructor.__proto__) {\r\n        warn('[vue-composition-api] another instance of Vue installed');\r\n    }\r\n    vueConstructor = Vue;\r\n    Object.defineProperty(Vue, PluginInstalledFlag, {\r\n        configurable: true,\r\n        writable: true,\r\n        value: true,\r\n    });\r\n}\r\nfunction setCurrentInstance(vm) {\r\n    // currentInstance?.$scopedSlots\r\n    currentInstance = vm;\r\n}\r\nfunction getCurrentVue2Instance() {\r\n    return currentInstance;\r\n}\r\nfunction getCurrentInstance() {\r\n    if (currentInstance) {\r\n        return toVue3ComponentInstance(currentInstance);\r\n    }\r\n    return null;\r\n}\r\nvar instanceMapCache = new WeakMap();\r\nfunction toVue3ComponentInstance(vue2Instance) {\r\n    if (instanceMapCache.has(vue2Instance)) {\r\n        return instanceMapCache.get(vue2Instance);\r\n    }\r\n    var instance = {\r\n        proxy: vue2Instance,\r\n        update: vue2Instance.$forceUpdate,\r\n        uid: vue2Instance._uid,\r\n        // $emit is defined on prototype and it expected to be bound\r\n        emit: vue2Instance.$emit.bind(vue2Instance),\r\n        parent: null,\r\n        root: null,\r\n    };\r\n    // map vm.$props =\r\n    var instanceProps = [\r\n        'data',\r\n        'props',\r\n        'attrs',\r\n        'refs',\r\n        'vnode',\r\n        'slots',\r\n    ];\r\n    instanceProps.forEach(function (prop) {\r\n        proxy(instance, prop, {\r\n            get: function () {\r\n                return vue2Instance[\"$\" + prop];\r\n            },\r\n        });\r\n    });\r\n    proxy(instance, 'isMounted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._isMounted;\r\n        },\r\n    });\r\n    proxy(instance, 'isUnmounted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._isDestroyed;\r\n        },\r\n    });\r\n    proxy(instance, 'isDeactivated', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._inactive;\r\n        },\r\n    });\r\n    proxy(instance, 'emitted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._events;\r\n        },\r\n    });\r\n    instanceMapCache.set(vue2Instance, instance);\r\n    if (vue2Instance.$parent) {\r\n        instance.parent = toVue3ComponentInstance(vue2Instance.$parent);\r\n    }\r\n    if (vue2Instance.$root) {\r\n        instance.root = toVue3ComponentInstance(vue2Instance.$root);\r\n    }\r\n    return instance;\r\n}\n\nfunction currentVMInFn(hook) {\r\n    var vm = getCurrentInstance();\r\n    if ((process.env.NODE_ENV !== 'production') && !vm) {\r\n        warn(hook + \" is called when there is no active component instance to be \" +\r\n            \"associated with. \" +\r\n            \"Lifecycle injection APIs can only be used during execution of setup().\");\r\n    }\r\n    return vm === null || vm === void 0 ? void 0 : vm.proxy;\r\n}\r\nfunction defineComponentInstance(Ctor, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var silent = Ctor.config.silent;\r\n    Ctor.config.silent = true;\r\n    var vm = new Ctor(options);\r\n    Ctor.config.silent = silent;\r\n    return vm;\r\n}\r\nfunction isComponentInstance(obj) {\r\n    var Vue = getVueConstructor();\r\n    return Vue && obj instanceof Vue;\r\n}\r\nfunction createSlotProxy(vm, slotName) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!vm.$scopedSlots[slotName]) {\r\n            return warn(\"slots.\" + slotName + \"() got called outside of the \\\"render()\\\" scope\", vm);\r\n        }\r\n        return vm.$scopedSlots[slotName].apply(vm, args);\r\n    };\r\n}\r\nfunction resolveSlots(slots, normalSlots) {\r\n    var res;\r\n    if (!slots) {\r\n        res = {};\r\n    }\r\n    else if (slots._normalized) {\r\n        // fast path 1: child component re-render only, parent did not change\r\n        return slots._normalized;\r\n    }\r\n    else {\r\n        res = {};\r\n        for (var key in slots) {\r\n            if (slots[key] && key[0] !== '$') {\r\n                res[key] = true;\r\n            }\r\n        }\r\n    }\r\n    // expose normal slots on scopedSlots\r\n    for (var key in normalSlots) {\r\n        if (!(key in res)) {\r\n            res[key] = true;\r\n        }\r\n    }\r\n    return res;\r\n}\r\nvar vueInternalClasses;\r\nvar getVueInternalClasses = function () {\r\n    if (!vueInternalClasses) {\r\n        var vm = defineComponentInstance(getVueConstructor(), {\r\n            computed: {\r\n                value: function () {\r\n                    return 0;\r\n                },\r\n            },\r\n        });\r\n        // to get Watcher class\r\n        var Watcher = vm._computedWatchers.value.constructor;\r\n        // to get Dep class\r\n        var Dep = vm._data.__ob__.dep.constructor;\r\n        vueInternalClasses = {\r\n            Watcher: Watcher,\r\n            Dep: Dep,\r\n        };\r\n        vm.$destroy();\r\n    }\r\n    return vueInternalClasses;\r\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nfunction createSymbol(name) {\r\n    return hasSymbol ? Symbol.for(name) : name;\r\n}\r\nvar WatcherPreFlushQueueKey = createSymbol('composition-api.preFlushQueue');\r\nvar WatcherPostFlushQueueKey = createSymbol('composition-api.postFlushQueue');\r\n// must be a string, symbol key is ignored in reactive\r\nvar RefKey = 'composition-api.refKey';\n\nvar accessModifiedSet = new WeakMap();\r\nvar rawSet = new WeakMap();\r\nvar readonlySet = new WeakMap();\n\nvar RefImpl = /** @class */ (function () {\r\n    function RefImpl(_a) {\r\n        var get = _a.get, set = _a.set;\r\n        proxy(this, 'value', {\r\n            get: get,\r\n            set: set,\r\n        });\r\n    }\r\n    return RefImpl;\r\n}());\r\nfunction createRef(options, readonly) {\r\n    var r = new RefImpl(options);\r\n    // seal the ref, this could prevent ref from being observed\r\n    // It's safe to seal the ref, since we really shouldn't extend it.\r\n    // related issues: #79\r\n    var sealed = Object.seal(r);\r\n    readonlySet.set(sealed, true);\r\n    return sealed;\r\n}\r\nfunction ref(raw) {\r\n    var _a;\r\n    if (isRef(raw)) {\r\n        return raw;\r\n    }\r\n    var value = reactive((_a = {}, _a[RefKey] = raw, _a));\r\n    return createRef({\r\n        get: function () { return value[RefKey]; },\r\n        set: function (v) { return (value[RefKey] = v); },\r\n    });\r\n}\r\nfunction isRef(value) {\r\n    return value instanceof RefImpl;\r\n}\r\nfunction unref(ref) {\r\n    return isRef(ref) ? ref.value : ref;\r\n}\r\nfunction toRefs(obj) {\r\n    if ((process.env.NODE_ENV !== 'production') && !isReactive(obj)) {\r\n        warn(\"toRefs() expects a reactive object but received a plain one.\");\r\n    }\r\n    if (!isPlainObject(obj))\r\n        return obj;\r\n    var ret = {};\r\n    for (var key in obj) {\r\n        ret[key] = toRef(obj, key);\r\n    }\r\n    return ret;\r\n}\r\nfunction customRef(factory) {\r\n    var version = ref(0);\r\n    return createRef(factory(function () { return void version.value; }, function () {\r\n        ++version.value;\r\n    }));\r\n}\r\nfunction toRef(object, key) {\r\n    var v = object[key];\r\n    if (isRef(v))\r\n        return v;\r\n    return createRef({\r\n        get: function () { return object[key]; },\r\n        set: function (v) { return (object[key] = v); },\r\n    });\r\n}\r\nfunction shallowRef(raw) {\r\n    var _a;\r\n    if (isRef(raw)) {\r\n        return raw;\r\n    }\r\n    var value = shallowReactive((_a = {}, _a[RefKey] = raw, _a));\r\n    return createRef({\r\n        get: function () { return value[RefKey]; },\r\n        set: function (v) { return (value[RefKey] = v); },\r\n    });\r\n}\r\nfunction triggerRef(value) {\r\n    if (!isRef(value))\r\n        return;\r\n    value.value = value.value;\r\n}\r\nfunction proxyRefs(objectWithRefs) {\r\n    var _a, e_1, _b;\r\n    if (isReactive(objectWithRefs)) {\r\n        return objectWithRefs;\r\n    }\r\n    var value = reactive((_a = {}, _a[RefKey] = objectWithRefs, _a));\r\n    var _loop_1 = function (key) {\r\n        proxy(value, key, {\r\n            get: function () {\r\n                if (isRef(value[key])) {\r\n                    return value[key].value;\r\n                }\r\n                return value[key];\r\n            },\r\n            set: function (v) {\r\n                if (isRef(value[key])) {\r\n                    return (value[key].value = unref(v));\r\n                }\r\n                value[key] = unref(v);\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _c = __values(Object.keys(objectWithRefs)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n            var key = _d.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return value;\r\n}\n\nfunction isRaw(obj) {\r\n    var _a;\r\n    return Boolean((obj === null || obj === void 0 ? void 0 : obj.__ob__) && ((_a = obj.__ob__) === null || _a === void 0 ? void 0 : _a.__raw__));\r\n}\r\nfunction isReactive(obj) {\r\n    var _a;\r\n    return Boolean((obj === null || obj === void 0 ? void 0 : obj.__ob__) && !((_a = obj.__ob__) === null || _a === void 0 ? void 0 : _a.__raw__));\r\n}\r\n/**\r\n * Proxing property access of target.\r\n * We can do unwrapping and other things here.\r\n */\r\nfunction setupAccessControl(target) {\r\n    if (!isPlainObject(target) ||\r\n        isRaw(target) ||\r\n        Array.isArray(target) ||\r\n        isRef(target) ||\r\n        isComponentInstance(target) ||\r\n        accessModifiedSet.has(target))\r\n        return;\r\n    accessModifiedSet.set(target, true);\r\n    var keys = Object.keys(target);\r\n    for (var i = 0; i < keys.length; i++) {\r\n        defineAccessControl(target, keys[i]);\r\n    }\r\n}\r\n/**\r\n * Auto unwrapping when access property\r\n */\r\nfunction defineAccessControl(target, key, val) {\r\n    if (key === '__ob__')\r\n        return;\r\n    if (isRaw(target[key]))\r\n        return;\r\n    var getter;\r\n    var setter;\r\n    var property = Object.getOwnPropertyDescriptor(target, key);\r\n    if (property) {\r\n        if (property.configurable === false) {\r\n            return;\r\n        }\r\n        getter = property.get;\r\n        setter = property.set;\r\n        if ((!getter || setter) /* not only have getter */ &&\r\n            arguments.length === 2) {\r\n            val = target[key];\r\n        }\r\n    }\r\n    setupAccessControl(val);\r\n    Object.defineProperty(target, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: function getterHandler() {\r\n            var value = getter ? getter.call(target) : val;\r\n            // if the key is equal to RefKey, skip the unwrap logic\r\n            if (key !== RefKey && isRef(value)) {\r\n                return value.value;\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        },\r\n        set: function setterHandler(newVal) {\r\n            if (getter && !setter)\r\n                return;\r\n            var value = getter ? getter.call(target) : val;\r\n            // If the key is equal to RefKey, skip the unwrap logic\r\n            // If and only if \"value\" is ref and \"newVal\" is not a ref,\r\n            // the assignment should be proxied to \"value\" ref.\r\n            if (key !== RefKey && isRef(value) && !isRef(newVal)) {\r\n                value.value = newVal;\r\n            }\r\n            else if (setter) {\r\n                setter.call(target, newVal);\r\n            }\r\n            else {\r\n                val = newVal;\r\n            }\r\n            setupAccessControl(newVal);\r\n        },\r\n    });\r\n}\r\nfunction observe(obj) {\r\n    var Vue = getRegisteredVueOrDefault();\r\n    var observed;\r\n    if (Vue.observable) {\r\n        observed = Vue.observable(obj);\r\n    }\r\n    else {\r\n        var vm = defineComponentInstance(Vue, {\r\n            data: {\r\n                $$state: obj,\r\n            },\r\n        });\r\n        observed = vm._data.$$state;\r\n    }\r\n    // in SSR, there is no __ob__. Mock for reactivity check\r\n    if (!hasOwn(observed, '__ob__')) {\r\n        def(observed, '__ob__', mockObserver(observed));\r\n    }\r\n    return observed;\r\n}\r\nfunction createObserver() {\r\n    return observe({}).__ob__;\r\n}\r\nfunction mockObserver(value) {\r\n    if (value === void 0) { value = {}; }\r\n    return {\r\n        value: value,\r\n        dep: {\r\n            notify: noopFn,\r\n            depend: noopFn,\r\n            addSub: noopFn,\r\n            removeSub: noopFn,\r\n        },\r\n    };\r\n}\r\nfunction shallowReactive(obj) {\r\n    var e_1, _a;\r\n    if ((process.env.NODE_ENV !== 'production') && !obj) {\r\n        warn('\"shallowReactive()\" is called without provide an \"object\".');\r\n        return;\r\n    }\r\n    if (!(isPlainObject(obj) || isArray(obj)) ||\r\n        isRaw(obj) ||\r\n        !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var observed = observe({});\r\n    setupAccessControl(observed);\r\n    var ob = observed.__ob__;\r\n    var _loop_1 = function (key) {\r\n        var val = obj[key];\r\n        var getter;\r\n        var setter;\r\n        var property = Object.getOwnPropertyDescriptor(obj, key);\r\n        if (property) {\r\n            if (property.configurable === false) {\r\n                return \"continue\";\r\n            }\r\n            getter = property.get;\r\n            setter = property.set;\r\n        }\r\n        Object.defineProperty(observed, key, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: function getterHandler() {\r\n                var _a;\r\n                var value = getter ? getter.call(obj) : val;\r\n                (_a = ob.dep) === null || _a === void 0 ? void 0 : _a.depend();\r\n                return value;\r\n            },\r\n            set: function setterHandler(newVal) {\r\n                var _a;\r\n                if (getter && !setter)\r\n                    return;\r\n                if (setter) {\r\n                    setter.call(obj, newVal);\r\n                }\r\n                else {\r\n                    val = newVal;\r\n                }\r\n                (_a = ob.dep) === null || _a === void 0 ? void 0 : _a.notify();\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return observed;\r\n}\r\n/**\r\n * Make obj reactivity\r\n */\r\nfunction reactive(obj) {\r\n    if ((process.env.NODE_ENV !== 'production') && !obj) {\r\n        warn('\"reactive()\" is called without provide an \"object\".');\r\n        // @ts-ignore\r\n        return;\r\n    }\r\n    if (!(isPlainObject(obj) || isArray(obj)) ||\r\n        isRaw(obj) ||\r\n        !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var observed = observe(obj);\r\n    setupAccessControl(observed);\r\n    return observed;\r\n}\r\n/**\r\n * Make sure obj can't be a reactive\r\n */\r\nfunction markRaw(obj) {\r\n    if (!(isPlainObject(obj) || isArray(obj)) || !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    // set the vue observable flag at obj\r\n    var ob = createObserver();\r\n    ob.__raw__ = true;\r\n    def(obj, '__ob__', ob);\r\n    // mark as Raw\r\n    rawSet.set(obj, true);\r\n    return obj;\r\n}\r\nfunction toRaw(observed) {\r\n    var _a, _b;\r\n    if (isRaw(observed) || !Object.isExtensible(observed)) {\r\n        return observed;\r\n    }\r\n    return ((_b = (_a = observed) === null || _a === void 0 ? void 0 : _a.__ob__) === null || _b === void 0 ? void 0 : _b.value) || observed;\r\n}\n\nfunction isReadonly(obj) {\r\n    return readonlySet.has(obj);\r\n}\r\n/**\r\n * **In @vue/composition-api, `reactive` only provides type-level readonly check**\r\n *\r\n * Creates a readonly copy of the original object. Note the returned copy is not\r\n * made reactive, but `readonly` can be called on an already reactive object.\r\n */\r\nfunction readonly(target) {\r\n    return target;\r\n}\r\nfunction shallowReadonly(obj) {\r\n    var e_1, _a;\r\n    if (!(isPlainObject(obj) || isArray(obj)) || !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var readonlyObj = {};\r\n    var source = reactive({});\r\n    var ob = source.__ob__;\r\n    var _loop_1 = function (key) {\r\n        var val = obj[key];\r\n        var getter;\r\n        var property = Object.getOwnPropertyDescriptor(obj, key);\r\n        if (property) {\r\n            if (property.configurable === false) {\r\n                return \"continue\";\r\n            }\r\n            getter = property.get;\r\n        }\r\n        Object.defineProperty(readonlyObj, key, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: function getterHandler() {\r\n                var value = getter ? getter.call(obj) : val;\r\n                ob.dep.depend();\r\n                return value;\r\n            },\r\n            set: function (v) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(\"Set operation on key \\\"\" + key + \"\\\" failed: target is readonly.\");\r\n                }\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    readonlySet.set(readonlyObj, true);\r\n    return readonlyObj;\r\n}\n\n/**\r\n * Set a property on an object. Adds the new property, triggers change\r\n * notification and intercept it's subsequent access if the property doesn't\r\n * already exist.\r\n */\r\nfunction set(target, key, val) {\r\n    var Vue = getVueConstructor();\r\n    var _a = Vue.util, warn = _a.warn, defineReactive = _a.defineReactive;\r\n    if ((process.env.NODE_ENV !== 'production') && (isUndef(target) || isPrimitive(target))) {\r\n        warn(\"Cannot set reactive property on undefined, null, or primitive value: \" + target);\r\n    }\r\n    if (isArray(target) && isValidArrayIndex(key)) {\r\n        target.length = Math.max(target.length, key);\r\n        target.splice(key, 1, val);\r\n        return val;\r\n    }\r\n    if (key in target && !(key in Object.prototype)) {\r\n        target[key] = val;\r\n        return val;\r\n    }\r\n    var ob = target.__ob__;\r\n    if (target._isVue || (ob && ob.vmCount)) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn('Avoid adding reactive properties to a Vue instance or its root $data ' +\r\n                'at runtime - declare it upfront in the data option.');\r\n        return val;\r\n    }\r\n    if (!ob) {\r\n        target[key] = val;\r\n        return val;\r\n    }\r\n    defineReactive(ob.value, key, val);\r\n    // IMPORTANT: define access control before trigger watcher\r\n    defineAccessControl(target, key, val);\r\n    ob.dep.notify();\r\n    return val;\r\n}\n\n/**\r\n * Delete a property and trigger change if necessary.\r\n */\r\nfunction del(target, key) {\r\n    var Vue = getVueConstructor();\r\n    var warn = Vue.util.warn;\r\n    if ((process.env.NODE_ENV !== 'production') && (isUndef(target) || isPrimitive(target))) {\r\n        warn(\"Cannot delete reactive property on undefined, null, or primitive value: \" + target);\r\n    }\r\n    if (Array.isArray(target) && isValidArrayIndex(key)) {\r\n        target.splice(key, 1);\r\n        return;\r\n    }\r\n    var ob = target.__ob__;\r\n    if (target._isVue || (ob && ob.vmCount)) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn('Avoid deleting properties on a Vue instance or its root $data ' +\r\n                '- just set it to null.');\r\n        return;\r\n    }\r\n    if (!hasOwn(target, key)) {\r\n        return;\r\n    }\r\n    delete target[key];\r\n    if (!ob) {\r\n        return;\r\n    }\r\n    ob.dep.notify();\r\n}\n\nvar genName = function (name) { return \"on\" + (name[0].toUpperCase() + name.slice(1)); };\r\nfunction createLifeCycle(lifeCyclehook) {\r\n    return function (callback) {\r\n        var vm = currentVMInFn(genName(lifeCyclehook));\r\n        if (vm) {\r\n            injectHookOption(getVueConstructor(), vm, lifeCyclehook, callback);\r\n        }\r\n    };\r\n}\r\nfunction injectHookOption(Vue, vm, hook, val) {\r\n    var options = vm.$options;\r\n    var mergeFn = Vue.config.optionMergeStrategies[hook];\r\n    options[hook] = mergeFn(options[hook], wrapHookCall(vm, val));\r\n}\r\nfunction wrapHookCall(vm, fn) {\r\n    return function () {\r\n        var _a;\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var preVm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n        setCurrentInstance(vm);\r\n        try {\r\n            return fn.apply(void 0, __spread(args));\r\n        }\r\n        finally {\r\n            setCurrentInstance(preVm);\r\n        }\r\n    };\r\n}\r\n// export const onCreated = createLifeCycle('created');\r\nvar onBeforeMount = createLifeCycle('beforeMount');\r\nvar onMounted = createLifeCycle('mounted');\r\nvar onBeforeUpdate = createLifeCycle('beforeUpdate');\r\nvar onUpdated = createLifeCycle('updated');\r\nvar onBeforeUnmount = createLifeCycle('beforeDestroy');\r\nvar onUnmounted = createLifeCycle('destroyed');\r\nvar onErrorCaptured = createLifeCycle('errorCaptured');\r\nvar onActivated = createLifeCycle('activated');\r\nvar onDeactivated = createLifeCycle('deactivated');\r\nvar onServerPrefetch = createLifeCycle('serverPrefetch');\n\nvar fallbackVM;\r\nfunction flushPreQueue() {\r\n    flushQueue(this, WatcherPreFlushQueueKey);\r\n}\r\nfunction flushPostQueue() {\r\n    flushQueue(this, WatcherPostFlushQueueKey);\r\n}\r\nfunction hasWatchEnv(vm) {\r\n    return vm[WatcherPreFlushQueueKey] !== undefined;\r\n}\r\nfunction installWatchEnv(vm) {\r\n    vm[WatcherPreFlushQueueKey] = [];\r\n    vm[WatcherPostFlushQueueKey] = [];\r\n    vm.$on('hook:beforeUpdate', flushPreQueue);\r\n    vm.$on('hook:updated', flushPostQueue);\r\n}\r\nfunction getWatcherOption(options) {\r\n    return __assign({\r\n        immediate: false,\r\n        deep: false,\r\n        flush: 'pre',\r\n    }, options);\r\n}\r\nfunction getWatchEffectOption(options) {\r\n    return __assign({\r\n        immediate: true,\r\n        deep: false,\r\n        flush: 'pre',\r\n    }, options);\r\n}\r\nfunction getWatcherVM() {\r\n    var _a;\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!vm) {\r\n        if (!fallbackVM) {\r\n            fallbackVM = defineComponentInstance(getVueConstructor());\r\n        }\r\n        vm = fallbackVM;\r\n    }\r\n    else if (!hasWatchEnv(vm)) {\r\n        installWatchEnv(vm);\r\n    }\r\n    return vm;\r\n}\r\nfunction flushQueue(vm, key) {\r\n    var queue = vm[key];\r\n    for (var index = 0; index < queue.length; index++) {\r\n        queue[index]();\r\n    }\r\n    queue.length = 0;\r\n}\r\nfunction queueFlushJob(vm, fn, mode) {\r\n    // flush all when beforeUpdate and updated are not fired\r\n    var fallbackFlush = function () {\r\n        vm.$nextTick(function () {\r\n            if (vm[WatcherPreFlushQueueKey].length) {\r\n                flushQueue(vm, WatcherPreFlushQueueKey);\r\n            }\r\n            if (vm[WatcherPostFlushQueueKey].length) {\r\n                flushQueue(vm, WatcherPostFlushQueueKey);\r\n            }\r\n        });\r\n    };\r\n    switch (mode) {\r\n        case 'pre':\r\n            fallbackFlush();\r\n            vm[WatcherPreFlushQueueKey].push(fn);\r\n            break;\r\n        case 'post':\r\n            fallbackFlush();\r\n            vm[WatcherPostFlushQueueKey].push(fn);\r\n            break;\r\n        default:\r\n            assert(false, \"flush must be one of [\\\"post\\\", \\\"pre\\\", \\\"sync\\\"], but got \" + mode);\r\n            break;\r\n    }\r\n}\r\nfunction createVueWatcher(vm, getter, callback, options) {\r\n    var index = vm._watchers.length;\r\n    // @ts-ignore: use undocumented options\r\n    vm.$watch(getter, callback, {\r\n        immediate: options.immediateInvokeCallback,\r\n        deep: options.deep,\r\n        lazy: options.noRun,\r\n        sync: options.sync,\r\n        before: options.before,\r\n    });\r\n    return vm._watchers[index];\r\n}\r\n// We have to monkeypatch the teardown function so Vue will run\r\n// runCleanup() when it tears down the watcher on unmounted.\r\nfunction patchWatcherTeardown(watcher, runCleanup) {\r\n    var _teardown = watcher.teardown;\r\n    watcher.teardown = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        _teardown.apply(watcher, args);\r\n        runCleanup();\r\n    };\r\n}\r\nfunction createWatcher(vm, source, cb, options) {\r\n    var _a;\r\n    var flushMode = options.flush;\r\n    var isSync = flushMode === 'sync';\r\n    var cleanup;\r\n    var registerCleanup = function (fn) {\r\n        cleanup = function () {\r\n            try {\r\n                fn();\r\n            }\r\n            catch (error) {\r\n                logError(error, vm, 'onCleanup()');\r\n            }\r\n        };\r\n    };\r\n    // cleanup before running getter again\r\n    var runCleanup = function () {\r\n        if (cleanup) {\r\n            cleanup();\r\n            cleanup = null;\r\n        }\r\n    };\r\n    var createScheduler = function (fn) {\r\n        if (isSync ||\r\n            /* without a current active instance, ignore pre|post mode */ vm ===\r\n                fallbackVM) {\r\n            return fn;\r\n        }\r\n        return (function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return queueFlushJob(vm, function () {\r\n                fn.apply(void 0, __spread(args));\r\n            }, flushMode);\r\n        });\r\n    };\r\n    // effect watch\r\n    if (cb === null) {\r\n        var running_1 = false;\r\n        var getter_1 = function () {\r\n            // preventing the watch callback being call in the same execution\r\n            if (running_1) {\r\n                return;\r\n            }\r\n            try {\r\n                running_1 = true;\r\n                source(registerCleanup);\r\n            }\r\n            finally {\r\n                running_1 = false;\r\n            }\r\n        };\r\n        var watcher_1 = createVueWatcher(vm, getter_1, noopFn, {\r\n            deep: options.deep || false,\r\n            sync: isSync,\r\n            before: runCleanup,\r\n        });\r\n        patchWatcherTeardown(watcher_1, runCleanup);\r\n        // enable the watcher update\r\n        watcher_1.lazy = false;\r\n        var originGet = watcher_1.get.bind(watcher_1);\r\n        // always run watchEffect\r\n        watcher_1.get = createScheduler(originGet);\r\n        return function () {\r\n            watcher_1.teardown();\r\n        };\r\n    }\r\n    var deep = options.deep;\r\n    var getter;\r\n    if (Array.isArray(source)) {\r\n        getter = function () { return source.map(function (s) { return (isRef(s) ? s.value : s()); }); };\r\n    }\r\n    else if (isRef(source)) {\r\n        getter = function () { return source.value; };\r\n    }\r\n    else if (isReactive(source)) {\r\n        getter = function () { return source; };\r\n        deep = true;\r\n    }\r\n    else if (isFunction(source)) {\r\n        getter = source;\r\n    }\r\n    else {\r\n        getter = noopFn;\r\n        warn(\"Invalid watch source: \" + JSON.stringify(source) + \".\\n      A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.\", vm);\r\n    }\r\n    var applyCb = function (n, o) {\r\n        // cleanup before running cb again\r\n        runCleanup();\r\n        cb(n, o, registerCleanup);\r\n    };\r\n    var callback = createScheduler(applyCb);\r\n    if (options.immediate) {\r\n        var originalCallback_1 = callback;\r\n        // `shiftCallback` is used to handle the first sync effect run.\r\n        // The subsequent callbacks will redirect to `callback`.\r\n        var shiftCallback_1 = function (n, o) {\r\n            shiftCallback_1 = originalCallback_1;\r\n            applyCb(n, o);\r\n        };\r\n        callback = function (n, o) {\r\n            shiftCallback_1(n, o);\r\n        };\r\n    }\r\n    // @ts-ignore: use undocumented option \"sync\"\r\n    var stop = vm.$watch(getter, callback, {\r\n        immediate: options.immediate,\r\n        deep: deep,\r\n        sync: isSync,\r\n    });\r\n    // Once again, we have to hack the watcher for proper teardown\r\n    var watcher = vm._watchers[vm._watchers.length - 1];\r\n    // if the return value is reactive and deep:true\r\n    // watch for changes, this might happen when new key is added\r\n    if (isReactive(watcher.value) && ((_a = watcher.value.__ob__) === null || _a === void 0 ? void 0 : _a.dep) && deep) {\r\n        watcher.value.__ob__.dep.addSub({\r\n            update: function () {\r\n                // this will force the source to be revaluated and the callback\r\n                // executed if needed\r\n                watcher.run();\r\n            },\r\n        });\r\n    }\r\n    patchWatcherTeardown(watcher, runCleanup);\r\n    return function () {\r\n        stop();\r\n    };\r\n}\r\nfunction watchEffect(effect, options) {\r\n    var opts = getWatchEffectOption(options);\r\n    var vm = getWatcherVM();\r\n    return createWatcher(vm, effect, null, opts);\r\n}\r\n// implementation\r\nfunction watch(source, cb, options) {\r\n    var callback = null;\r\n    if (typeof cb === 'function') {\r\n        // source watch\r\n        callback = cb;\r\n    }\r\n    else {\r\n        // effect watch\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(\"`watch(fn, options?)` signature has been moved to a separate API. \" +\r\n                \"Use `watchEffect(fn, options?)` instead. `watch` now only \" +\r\n                \"supports `watch(source, cb, options?) signature.\");\r\n        }\r\n        options = cb;\r\n        callback = null;\r\n    }\r\n    var opts = getWatcherOption(options);\r\n    var vm = getWatcherVM();\r\n    return createWatcher(vm, source, callback, opts);\r\n}\n\n// implement\r\nfunction computed(options) {\r\n    var _a;\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    var get, set;\r\n    if (typeof options === 'function') {\r\n        get = options;\r\n    }\r\n    else {\r\n        get = options.get;\r\n        set = options.set;\r\n    }\r\n    var computedSetter;\r\n    var computedGetter;\r\n    if (vm && !vm.$isServer) {\r\n        var _b = getVueInternalClasses(), Watcher_1 = _b.Watcher, Dep_1 = _b.Dep;\r\n        var watcher_1;\r\n        computedGetter = function () {\r\n            if (!watcher_1) {\r\n                watcher_1 = new Watcher_1(vm, get, noopFn, { lazy: true });\r\n            }\r\n            if (watcher_1.dirty) {\r\n                watcher_1.evaluate();\r\n            }\r\n            if (Dep_1.target) {\r\n                watcher_1.depend();\r\n            }\r\n            return watcher_1.value;\r\n        };\r\n        computedSetter = function (v) {\r\n            if ((process.env.NODE_ENV !== 'production') && !set) {\r\n                warn('Write operation failed: computed value is readonly.', vm);\r\n                return;\r\n            }\r\n            if (set) {\r\n                set(v);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        // fallback\r\n        var computedHost_1 = defineComponentInstance(getVueConstructor(), {\r\n            computed: {\r\n                $$state: {\r\n                    get: get,\r\n                    set: set,\r\n                },\r\n            },\r\n        });\r\n        vm && vm.$on('hook:destroyed', function () { return computedHost_1.$destroy(); });\r\n        computedGetter = function () { return computedHost_1.$$state; };\r\n        computedSetter = function (v) {\r\n            if ((process.env.NODE_ENV !== 'production') && !set) {\r\n                warn('Write operation failed: computed value is readonly.', vm);\r\n                return;\r\n            }\r\n            computedHost_1.$$state = v;\r\n        };\r\n    }\r\n    return createRef({\r\n        get: computedGetter,\r\n        set: computedSetter,\r\n    });\r\n}\n\nvar NOT_FOUND = {};\r\nfunction resolveInject(provideKey, vm) {\r\n    var source = vm;\r\n    while (source) {\r\n        // @ts-ignore\r\n        if (source._provided && hasOwn(source._provided, provideKey)) {\r\n            //@ts-ignore\r\n            return source._provided[provideKey];\r\n        }\r\n        source = source.$parent;\r\n    }\r\n    return NOT_FOUND;\r\n}\r\nfunction provide(key, value) {\r\n    var vm = currentVMInFn('provide');\r\n    if (!vm)\r\n        return;\r\n    if (!vm._provided) {\r\n        var provideCache_1 = {};\r\n        Object.defineProperty(vm, '_provided', {\r\n            get: function () { return provideCache_1; },\r\n            set: function (v) { return Object.assign(provideCache_1, v); },\r\n        });\r\n    }\r\n    vm._provided[key] = value;\r\n}\r\nfunction inject(key, defaultValue, treatDefaultAsFactory) {\r\n    var _a;\r\n    if (treatDefaultAsFactory === void 0) { treatDefaultAsFactory = false; }\r\n    if (!key) {\r\n        return defaultValue;\r\n    }\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!vm) {\r\n        warn(\"inject() can only be used inside setup() or functional components.\");\r\n        return;\r\n    }\r\n    var val = resolveInject(key, vm);\r\n    if (val !== NOT_FOUND) {\r\n        return val;\r\n    }\r\n    if (defaultValue === undefined && (process.env.NODE_ENV !== 'production')) {\r\n        warn(\"Injection \\\"\" + String(key) + \"\\\" not found\", vm);\r\n    }\r\n    return treatDefaultAsFactory && isFunction(defaultValue)\r\n        ? defaultValue()\r\n        : defaultValue;\r\n}\n\nvar EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nvar useCssModule = function (name) {\r\n    var _a;\r\n    if (name === void 0) { name = '$style'; }\r\n    var instance = getCurrentInstance();\r\n    if (!instance) {\r\n        (process.env.NODE_ENV !== 'production') && warn(\"useCssModule must be called inside setup()\");\r\n        return EMPTY_OBJ;\r\n    }\r\n    var mod = (_a = instance.proxy) === null || _a === void 0 ? void 0 : _a[name];\r\n    if (!mod) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn(\"Current instance does not have CSS module named \\\"\" + name + \"\\\".\");\r\n        return EMPTY_OBJ;\r\n    }\r\n    return mod;\r\n};\r\n/**\r\n * @deprecated use `useCssModule` instead.\r\n */\r\nvar useCSSModule = useCssModule;\n\nfunction createApp(rootComponent, rootProps) {\r\n    if (rootProps === void 0) { rootProps = undefined; }\r\n    var V = getVueConstructor();\r\n    var mountedVM = undefined;\r\n    return {\r\n        config: V.config,\r\n        use: V.use.bind(V),\r\n        mixin: V.mixin.bind(V),\r\n        component: V.component.bind(V),\r\n        directive: V.directive.bind(V),\r\n        mount: function (el, hydrating) {\r\n            if (!mountedVM) {\r\n                mountedVM = new V(__assign({ propsData: rootProps }, rootComponent));\r\n                mountedVM.$mount(el, hydrating);\r\n                return mountedVM;\r\n            }\r\n            else {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(\"App has already been mounted.\\n\" +\r\n                        \"If you want to remount the same app, move your app creation logic \" +\r\n                        \"into a factory function and create fresh app instances for each \" +\r\n                        \"mount - e.g. `const createMyApp = () => createApp(App)`\");\r\n                }\r\n                return mountedVM;\r\n            }\r\n        },\r\n        unmount: function () {\r\n            if (mountedVM) {\r\n                mountedVM.$destroy();\r\n                mountedVM = undefined;\r\n            }\r\n            else if ((process.env.NODE_ENV !== 'production')) {\r\n                warn(\"Cannot unmount an app that is not mounted.\");\r\n            }\r\n        },\r\n    };\r\n}\n\nvar nextTick = function nextTick() {\r\n    var _a;\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return (_a = getVueConstructor()) === null || _a === void 0 ? void 0 : _a.nextTick.apply(this, args);\r\n};\n\nvar fallbackCreateElement;\r\nvar createElement = function createElement() {\r\n    var _a;\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var instance = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!instance) {\r\n        warn('`createElement()` has been called outside of render function.');\r\n        if (!fallbackCreateElement) {\r\n            fallbackCreateElement = defineComponentInstance(getVueConstructor())\r\n                .$createElement;\r\n        }\r\n        return fallbackCreateElement.apply(fallbackCreateElement, args);\r\n    }\r\n    return instance.$createElement.apply(instance, args);\r\n};\n\n/**\r\n * Displays a warning message (using console.error) with a stack trace if the\r\n * function is called inside of active component.\r\n *\r\n * @param message warning message to be displayed\r\n */\r\nfunction warn$1(message) {\r\n    var _a;\r\n    warn(message, (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy);\r\n}\n\nfunction set$1(vm, key, value) {\r\n    var state = (vm.__composition_api_state__ =\r\n        vm.__composition_api_state__ || {});\r\n    state[key] = value;\r\n}\r\nfunction get(vm, key) {\r\n    return (vm.__composition_api_state__ || {})[key];\r\n}\r\nvar vmStateManager = {\r\n    set: set$1,\r\n    get: get,\r\n};\n\nfunction asVmProperty(vm, propName, propValue) {\r\n    var props = vm.$options.props;\r\n    if (!(propName in vm) && !(props && hasOwn(props, propName))) {\r\n        if (isRef(propValue)) {\r\n            proxy(vm, propName, {\r\n                get: function () { return propValue.value; },\r\n                set: function (val) {\r\n                    propValue.value = val;\r\n                },\r\n            });\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            vm[propName] = propValue;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            // expose binding to Vue Devtool as a data property\r\n            // delay this until state has been resolved to prevent repeated works\r\n            vm.$nextTick(function () {\r\n                if (isRef(propValue)) {\r\n                    proxy(vm._data, propName, {\r\n                        get: function () { return propValue.value; },\r\n                        set: function (val) {\r\n                            propValue.value = val;\r\n                        },\r\n                    });\r\n                }\r\n                else {\r\n                    vm._data[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        if (props && hasOwn(props, propName)) {\r\n            warn(\"The setup binding property \\\"\" + propName + \"\\\" is already declared as a prop.\", vm);\r\n        }\r\n        else {\r\n            warn(\"The setup binding property \\\"\" + propName + \"\\\" is already declared.\", vm);\r\n        }\r\n    }\r\n}\r\nfunction updateTemplateRef(vm) {\r\n    var rawBindings = vmStateManager.get(vm, 'rawBindings') || {};\r\n    if (!rawBindings || !Object.keys(rawBindings).length)\r\n        return;\r\n    var refs = vm.$refs;\r\n    var oldRefKeys = vmStateManager.get(vm, 'refs') || [];\r\n    for (var index = 0; index < oldRefKeys.length; index++) {\r\n        var key = oldRefKeys[index];\r\n        var setupValue = rawBindings[key];\r\n        if (!refs[key] && setupValue && isRef(setupValue)) {\r\n            setupValue.value = null;\r\n        }\r\n    }\r\n    var newKeys = Object.keys(refs);\r\n    var validNewKeys = [];\r\n    for (var index = 0; index < newKeys.length; index++) {\r\n        var key = newKeys[index];\r\n        var setupValue = rawBindings[key];\r\n        if (refs[key] && setupValue && isRef(setupValue)) {\r\n            setupValue.value = refs[key];\r\n            validNewKeys.push(key);\r\n        }\r\n    }\r\n    vmStateManager.set(vm, 'refs', validNewKeys);\r\n}\r\nfunction resolveScopedSlots(vm, slotsProxy) {\r\n    var parentVNode = vm.$options._parentVnode;\r\n    if (!parentVNode)\r\n        return;\r\n    var prevSlots = vmStateManager.get(vm, 'slots') || [];\r\n    var curSlots = resolveSlots(parentVNode.data.scopedSlots, vm.$slots);\r\n    // remove staled slots\r\n    for (var index = 0; index < prevSlots.length; index++) {\r\n        var key = prevSlots[index];\r\n        if (!curSlots[key]) {\r\n            delete slotsProxy[key];\r\n        }\r\n    }\r\n    // proxy fresh slots\r\n    var slotNames = Object.keys(curSlots);\r\n    for (var index = 0; index < slotNames.length; index++) {\r\n        var key = slotNames[index];\r\n        if (!slotsProxy[key]) {\r\n            slotsProxy[key] = createSlotProxy(vm, key);\r\n        }\r\n    }\r\n    vmStateManager.set(vm, 'slots', slotNames);\r\n}\r\nfunction activateCurrentInstance(vm, fn, onError) {\r\n    var preVm = getCurrentVue2Instance();\r\n    setCurrentInstance(vm);\r\n    try {\r\n        return fn(vm);\r\n    }\r\n    catch (err) {\r\n        if (onError) {\r\n            onError(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    finally {\r\n        setCurrentInstance(preVm);\r\n    }\r\n}\n\nfunction mixin(Vue) {\r\n    Vue.mixin({\r\n        beforeCreate: functionApiInit,\r\n        mounted: function () {\r\n            updateTemplateRef(this);\r\n        },\r\n        updated: function () {\r\n            updateTemplateRef(this);\r\n        },\r\n    });\r\n    /**\r\n     * Vuex init hook, injected into each instances init hooks list.\r\n     */\r\n    function functionApiInit() {\r\n        var vm = this;\r\n        var $options = vm.$options;\r\n        var setup = $options.setup, render = $options.render;\r\n        if (render) {\r\n            // keep currentInstance accessible for createElement\r\n            $options.render = function () {\r\n                var _this = this;\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return activateCurrentInstance(vm, function () { return render.apply(_this, args); });\r\n            };\r\n        }\r\n        if (!setup) {\r\n            return;\r\n        }\r\n        if (typeof setup !== 'function') {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                warn('The \"setup\" option should be a function that returns a object in component definitions.', vm);\r\n            }\r\n            return;\r\n        }\r\n        var data = $options.data;\r\n        // wrapper the data option, so we can invoke setup before data get resolved\r\n        $options.data = function wrappedData() {\r\n            initSetup(vm, vm.$props);\r\n            return typeof data === 'function'\r\n                ? data.call(vm, vm)\r\n                : data || {};\r\n        };\r\n    }\r\n    function initSetup(vm, props) {\r\n        if (props === void 0) { props = {}; }\r\n        var setup = vm.$options.setup;\r\n        var ctx = createSetupContext(vm);\r\n        // fake reactive for `toRefs(props)`\r\n        def(props, '__ob__', createObserver());\r\n        // resolve scopedSlots and slots to functions\r\n        // @ts-expect-error\r\n        resolveScopedSlots(vm, ctx.slots);\r\n        var binding;\r\n        activateCurrentInstance(vm, function () {\r\n            // make props to be fake reactive, this is for `toRefs(props)`\r\n            binding = setup(props, ctx);\r\n        });\r\n        if (!binding)\r\n            return;\r\n        if (isFunction(binding)) {\r\n            // keep typescript happy with the binding type.\r\n            var bindingFunc_1 = binding;\r\n            // keep currentInstance accessible for createElement\r\n            vm.$options.render = function () {\r\n                // @ts-expect-error\r\n                resolveScopedSlots(vm, ctx.slots);\r\n                return activateCurrentInstance(vm, function () { return bindingFunc_1(); });\r\n            };\r\n            return;\r\n        }\r\n        else if (isPlainObject(binding)) {\r\n            if (isReactive(binding)) {\r\n                binding = toRefs(binding);\r\n            }\r\n            vmStateManager.set(vm, 'rawBindings', binding);\r\n            var bindingObj_1 = binding;\r\n            Object.keys(bindingObj_1).forEach(function (name) {\r\n                var bindingValue = bindingObj_1[name];\r\n                if (!isRef(bindingValue)) {\r\n                    if (!isReactive(bindingValue)) {\r\n                        if (isFunction(bindingValue)) {\r\n                            bindingValue = bindingValue.bind(vm);\r\n                        }\r\n                        else if (!isObject(bindingValue)) {\r\n                            bindingValue = ref(bindingValue);\r\n                        }\r\n                        else if (hasReactiveArrayChild(bindingValue)) {\r\n                            // creates a custom reactive properties without make the object explicitly reactive\r\n                            // NOTE we should try to avoid this, better implementation needed\r\n                            customReactive(bindingValue);\r\n                        }\r\n                    }\r\n                    else if (isArray(bindingValue)) {\r\n                        bindingValue = ref(bindingValue);\r\n                    }\r\n                }\r\n                asVmProperty(vm, name, bindingValue);\r\n            });\r\n            return;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            assert(false, \"\\\"setup\\\" must return a \\\"Object\\\" or a \\\"Function\\\", got \\\"\" + Object.prototype.toString\r\n                .call(binding)\r\n                .slice(8, -1) + \"\\\"\");\r\n        }\r\n    }\r\n    function customReactive(target) {\r\n        if (!isPlainObject(target) ||\r\n            isRef(target) ||\r\n            isReactive(target) ||\r\n            isRaw(target))\r\n            return;\r\n        var Vue = getVueConstructor();\r\n        var defineReactive = Vue.util.defineReactive;\r\n        Object.keys(target).forEach(function (k) {\r\n            var val = target[k];\r\n            defineReactive(target, k, val);\r\n            if (val) {\r\n                customReactive(val);\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    function hasReactiveArrayChild(target, visited) {\r\n        if (visited === void 0) { visited = new Map(); }\r\n        if (visited.has(target)) {\r\n            return visited.get(target);\r\n        }\r\n        visited.set(target, false);\r\n        if (Array.isArray(target) && isReactive(target)) {\r\n            visited.set(target, true);\r\n            return true;\r\n        }\r\n        if (!isPlainObject(target) || isRaw(target)) {\r\n            return false;\r\n        }\r\n        return Object.keys(target).some(function (x) {\r\n            return hasReactiveArrayChild(target[x], visited);\r\n        });\r\n    }\r\n    function createSetupContext(vm) {\r\n        var ctx = { slots: {} };\r\n        var propsPlain = [\r\n            'root',\r\n            'parent',\r\n            'refs',\r\n            'listeners',\r\n            'isServer',\r\n            'ssrContext',\r\n        ];\r\n        var propsReactiveProxy = ['attrs'];\r\n        var methodReturnVoid = ['emit'];\r\n        propsPlain.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () { return vm[srcKey]; },\r\n                set: function () {\r\n                    warn(\"Cannot assign to '\" + key + \"' because it is a read-only property\", vm);\r\n                },\r\n            });\r\n        });\r\n        propsReactiveProxy.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () {\r\n                    var e_1, _a;\r\n                    var data = reactive({});\r\n                    var source = vm[srcKey];\r\n                    var _loop_1 = function (attr) {\r\n                        proxy(data, attr, {\r\n                            get: function () {\r\n                                // to ensure it always return the latest value\r\n                                return vm[srcKey][attr];\r\n                            },\r\n                        });\r\n                    };\r\n                    try {\r\n                        for (var _b = __values(Object.keys(source)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                            var attr = _c.value;\r\n                            _loop_1(attr);\r\n                        }\r\n                    }\r\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                    }\r\n                    return data;\r\n                },\r\n                set: function () {\r\n                    warn(\"Cannot assign to '\" + key + \"' because it is a read-only property\", vm);\r\n                },\r\n            });\r\n        });\r\n        methodReturnVoid.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () {\r\n                    return function () {\r\n                        var args = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            args[_i] = arguments[_i];\r\n                        }\r\n                        var fn = vm[srcKey];\r\n                        fn.apply(vm, args);\r\n                    };\r\n                },\r\n            });\r\n        });\r\n        if (process.env.NODE_ENV === 'test') {\r\n            ctx._vm = vm;\r\n        }\r\n        return ctx;\r\n    }\r\n}\n\n/**\r\n * Helper that recursively merges two data objects together.\r\n */\r\nfunction mergeData(from, to) {\r\n    if (!from)\r\n        return to;\r\n    if (!to)\r\n        return from;\r\n    var key;\r\n    var toVal;\r\n    var fromVal;\r\n    var keys = hasSymbol ? Reflect.ownKeys(from) : Object.keys(from);\r\n    for (var i = 0; i < keys.length; i++) {\r\n        key = keys[i];\r\n        // in case the object is already observed...\r\n        if (key === '__ob__')\r\n            continue;\r\n        toVal = to[key];\r\n        fromVal = from[key];\r\n        if (!hasOwn(to, key)) {\r\n            to[key] = fromVal;\r\n        }\r\n        else if (toVal !== fromVal &&\r\n            isPlainObject(toVal) &&\r\n            !isRef(toVal) &&\r\n            isPlainObject(fromVal) &&\r\n            !isRef(fromVal)) {\r\n            mergeData(fromVal, toVal);\r\n        }\r\n    }\r\n    return to;\r\n}\r\nfunction install(Vue) {\r\n    if (isVueRegistered(Vue)) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn('[vue-composition-api] already installed. Vue.use(VueCompositionAPI) should be called only once.');\r\n        }\r\n        return;\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        if (Vue.version) {\r\n            if (Vue.version[0] !== '2' || Vue.version[1] !== '.') {\r\n                warn(\"[vue-composition-api] only works with Vue 2, v\" + Vue.version + \" found.\");\r\n            }\r\n        }\r\n        else {\r\n            warn('[vue-composition-api] no Vue version found');\r\n        }\r\n    }\r\n    Vue.config.optionMergeStrategies.setup = function (parent, child) {\r\n        return function mergedSetupFn(props, context) {\r\n            return mergeData(typeof parent === 'function' ? parent(props, context) || {} : undefined, typeof child === 'function' ? child(props, context) || {} : undefined);\r\n        };\r\n    };\r\n    setVueConstructor(Vue);\r\n    mixin(Vue);\r\n}\r\nvar Plugin = {\r\n    install: function (Vue) { return install(Vue); },\r\n};\n\n// implementation, close to no-op\r\nfunction defineComponent(options) {\r\n    return options;\r\n}\n\nfunction defineAsyncComponent(source) {\r\n    if (isFunction(source)) {\r\n        source = { loader: source };\r\n    }\r\n    var loader = source.loader, loadingComponent = source.loadingComponent, errorComponent = source.errorComponent, _a = source.delay, delay = _a === void 0 ? 200 : _a, timeout = source.timeout, // undefined = never times out\r\n    _b = source.suspensible, // undefined = never times out\r\n    suspensible = _b === void 0 ? false : _b, // in Vue 3 default is true\r\n    userOnError = source.onError;\r\n    if ((process.env.NODE_ENV !== 'production') && suspensible) {\r\n        warn(\"The suspensiblbe option for async components is not supported in Vue2. It is ignored.\");\r\n    }\r\n    var pendingRequest = null;\r\n    var retries = 0;\r\n    var retry = function () {\r\n        retries++;\r\n        pendingRequest = null;\r\n        return load();\r\n    };\r\n    var load = function () {\r\n        var thisRequest;\r\n        return (pendingRequest ||\r\n            (thisRequest = pendingRequest = loader()\r\n                .catch(function (err) {\r\n                err = err instanceof Error ? err : new Error(String(err));\r\n                if (userOnError) {\r\n                    return new Promise(function (resolve, reject) {\r\n                        var userRetry = function () { return resolve(retry()); };\r\n                        var userFail = function () { return reject(err); };\r\n                        userOnError(err, userRetry, userFail, retries + 1);\r\n                    });\r\n                }\r\n                else {\r\n                    throw err;\r\n                }\r\n            })\r\n                .then(function (comp) {\r\n                if (thisRequest !== pendingRequest && pendingRequest) {\r\n                    return pendingRequest;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && !comp) {\r\n                    warn(\"Async component loader resolved to undefined. \" +\r\n                        \"If you are using retry(), make sure to return its return value.\");\r\n                }\r\n                // interop module default\r\n                if (comp &&\r\n                    (comp.__esModule || comp[Symbol.toStringTag] === 'Module')) {\r\n                    comp = comp.default;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && comp && !isObject(comp) && !isFunction(comp)) {\r\n                    throw new Error(\"Invalid async component load result: \" + comp);\r\n                }\r\n                return comp;\r\n            })));\r\n    };\r\n    return function () {\r\n        var component = load();\r\n        return {\r\n            component: component,\r\n            delay: delay,\r\n            timeout: timeout,\r\n            error: errorComponent,\r\n            loading: loadingComponent,\r\n        };\r\n    };\r\n}\n\nvar version = \"1.0.0-rc.2\";\r\n// auto install when using CDN\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n    window.Vue.use(Plugin);\r\n}\n\nexport default Plugin;\nexport { computed, createApp, customRef, defineAsyncComponent, defineComponent, del, getCurrentInstance, createElement as h, inject, isRaw, isReactive, isReadonly, isRef, markRaw, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onServerPrefetch, onUnmounted, onUpdated, provide, proxyRefs, reactive, readonly, ref, set, shallowReactive, shallowReadonly, shallowRef, toRaw, toRef, toRefs, triggerRef, unref, useCSSModule, useCssModule, version, warn$1 as warn, watch, watchEffect };\n"]}]}