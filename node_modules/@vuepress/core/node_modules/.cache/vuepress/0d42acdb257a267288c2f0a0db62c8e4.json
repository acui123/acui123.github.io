{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\vssue\\dist\\vssue.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\vssue\\dist\\vssue.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\qd\\blog\\vuepress-blog-demo\\xcui-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9xZC9ibG9nL3Z1ZXByZXNzLWJsb2ctZGVtby94Y3VpLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3FkL2Jsb2cvdnVlcHJlc3MtYmxvZy1kZW1vL3hjdWktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3FkL2Jsb2cvdnVlcHJlc3MtYmxvZy1kZW1vL3hjdWktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9xZC9ibG9nL3Z1ZXByZXNzLWJsb2ctZGVtby94Y3VpLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvcWQvYmxvZy92dWVwcmVzcy1ibG9nLWRlbW8veGN1aS1ibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3FkL2Jsb2cvdnVlcHJlc3MtYmxvZy1kZW1vL3hjdWktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvcWQvYmxvZy92dWVwcmVzcy1ibG9nLWRlbW8veGN1aS1ibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKCi8qIQogKiB2c3N1ZSAtIEEgdnVlLXBvd2VyZWQgaXNzdWUtYmFzZWQgY29tbWVudCBwbHVnaW4KICoKICogQHZlcnNpb24gdjEuNC43CiAqIEBsaW5rIGh0dHBzOi8vdnNzdWUuanMub3JnCiAqIEBsaWNlbnNlIE1JVAogKiBAY29weXJpZ2h0IDIwMTgtMjAyMSBtZXRlb3JseHkKICovCmltcG9ydCB7IFByb3AsIEluamVjdCwgQ29tcG9uZW50LCBWdWUgYXMgVnVlJDEsIFdhdGNoLCBQcm92aWRlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUsIGdldENsZWFuVVJMIH0gZnJvbSAnQHZzc3VlL3V0aWxzJzsKaW1wb3J0IFZ1ZUkxOG4gZnJvbSAndnVlLWkxOG4nOwovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLg0KTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZQ0KdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUNCkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoNClRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkNCktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRUQNCldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsDQpNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULg0KDQpTZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMNCmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCgpmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLAogICAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgICAgZDsKICBpZiAoKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihSZWZsZWN0KSkgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSAiZnVuY3Rpb24iKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7ZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjsKICB9CiAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjsKfQoKdmFyIHNjcmlwdCA9IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdJY29uZm9udCcKfSk7CgpmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQodGVtcGxhdGUsIHN0eWxlLCBzY3JpcHQsIHNjb3BlSWQsIGlzRnVuY3Rpb25hbFRlbXBsYXRlLCBtb2R1bGVJZGVudGlmaWVyCi8qIHNlcnZlciBvbmx5ICovCiwgc2hhZG93TW9kZSwgY3JlYXRlSW5qZWN0b3IsIGNyZWF0ZUluamVjdG9yU1NSLCBjcmVhdGVJbmplY3RvclNoYWRvdykgewogIGlmICh0eXBlb2Ygc2hhZG93TW9kZSAhPT0gJ2Jvb2xlYW4nKSB7CiAgICBjcmVhdGVJbmplY3RvclNTUiA9IGNyZWF0ZUluamVjdG9yOwogICAgY3JlYXRlSW5qZWN0b3IgPSBzaGFkb3dNb2RlOwogICAgc2hhZG93TW9kZSA9IGZhbHNlOwogIH0gLy8gVnVlLmV4dGVuZCBjb25zdHJ1Y3RvciBleHBvcnQgaW50ZXJvcC4KCgogIHZhciBvcHRpb25zID0gdHlwZW9mIHNjcmlwdCA9PT0gJ2Z1bmN0aW9uJyA/IHNjcmlwdC5vcHRpb25zIDogc2NyaXB0OyAvLyByZW5kZXIgZnVuY3Rpb25zCgogIGlmICh0ZW1wbGF0ZSAmJiB0ZW1wbGF0ZS5yZW5kZXIpIHsKICAgIG9wdGlvbnMucmVuZGVyID0gdGVtcGxhdGUucmVuZGVyOwogICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSB0ZW1wbGF0ZS5zdGF0aWNSZW5kZXJGbnM7CiAgICBvcHRpb25zLl9jb21waWxlZCA9IHRydWU7IC8vIGZ1bmN0aW9uYWwgdGVtcGxhdGUKCiAgICBpZiAoaXNGdW5jdGlvbmFsVGVtcGxhdGUpIHsKICAgICAgb3B0aW9ucy5mdW5jdGlvbmFsID0gdHJ1ZTsKICAgIH0KICB9IC8vIHNjb3BlZElkCgoKICBpZiAoc2NvcGVJZCkgewogICAgb3B0aW9ucy5fc2NvcGVJZCA9IHNjb3BlSWQ7CiAgfQoKICB2YXIgaG9vazsKCiAgaWYgKG1vZHVsZUlkZW50aWZpZXIpIHsKICAgIC8vIHNlcnZlciBidWlsZAogICAgaG9vayA9IGZ1bmN0aW9uIGhvb2soY29udGV4dCkgewogICAgICAvLyAyLjMgaW5qZWN0aW9uCiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IC8vIGNhY2hlZCBjYWxsCiAgICAgIHRoaXMuJHZub2RlICYmIHRoaXMuJHZub2RlLnNzckNvbnRleHQgfHwgLy8gc3RhdGVmdWwKICAgICAgdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuJHZub2RlICYmIHRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0OyAvLyBmdW5jdGlvbmFsCiAgICAgIC8vIDIuMiB3aXRoIHJ1bkluTmV3Q29udGV4dDogdHJ1ZQoKICAgICAgaWYgKCFjb250ZXh0ICYmIHR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9fICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGNvbnRleHQgPSBfX1ZVRV9TU1JfQ09OVEVYVF9fOwogICAgICB9IC8vIGluamVjdCBjb21wb25lbnQgc3R5bGVzCgoKICAgICAgaWYgKHN0eWxlKSB7CiAgICAgICAgc3R5bGUuY2FsbCh0aGlzLCBjcmVhdGVJbmplY3RvclNTUihjb250ZXh0KSk7CiAgICAgIH0gLy8gcmVnaXN0ZXIgY29tcG9uZW50IG1vZHVsZSBpZGVudGlmaWVyIGZvciBhc3luYyBjaHVuayBpbmZlcmVuY2UKCgogICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cykgewogICAgICAgIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKTsKICAgICAgfQogICAgfTsgLy8gdXNlZCBieSBzc3IgaW4gY2FzZSBjb21wb25lbnQgaXMgY2FjaGVkIGFuZCBiZWZvcmVDcmVhdGUKICAgIC8vIG5ldmVyIGdldHMgY2FsbGVkCgoKICAgIG9wdGlvbnMuX3NzclJlZ2lzdGVyID0gaG9vazsKICB9IGVsc2UgaWYgKHN0eWxlKSB7CiAgICBob29rID0gc2hhZG93TW9kZSA/IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3JTaGFkb3coY29udGV4dCwgdGhpcy4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KSk7CiAgICB9IDogZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgICAgc3R5bGUuY2FsbCh0aGlzLCBjcmVhdGVJbmplY3Rvcihjb250ZXh0KSk7CiAgICB9OwogIH0KCiAgaWYgKGhvb2spIHsKICAgIGlmIChvcHRpb25zLmZ1bmN0aW9uYWwpIHsKICAgICAgLy8gcmVnaXN0ZXIgZm9yIGZ1bmN0aW9uYWwgY29tcG9uZW50IGluIHZ1ZSBmaWxlCiAgICAgIHZhciBvcmlnaW5hbFJlbmRlciA9IG9wdGlvbnMucmVuZGVyOwoKICAgICAgb3B0aW9ucy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXJXaXRoU3R5bGVJbmplY3Rpb24oaCwgY29udGV4dCkgewogICAgICAgIGhvb2suY2FsbChjb250ZXh0KTsKICAgICAgICByZXR1cm4gb3JpZ2luYWxSZW5kZXIoaCwgY29udGV4dCk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAvLyBpbmplY3QgY29tcG9uZW50IHJlZ2lzdHJhdGlvbiBhcyBiZWZvcmVDcmVhdGUgaG9vawogICAgICB2YXIgZXhpc3RpbmcgPSBvcHRpb25zLmJlZm9yZUNyZWF0ZTsKICAgICAgb3B0aW9ucy5iZWZvcmVDcmVhdGUgPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgaG9vaykgOiBbaG9va107CiAgICB9CiAgfQoKICByZXR1cm4gc2NyaXB0Owp9Cgp2YXIgaXNPbGRJRSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9tc2llIFs2LTldXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fID0gc2NyaXB0OwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18oX2gsIF92bSkgewogIHZhciBfYyA9IF92bS5fYzsKICByZXR1cm4gX2MoJ3N2ZycsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBmYWxzZSwKICAgICAgZXhwcmVzc2lvbjogImZhbHNlIgogICAgfV0KICB9LCBbX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWJpdGJ1Y2tldCIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTU3OS41NTIyNDY0IDQ4OS40NTI0OTQ5M3E0LjgzNzE4MDggMzguMzg1MzcxNzMtMzAuODE3NTI0MjcgNjEuNTU3MDI4Mjd0LTY3Ljk1NDU5MDkzIDMuNjY2ODk0OTNxLTIzLjc5NTgwOTA3LTEwLjM3NjUzMzMzLTMyLjYxMTk2MTYtMzUuMzQyNjI4MjZ0LTAuMzEyMDc1NzMtNTAuMDEwMjA5MDcgMzEuNjc1NzMzMzMtMzUuMzQyNjI4MjdxMjEuOTIzMzUyNTMtMTEuMDAwNjg1ODcgNDQuMTU4NzgwOC03LjMzMzc5MDkzdDM5LjAwOTUyNDI3IDIxLjYxMTI3NTczIDE2Ljc3NDA5NDkzIDQxLjExNjAzODR6TTY0Ny4xOTQ3NjA1MyA0NzYuNjU3MzcxNzNxLTguNTA0MDc1NzMtNjUuMjIzOTI0MjctNjguODkwODE5Mi05OS45NDI0dC0xMjAuMDcxMzE0MTMtNy45NTc5NDI0cS0zOC4zODUzNzE3MyAxNy4wODYxNzE3My02MS4yNDQ5NTI1MyA1My45MTExNjE2dC0yMS4wNjUxNDI0IDc4Ljk1NTI3NTc0cTIuNDE4NTkwOTMgNTUuNDcxNTQyNCA0Ny4yMDE1MjQyNiA5NC40ODEwNjY2NnQxMDAuODc4NjI4MjcgMzQuMTcyMzQyNHE1NS40NzE1NDI0LTQuODM3MTgwOCA5Mi42MDg2MDkwNy01MS4xODA0OTQ5M3QzMC41MDU0NDc0Ni0xMDIuNDM5MDA5MDd6TTc5Mi45MzQzNDEzMyAxNDYuMzI0NzI0MjdxLTEyLjE3MDk3MTczLTE2LjQ2MjAxOTItMzQuMTcyMzQyNC0yNy4xNTA2MjgyN3QtMzUuMzQyNjI4MjYtMTMuNDE5Mjc1NzMtNDMuMzAwNTcxNzQtNy42NDU4NjY2N3EtMTc3LjMzNzI5NDkzLTI4LjYzMjk5MDkzLTM0NS4wMDAyMjgyNiAxLjI0ODMwNTA3LTI2LjIxNDQgNC4yOTEwNDc0Ny00MC4yNTc4MjgyNyA3LjMzMzc5MDkzdC0zMy41NDgxOTA5MyAxMy40MTkyNzU3My0zMC41MDU0NDc0NyAyNi4yMTQ0cTE4LjI1NjQ1NzYgMTcuMDg2MTcxNzMgNDYuMzQzMzE0MTMgMjcuNjk2NzYxNnQ0NC43ODI5MzMzNCAxMy40MTkyNzU3NCA1My4zNjUwMjgyNiA3LjAyMTcxNDEzcTEzOC45NTE5MjQyNyAxNy43MTAzMjQyNyAyNzMuMDY2NjY2NjcgMC42MjQxNTI1MyAzOC4zODUzNzE3My00LjgzNzE4MDggNTQuNTM1MzE0MTMtNy4zMzM3OTA5M3Q0NC4xNTg3ODA4LTEzLjEwNzIgNDUuNzE5MTYxNi0yOC4zMjA5MTQxM3pNODI3LjY1MjgxODEzIDc3Ny4xMDg3MjQyN3EtNC44MzcxODA4IDE1LjgzNzg2NjY3LTkuNDQwMzA1MDYgNDYuNjU1MzkwOTN0LTguNTA0MDc1NzQgNTEuMTgwNDk0OTMtMTcuMzk4MjQ3NDYgNDIuNjc2NDE5Mi0zNS4zNDI2MjgyNyAzNC40MDY0cS01Mi40Mjg4IDI5LjI1NzE0MjQtMTE1LjQ2ODE5MDkzIDQzLjYxMjY0NzQ3dC0xMjMuMTE0MDU3NiAxMy40MTkyNzU3My0xMjIuODAxOTgwOC0xMS4zMTI3NjE2cS0yOC4wMDg4Mzg0LTQuODM3MTgwOC00OS42OTgxMzMzNC0xMS4wMDA2ODU4NnQtNDYuNjU1MzkwOTMtMTYuNDYyMDE5Mi00NC40NzA4NTc2LTI2LjUyNjQ3NTc0LTMxLjY3NTczMzMzLTM3LjQ0OTE0MjRxLTE1LjIxMzcxNDEzLTU4LjUxNDI4NTg3LTM0LjcxODQ3NTc0LTE3Ny45NjE0NDc0NmwzLjY2Njg5NDk0LTkuNzUyMzgwOCAxMS4wMDA2ODU4Ni01LjQ2MTMzMzM0cTEzNS45MDkxODA4IDkwLjE5MDAxOTIgMzA4LjcyMTM3MTc0IDkwLjE5MDAxOTJ0MzA5LjM0NTUyNDI2LTkwLjE5MDAxOTJxMTIuNzk1MTI0MjcgMy42NjY4OTQ5MyAxNC41ODk1NjE2IDE0LjA0MzQyODI3dC0zLjA0Mjc0MjQgMjcuNDYyNzA1MDctNC44MzcxODA4IDIyLjU0NzUwNTA2ek05MzcuOTcxNzUxNDcgMTkxLjQxOTczMzMzcS0xNS44Mzc4NjY2NyAxMDEuODE0ODU3Ni02Ny42NDI1MTQxNCAzOTkuMjIzNDY2NjctMy4wNDI3NDI0IDE4LjI1NjQ1NzYtMTYuNDYyMDE5MiAzNC4xNzIzNDI0dC0yNi41MjY0NzU3MyAyNC4zNDE5NDI0LTMzLjIzNjExNDEzIDE4Ljg4MDYwOTA3cS0xNTMuNjE5NTA1MDcgNzYuNzcwNzQyNC0zNzEuODM4NzgwOCA1My42NzcxMDUwNi0xNTEuMTIyODk0OTMtMTYuNDYyMDE5Mi0yNDAuMTQyNjI4MjctODQuNzI4Njg1ODYtOS4xMjgyMjgyNy03LjMzMzc5MDkzLTE1LjUyNTc5MDkzLTE2LjE0OTk0MjR0LTEwLjM3NjUzMzM0LTIxLjI5OTItNS40NjEzMzMzMy0yMC43NTMwNjY2Ny0zLjY2Njg5NDkzLTI0LjEwNzg4NTg3LTMuMzU0ODE5Mi0yMS4yOTkycS01LjQ2MTMzMzMzLTMwLjUwNTQ0NzQ3LTE2LjE0OTk0MjQtOTEuNDM4MzI0MjZ0LTE3LjA4NjE3MTc0LTk4LjQ2MDAzODQtMTQuMzU1NTA1MDYtODkuODc3OTQyNC0xMy40MTkyNzU3NC05Ni4yNzU1MDUwN3ExLjc5NDQzODQtMTUuODM3ODY2NjcgMTAuNjg4NjA5MDctMjkuNTY5MjE5MnQxOS4xOTI2ODU4Ny0yMi44NTk1ODA4IDI3LjQ2MjcwNTA2LTE4LjI1NjQ1NzYgMjguMDA4ODM4NC0xMy43MzEzNTI1MyAyOS4yNTcxNDI0LTExLjMxMjc2MTZxNzYuMjI0NjA5MDctMjguMDA4ODM4NCAxOTAuNzU2NTcxNzQtMzkuMDA5NTI0MjcgMjMxLjAxNDQtMjIuNTQ3NTA1MDcgNDEyLjAxODU5MDkzIDMwLjUwNTQ0NzQ3IDk0LjQ4MTA2NjY3IDI4LjAwODgzODQgMTMxLjA3MiA3NC4zNTIxNTI1MyA5Ljc1MjM4MDggMTIuMTcwOTcxNzMgMTAuMDY0NDU3NiAzMS4wNTE1ODA4dC0zLjM1NDgxOTIgMzIuOTI0MDM4NHoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1naXRlYSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTE4NC4zMTg2ODk4NSAyMzYuMTA4NjA3NDJDMTA2Ljk0ODMyNjY3IDIzNS45NDA4NjY0OCAzLjMyNjU1NTA4IDI4NS4xMzA4MDQ2OCA5LjAyOTczNjY1IDQwOC40NjIwOTkzNmM4LjkzMjE4ODI3IDE5Mi42NTAxMDc4NyAyMDYuMzIwOTY4NDUgMjEwLjUxNDQ4NDQgMjg1LjIwMDk5NzI1IDIxMi4wNjYwODQ1MyA4LjYzODY0MTg2IDM2LjE0ODEwNDk2IDEwMS40ODMwNzc2NiAxNjAuNzc5Mzg4ODMgMTcwLjIxNDc5ODk4IDE2Ny4zMjEyNzMyMWgzMDEuMDk0NDIxNzdjMTgwLjU3Mjc4Mjg4LTExLjk5MzQ1NDk5IDMxNS43NzE3MjYxMS01NDYuMDc5NjAzNTkgMjE1LjU0NjcwMjE3LTU0OC4wOTI0OTEwOS0xNjUuNzY5NjcyMSA3Ljc5OTkzOTA2LTI2NC4wMjM3NDMwNSAxMS43NDE4NDQwNS0zNDguMjcxNDcxNTEgMTIuNDEyODA1OTF2MTY2LjY5MjI0NTg1bC0yNi4yNTE0MDg0My0xMS42MTYwMzc2MS0wLjE2NzczOTk3LTE1NC45OTIzMzcyOGMtOTYuNzAyNDY5ODUtMC4wNDE5MzU0OC0xODEuODMwODM3NTctNC41Mjg5OTY4Ny0zNDMuNDA2OTk0Ny0xMi40OTY2NzY4Ny0yMC4yMTI3NDQ5Ni0wLjEyNTgwNTQ3LTQ4LjM5MzE2OTkyLTMuNTY0NDg4Ni03OC42NzAzNTIzNi0zLjY0ODM1ODU5eiBtMTAuOTQ1MDc1NzcgNjguMTQ0NjI4NDloOS4yMjU3MzM3MWMxMC45ODcwMTEyNCA5OC43NTcyOTI4MyAyOC44NTEzODc3OCAxNTYuNTAyMDAyOTEgNjQuOTk5NDkyNzQgMjQ0LjczMzU3MTg1LTkyLjI1NzM0Mzk0LTEwLjkwMzE0MDI5LTE3MC43NTk5NTYzNC0zNy42OTk3MDUwOS0xODUuMTg1NjQ5NzQtMTM3Ljc1Njk4ODA5LTcuNDY0NDU4MTMtNTEuNzg5OTE3NTcgMTcuNjk2NjM1NTgtMTA1Ljg0NDMzNDU2IDExMC45NjA0MjMyOS0xMDcuMDE4NTE4Mjd6IG0zNTguODM5MTMwODcgOTcuMDc5ODg3MjNjNi4yOTAyNzM0MyAwLjA4Mzg2OTk5IDEyLjcwNjM1MjMzIDEuMjU4MDU0NjggMTguNzQ1MDE0ODIgNC4wMjU3NzQ5OWwzMS40MDk0MzI2MyAxMy41NDUwNTUxMy0yMi41MTkxNzg4NyA0MS4wNTQ1MTgyNGEyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC0xMC4xMDYzNzI5NyAxLjU5MzUzNTYxIDI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTE2Ljk4MzczODI1IDMyLjAzODQ1OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCA0LjY5NjczNzgxIDcuMjk2NzE3MThsLTM4LjgzMTk1NTI4IDcwLjcwMjY3MzMzYTI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTkuMzA5NjA0NjcgMS41OTM1MzY1OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC0xNi45ODM3MzgyNSAzMi4wMzg0NTkgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgMzYuMDY0MjM0OTcgMTUuMDk2NjU2MjMgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgMTYuOTQxODAyNzYtMzIuMDgwMzk0NDkgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAtNi42MjU3NTQzNC05LjIyNTczNDY4bDM3LjgyNTUxMDU2LTY4Ljg1NzUyNTgxYTI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwIDEyLjI4NzAwMDQ0LTEuMjU4MDU0NjkgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgOC45MzIxODgyNi00LjY5NjczNzgzYzE0LjU5MzQzNDM1IDYuMTIyNTMyNDggMjYuNTQ0OTUzODYgMTEuMTEyODE2NzEgMzUuMTQxNjYxMjIgMTUuMzQ4MjY3MTcgMTIuOTE2MDI3NzggNi4zNzQxNDM0MSAxNy40ODY5NjAxMiAxMC42MDk1OTQ4NSAxOC44NzA4MjAyNyAxNS4zMDYzMzE2OSAxLjM4Mzg2MDE1IDQuNjEyODY2ODUtMC4xMjU4MDU0NyAxMy41MDMxMjA2Mi03LjQyMjUyMjYzIDI5LjEwMjk5ODcyLTUuNDUxNTcwNjMgMTEuNjE2MDM4NTktMTQuNDY3NjI4ODkgMjguMDk2NTU0OTctMjUuMTE5MTU4MjMgNDcuNTEyNTMxNjRhMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAtMTAuNTI1NzI0ODYgMS41OTM1MzY1OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC0xNi45ODM3MzgyNiAzMi4wMzg0NTkgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgMzYuMDY0MjM0OTggMTUuMDk2NjU2MjMgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgMTYuOTQxODAyNzgtMzIuMDM4NDU5MDEgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAtNS43NDUxMTYwOC04LjQ3MDkwMTg4YzEwLjUyNTcyMzg4LTE5LjIwNjMwMTIyIDE5LjU4MzcxNzYyLTM1LjcyODc1MzA4IDI1LjQxMjcwNDY1LTQ4LjE0MTU1ODk3IDcuODgzODA5MDQtMTYuODU3OTMyNzkgMTEuOTkzNDU0OTktMjkuMzk2NTQ0MTYgOC4zODcwMzA5MS00MS41MTU4MDQ2My0zLjYwNjQyMzExLTEyLjExOTI2MDQ2LTE0LjY3NzMwNDM0LTIwLjAwMzA2OTUtMjkuMzU0NjA5NjYtMjcuMjU3ODUyMTctOS42NDUwODU2LTQuNzM4NjcyMzMtMjEuNjgwNDc2MDctOS43NzA4OTEwNi0zNi4wNjQyMzM5OS0xNS44MDk1NTM1N2EyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC0xLjU5MzUzNTYyLTEwLjAyMjUwMiAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC02LjA4MDU5Nzk2LTguNzY0NDQ4M2wyMi4xNDE3NjI0Ni00MC4zODM1NTU0MSAxMjIuNjE4Mzk2MzggNTIuOTY0MTAyMjdjMjIuMTQxNzYyNDcgOS42MDMxNTExIDMxLjI4MzYyNjIgMzMuMTI4NzczNzIgMjAuNTQ4MjI2ODUgNTIuODM4Mjk2OGwtODQuMjg5NjYzOTMgMTU0LjMyMTM3NTQ0Yy0xMC43NzczMzQ4MiAxOS42Njc1ODg1Ny0zNy4yMzg0MTg2OSAyNy44MDMwMDg1NS01OS4zODAxODExOCAxOC4yNDE3OTI5M2wtMTczLjQ4NTc0MTE1LTc0Ljk4MDA1OTI3Yy0yMi4xNDE3NjI0Ny05LjU2MTIxNTYtMzEuMzI1NTYxNjctMzMuMTI4NzczNzItMjAuNTQ4MjI2ODctNTIuODM4Mjk2NzlsODQuMjg5NjYzOTUtMTU0LjI3OTQzOTk1YzcuMzgwNTg3MTYtMTMuNTQ1MDU1MTMgMjIuMjI1NjMyNDYtMjEuNTk2NjA1MTEgMzcuOTUxMzE3LTIyLjIyNTYzMjQ2aDIuNjgzODQ5MzV6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tZ2l0ZWUiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk05NzguNDA0Mjc1IDQwOS41NjE2MDRINDU1LjA2MTMzOGMtMjUuMTE3NjQ1IDAtNDUuNDk5NzM0IDIwLjM4MjA4OS00NS40OTk3MzQgNDUuNDk5NzM0bC0wLjAzMTk5NyAxMTMuNzgxMzMzYzAgMjUuMTE3NjQ1IDIwLjM1MDA5MiA0NS40OTk3MzQgNDUuNDk5NzM0IDQ1LjUzMTczMWgzMTguNTk0MTMyYzI1LjExNzY0NSAwIDQ1LjQ5OTczNCAyMC4zODIwODkgNDUuNDk5NzM0IDQ1LjQ5OTczNXYyMi43NDk4NjdhMTM2LjUzMTIgMTM2LjUzMTIgMCAwIDEtMTM2LjUzMTIgMTM2LjUzMTJIMjUwLjI0ODUzOWE0NS40OTk3MzQgNDUuNDk5NzM0IDAgMCAxLTQ1LjQ5OTczNC00NS40OTk3MzRWMzQxLjM0Mzk5OWExMzYuNTMxMiAxMzYuNTMxMiAwIDAgMSAxMzYuNTMxMi0xMzYuNTMxMkw5NzguMzA4Mjg0IDIwNC43ODA4MDJjMjUuMTE3NjQ1IDAgNDUuNDk5NzM0LTIwLjM1MDA5MiA0NS40OTk3MzQtNDUuNDY3NzM4TDEwMjMuOTA0MDA5IDQ1LjUzMTczMWgwLjAzMTk5N0E0NS40OTk3MzQgNDUuNDk5NzM0IDAgMCAwIDk3OC40NjgyNjkgMGgtMC4wMzE5OTdMMzQxLjM0Mzk5OSAwLjAzMTk5N0MxNTIuODQ5NjcgMC4wMzE5OTcgMC4wMzE5OTcgMTUyLjg0OTY3IDAuMDMxOTk3IDM0MS4zNDM5OTl2NjM3LjA5MjI3M2MwIDI1LjExNzY0NSAyMC4zODIwODkgNDUuNDk5NzM0IDQ1LjQ5OTczNCA0NS40OTk3MzRoNjcxLjIzMzA3MmEzMDcuMTcxMjAzIDMwNy4xNzEyMDMgMCAwIDAgMzA3LjE3MTIwMy0zMDcuMTcxMjAzdi0yNjEuNjcxNDY4YzAtMjUuMTE3NjQ1LTIwLjM4MjA4OS00NS40OTk3MzQtNDUuNDk5NzM0LTQ1LjQ5OTczNHoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1naXRodWIiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk01MTIgMjAuNDQyNWMtMjc4LjMzNCAwLTUwNCAyMjUuNjM0NS01MDQgNTA0IDAgMjIyLjY3MzUgMTQ0LjQyNzUgNDExLjYxMDUgMzQ0LjY3MyA0NzguMjMzIDI1LjIgNC42NjIgMzQuNDYxLTEwLjkzMDUgMzQuNDYxLTI0LjI1NSAwLTEyLjAwMTUtMC40NzI1LTUxLjcyMy0wLjY5My05My44Mzg1LTE0MC4yMzggMzAuNDkyLTE2OS44MTY1LTU5LjQ3Mi0xNjkuODE2NS01OS40NzItMjIuOTMyLTU4LjI0MzUtNTUuOTQ0LTczLjc0MTUtNTUuOTQ0LTczLjc0MTUtNDUuNzM4LTMxLjI3OTUgMy40NjUtMzAuNjQ5NSAzLjQ2NS0zMC42NDk1IDUwLjU4OSAzLjU1OTUgNzcuMjM4IDUxLjk0MzUgNzcuMjM4IDUxLjk0MzUgNDQuOTUwNSA3Ny4wNDkgMTE3LjkwNDUgNTQuNzc4NSAxNDYuNjY0IDQxLjg5NSA0LjUwNDUtMzIuNTcxIDE3LjU3Ny01NC44MSAzMi4wMDQtNjcuNDEtMTExLjk1MS0xMi43MjYtMjI5LjYzNS01NS45NzU1LTIyOS42MzUtMjQ5LjA3MDUgMC01NS4wMzA1IDE5LjY4NzUtOTkuOTgxIDUxLjk0MzUtMTM1LjI5MjUtNS4yMjktMTIuNjk0NS0yMi40OTEtNjMuOTQ1IDQuODgyNS0xMzMuMzcxIDAgMCA0Mi4zMzYtMTMuNTQ1IDEzOC42MzE1IDUxLjY2IDQwLjE5NC0xMS4xODI1IDgzLjMxNzUtMTYuNzU4IDEyNi4xNTc1LTE2Ljk3ODUgNDIuODA4NSAwLjE4OSA4NS45NjM1IDUuNzk2IDEyNi4yNTIgMTYuOTc4NSA5Ni4yMDEtNjUuMjA1IDEzOC40NDI1LTUxLjY2IDEzOC40NDI1LTUxLjY2IDI3LjQzNjUgNjkuNDI2IDEwLjE3NDUgMTIwLjY3NjUgNC45NDU1IDEzMy4zNzEgMzIuMzE5IDM1LjI4IDUxLjg4MDUgODAuMjYyIDUxLjg4MDUgMTM1LjI5MjUgMCAxOTMuNTY3NS0xMTcuOTA0NSAyMzYuMTg3LTIzMC4xMzkgMjQ4LjY5MjUgMTguMDgxIDE1LjY1NTUgMzQuMTc3NSA0Ni4zMDUgMzQuMTc3NSA5My4zMzQ1IDAgNjcuNDQxNS0wLjU5ODUgMTIxLjcxNi0wLjU5ODUgMTM4LjMxNjUgMCAxMy40MTkgOS4wNzIgMjkuMTM3NSAzNC42MTg1IDI0LjE5MiAyMDAuMTUxLTY2LjcxNyAzNDQuMzg5NS0yNTUuNTU5NSAzNDQuMzg5NS00NzguMTcgMC0yNzguMzY1NS0yMjUuNjY2LTUwNC01MDQtNTA0eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWdpdGxhYiIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTY2LjYxMzc1OTg2IDQwNS4xMTYwMDA0Mkw1MTIuMTEzNzYwMjggOTc2LjAzOTk5OTcyIDIzLjg0NTc2IDYyMS42NTU5OTk1OGEzOS4zMTIgMzkuMzEyIDAgMCAxLTE0LjA3NjAwMDQyLTQzLjMwNzk5OTQ0bDU2LjgwODAwMDctMTczLjI2ODAwMDI4eiBtMjU5Ljg4NDAwMDE0IDBoMzcxLjI2ODAwMDE0TDUxMi4xNDk3NTk4NiA5NzYuMDM5OTk5NzJ6TTIxNS4xMTM3NiA2MC44ODQwMDA0MmwxMTEuMzg0IDM0NC4yMzJINjYuNjEzNzU5ODZsMTExLjM4NC0zNDQuMjMyYTE5LjcyODAwMDE0IDE5LjcyODAwMDE0IDAgMCAxIDM3LjExNjAwMDE0IDB6IG03NDIuNDk5OTk5NzIgMzQ0LjIzMmw1Ni44MDgwMDA3IDE3My4yNjc5OTkzYTM5LjIzOTk5OTg2IDM5LjIzOTk5OTg2IDAgMCAxLTE0LjA3NjAwMDQyIDQzLjMwODAwMDQybC00ODguMjY4MDAwMjggMzU0LjM4NDAwMDE0IDQ0NS41MDAwMDA0Mi01NzAuOTI0MDAwMjh6IG0wIDBoLTI1OS44ODQwMDAxNGwxMTEuMzg0LTM0NC4yMzJhMTkuNzI4MDAwMTQgMTkuNzI4MDAwMTQgMCAwIDEgMzcuMTE2MDAwMTQgMHoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1sb2FkaW5nIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNODQzLjMwNyA3NDIuMjRjMCAzLjIxNyAyLjYwNyA1LjgyNCA1LjgyNCA1LjgyNHM1LjgyNC0yLjYwNyA1LjgyNC01LjgyNGE1LjgyMyA1LjgyMyAwIDAgMC01LjgyNC01LjgyNCA1LjgyMyA1LjgyMyAwIDAgMC01LjgyNCA1LjgyNHpNNzE0LjczMSA4NzQuOTEyYzAgNi4zOTggNS4xODYgMTEuNTg0IDExLjU4NCAxMS41ODRzMTEuNTg0LTUuMTg2IDExLjU4NC0xMS41ODQtNS4xODYtMTEuNTg0LTExLjU4NC0xMS41ODQtMTEuNTg0IDUuMTg2LTExLjU4NCAxMS41ODR6TTU0MS40MTkgOTQzLjJjMCA5LjYxNCA3Ljc5NCAxNy40MDggMTcuNDA4IDE3LjQwOHMxNy40MDgtNy43OTQgMTcuNDA4LTE3LjQwOC03Ljc5NC0xNy40MDgtMTcuNDA4LTE3LjQwOC0xNy40MDggNy43OTQtMTcuNDA4IDE3LjQwOHogbS0xODYuNTYtOS4xNTJjMCAxMi43OTUgMTAuMzczIDIzLjE2OCAyMy4xNjggMjMuMTY4czIzLjE2OC0xMC4zNzMgMjMuMTY4LTIzLjE2OC0xMC4zNzMtMjMuMTY4LTIzLjE2OC0yMy4xNjgtMjMuMTY4IDEwLjM3My0yMy4xNjggMjMuMTY4ek0xODkuMzU1IDg0OS4xMmMwIDE2LjAxMiAxMi45OCAyOC45OTIgMjguOTkyIDI4Ljk5MnMyOC45OTItMTIuOTggMjguOTkyLTI4Ljk5Mi0xMi45OC0yOC45OTItMjguOTkyLTI4Ljk5Mi0yOC45OTIgMTIuOTgtMjguOTkyIDI4Ljk5MnpNNzQuNzMxIDcwNC43MzZjMCAxOS4yMjggMTUuNTg4IDM0LjgxNiAzNC44MTYgMzQuODE2czM0LjgxNi0xNS41ODggMzQuODE2LTM0LjgxNi0xNS41ODgtMzQuODE2LTM0LjgxNi0zNC44MTYtMzQuODE2IDE1LjU4OC0zNC44MTYgMzQuODE2eiBtLTQzLjAwOC0xNzcuMjhjMCAyMi40MSAxOC4xNjYgNDAuNTc2IDQwLjU3NiA0MC41NzZzNDAuNTc2LTE4LjE2NiA0MC41NzYtNDAuNTc2LTE4LjE2Ni00MC41NzYtNDAuNTc2LTQwLjU3Ni00MC41NzYgMTguMTY2LTQwLjU3NiA0MC41NzZ6IG0zNS4zOTItMTc2LjEyOGMwIDI1LjYyNiAyMC43NzQgNDYuNCA0Ni40IDQ2LjRzNDYuNC0yMC43NzQgNDYuNC00Ni40YzAtMjUuNjI2LTIwLjc3NC00Ni40LTQ2LjQtNDYuNC0yNS42MjYgMC00Ni40IDIwLjc3NC00Ni40IDQ2LjR6IG0xMDYuMTc2LTE0Mi4wMTZjMCAyOC44NDMgMjMuMzgxIDUyLjIyNCA1Mi4yMjQgNTIuMjI0czUyLjIyNC0yMy4zODEgNTIuMjI0LTUyLjIyNGMwLTI4Ljg0My0yMy4zODEtNTIuMjI0LTUyLjIyNC01Mi4yMjQtMjguODQzIDAtNTIuMjI0IDIzLjM4MS01Mi4yMjQgNTIuMjI0eiBtMTU1LjkwNC04MS4zNDRjMCAzMi4wMjQgMjUuOTYgNTcuOTg0IDU3Ljk4NCA1Ny45ODRzNTcuOTg0LTI1Ljk2IDU3Ljk4NC01Ny45ODQtMjUuOTYtNTcuOTg0LTU3Ljk4NC01Ny45ODQtNTcuOTg0IDI1Ljk2LTU3Ljk4NCA1Ny45ODR6IG0xNzUuMTA0LTUuMDU2YzAgMzUuMjQgMjguNTY4IDYzLjgwOCA2My44MDggNjMuODA4czYzLjgwOC0yOC41NjggNjMuODA4LTYzLjgwOGMwLTM1LjI0LTI4LjU2OC02My44MDgtNjMuODA4LTYzLjgwOC0zNS4yNCAwLTYzLjgwOCAyOC41NjgtNjMuODA4IDYzLjgwOHogbTE2MC4zMiA3Mi4xMjhjMCAzOC40MjEgMzEuMTQ3IDY5LjU2OCA2OS41NjggNjkuNTY4czY5LjU2OC0zMS4xNDcgNjkuNTY4LTY5LjU2OC0zMS4xNDctNjkuNTY4LTY5LjU2OC02OS41NjgtNjkuNTY4IDMxLjE0Ny02OS41NjggNjkuNTY4eiBtMTEzLjkyIDEzNS40ODhjMCA0MS42MzggMzMuNzU0IDc1LjM5MiA3NS4zOTIgNzUuMzkyczc1LjM5Mi0zMy43NTQgNzUuMzkyLTc1LjM5Mi0zMy43NTQtNzUuMzkyLTc1LjM5Mi03NS4zOTItNzUuMzkyIDMzLjc1NC03NS4zOTIgNzUuMzkyeiBtNDUuMzEyIDE3NS40ODhjMCA0NC44NTQgMzYuMzYyIDgxLjIxNiA4MS4yMTYgODEuMjE2czgxLjIxNi0zNi4zNjIgODEuMjE2LTgxLjIxNmMwLTQ0Ljg1NC0zNi4zNjItODEuMjE2LTgxLjIxNi04MS4yMTYtNDQuODU0IDAtODEuMjE2IDM2LjM2Mi04MS4yMTYgODEuMjE2eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWxpa2UiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk04ODUuOSA1MzMuN2MxNi44LTIyLjIgMjYuMS00OS40IDI2LjEtNzcuNyAwLTQ0LjktMjUuMS04Ny40LTY1LjUtMTExLjFhNjcuNjcgNjcuNjcgMCAwIDAtMzQuMy05LjNINTcyLjRsNi0xMjIuOWMxLjQtMjkuNy05LjEtNTcuOS0yOS41LTc5LjQtMjAuNS0yMS41LTQ4LjEtMzMuNC03Ny45LTMzLjQtNTIgMC05OCAzNS0xMTEuOCA4NS4xbC04NS45IDMxMUgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjM2NGMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2MDEuM2M5LjIgMCAxOC4yLTEuOCAyNi41LTUuNCA0Ny42LTIwLjMgNzguMy02Ni44IDc4LjMtMTE4LjQgMC0xMi42LTEuOC0yNS01LjQtMzcgMTYuOC0yMi4yIDI2LjEtNDkuNCAyNi4xLTc3LjcgMC0xMi42LTEuOC0yNS01LjQtMzcgMTYuOC0yMi4yIDI2LjEtNDkuNCAyNi4xLTc3LjctMC4yLTEyLjYtMi0yNS4xLTUuNi0zNy4xek0xODQgODUyVjU2OGg4MXYyODRoLTgxeiBtNjM2LjQtMzUzbC0yMS45IDE5IDEzLjkgMjUuNGM0LjYgOC40IDYuOSAxNy42IDYuOSAyNy4zIDAgMTYuNS03LjIgMzIuMi0xOS42IDQzbC0yMS45IDE5IDEzLjkgMjUuNGM0LjYgOC40IDYuOSAxNy42IDYuOSAyNy4zIDAgMTYuNS03LjIgMzIuMi0xOS42IDQzbC0yMS45IDE5IDEzLjkgMjUuNGM0LjYgOC40IDYuOSAxNy42IDYuOSAyNy4zIDAgMjIuNC0xMy4yIDQyLjYtMzMuNiA1MS44SDMyOVY1NjQuOGw5OS41LTM2MC41YzUuMi0xOC45IDIyLjUtMzIuMiA0Mi4yLTMyLjMgNy42IDAgMTUuMSAyLjIgMjEuMSA2LjcgOS45IDcuNCAxNS4yIDE4LjYgMTQuNiAzMC41bC05LjYgMTk4LjRoMzE0LjRDODI5IDQxOC41IDg0MCA0MzYuOSA4NDAgNDU2YzAgMTYuNS03LjIgMzIuMS0xOS42IDQzeiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLXVubGlrZSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTg4NS45IDQ5MC4zYzMuNi0xMiA1LjQtMjQuNCA1LjQtMzcgMC0yOC4zLTkuMy01NS41LTI2LjEtNzcuNyAzLjYtMTIgNS40LTI0LjQgNS40LTM3IDAtMjguMy05LjMtNTUuNS0yNi4xLTc3LjcgMy42LTEyIDUuNC0yNC40IDUuNC0zNyAwLTUxLjYtMzAuNy05OC4xLTc4LjMtMTE4LjQtOC4zLTMuNi0xNy4yLTUuNC0yNi41LTUuNEgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjM2NGMwIDE3LjcgMTQuMyAzMiAzMiAzMmgxMjkuM2w4NS44IDMxMC44QzM3Mi45IDg4OSA0MTguOSA5MjQgNDcwLjkgOTI0YzI5LjcgMCA1Ny40LTExLjggNzcuOS0zMy40IDIwLjUtMjEuNSAzMS00OS43IDI5LjUtNzkuNGwtNi0xMjIuOWgyMzkuOWMxMi4xIDAgMjMuOS0zLjIgMzQuMy05LjMgNDAuNC0yMy41IDY1LjUtNjYuMSA2NS41LTExMSAwLTI4LjMtOS4zLTU1LjUtMjYuMS03Ny43ek0xODQgNDU2VjE3Mmg4MXYyODRoLTgxeiBtNjI3LjIgMTYwLjRINDk2LjhsOS42IDE5OC40YzAuNiAxMS45LTQuNyAyMy4xLTE0LjYgMzAuNS02LjEgNC41LTEzLjYgNi44LTIxLjEgNi43LTE5LjYtMC4xLTM2LjktMTMuNC00Mi4yLTMyLjNMMzI5IDQ1OS4yVjE3Mmg0MTUuNGMyMC40IDkuMiAzMy42IDI5LjQgMzMuNiA1MS44IDAgOS43LTIuMyAxOC45LTYuOSAyNy4zbC0xMy45IDI1LjQgMjEuOSAxOWMxMi41IDEwLjggMTkuNiAyNi41IDE5LjYgNDMgMCA5LjctMi4zIDE4LjktNi45IDI3LjNsLTEzLjkgMjUuNCAyMS45IDE5YzEyLjUgMTAuOCAxOS42IDI2LjUgMTkuNiA0MyAwIDkuNy0yLjMgMTguOS02LjkgMjcuM2wtMTQgMjUuNSAyMS45IDE5YzEyLjUgMTAuOCAxOS42IDI2LjUgMTkuNiA0MyAwIDE5LjEtMTEgMzcuNS0yOC44IDQ4LjR6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24taGVhcnQiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk05MjMgMjgzLjZjLTEzLjQtMzEuMS0zMi42LTU4LjktNTYuOS04Mi44LTI0LjMtMjMuOC01Mi41LTQyLjQtODQtNTUuNS0zMi41LTEzLjUtNjYuOS0yMC4zLTEwMi40LTIwLjMtNDkuMyAwLTk3LjQgMTMuNS0xMzkuMiAzOS0xMCA2LjEtMTkuNSAxMi44LTI4LjUgMjAuMS05LTcuMy0xOC41LTE0LTI4LjUtMjAuMS00MS44LTI1LjUtODkuOS0zOS0xMzkuMi0zOS0zNS41IDAtNjkuOSA2LjgtMTAyLjQgMjAuMy0zMS40IDEzLTU5LjcgMzEuNy04NCA1NS41LTI0LjQgMjMuOS00My41IDUxLjctNTYuOSA4Mi44LTEzLjkgMzIuMy0yMSA2Ni42LTIxIDEwMS45IDAgMzMuMyA2LjggNjggMjAuMyAxMDMuMyAxMS4zIDI5LjUgMjcuNSA2MC4xIDQ4LjIgOTEgMzIuOCA0OC45IDc3LjkgOTkuOSAxMzMuOSAxNTEuNiA5Mi44IDg1LjcgMTg0LjcgMTQ0LjkgMTg4LjYgMTQ3LjNsMjMuNyAxNS4yYzEwLjUgNi43IDI0IDYuNyAzNC41IDBsMjMuNy0xNS4yYzMuOS0yLjUgOTUuNy02MS42IDE4OC42LTE0Ny4zIDU2LTUxLjcgMTAxLjEtMTAyLjcgMTMzLjktMTUxLjYgMjAuNy0zMC45IDM3LTYxLjUgNDguMi05MSAxMy41LTM1LjMgMjAuMy03MCAyMC4zLTEwMy4zIDAuMS0zNS4zLTctNjkuNi0yMC45LTEwMS45ek01MTIgODE0LjhTMTU2IDU4Ni43IDE1NiAzODUuNUMxNTYgMjgzLjYgMjQwLjMgMjAxIDM0NC4zIDIwMWM3My4xIDAgMTM2LjUgNDAuOCAxNjcuNyAxMDAuNEM1NDMuMiAyNDEuOCA2MDYuNiAyMDEgNjc5LjcgMjAxYzEwNCAwIDE4OC4zIDgyLjYgMTg4LjMgMTg0LjUgMCAyMDEuMi0zNTYgNDI5LjMtMzU2IDQyOS4zeiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWVkaXQiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk03MjMuMiA5MTcuNzZIMjg2LjcyYy02NS4yOCAwLTExOC40LTUxLjItMTE4LjQtMTEzLjkyVjI2MS43NkMxNjguMzIgMTk4LjQgMjIxLjQ0IDE0Ny4yIDI4Ni43MiAxNDcuMmgzNzUuMDRjMTcuOTIgMCAzMiAxNC4wOCAzMiAzMnMtMTQuMDggMzItMzIgMzJIMjg2LjcyYy0zMC4wOCAwLTU0LjQgMjIuNC01NC40IDQ5LjkydjU0Mi4wOGMwIDI3LjUyIDI0LjMyIDQ5LjkyIDU0LjQgNDkuOTJINzIzLjJjMzAuMDggMCA1NC40LTIyLjQgNTQuNC00OS45MlY0NDAuMzJjMC0xNy45MiAxNC4wOC0zMiAzMi0zMnMzMiAxNC4wOCAzMiAzMnYzNjMuNTJjMCA2Mi43Mi01My4xMiAxMTMuOTItMTE4LjQgMTEzLjkyeiIKICAgIH0KICB9KSwgX3ZtLl92KCIgIiksIF9jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTQ5OS44NCA2MDIuMjRjLTcuNjggMC0xNC43Mi0yLjU2LTIxLjEyLTcuNjgtMTMuNDQtMTEuNTItMTQuNzItMzItMy4yLTQ1LjQ0TDc4MC4xNiAxOTguNGMxMS41Mi0xMy40NCAzMi0xNC43MiA0NS40NC0zLjJzMTQuNzIgMzIgMy4yIDQ1LjQ0TDUyNC4xNiA1OTEuMzZjLTYuNCA3LjA0LTE1LjM2IDEwLjg4LTI0LjMyIDEwLjg4eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWRlbGV0ZSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTY3Ny42NDcwNTkgMjU2bDAtOTAuMzUyOTQxYzAtMzcuNDM2MjM1LTIzLjQ2MTY0Ny02MC4yMzUyOTQtNjEuNzcxMjk0LTYwLjIzNTI5NEw0MDguMDk0MTE4IDEwNS40MTE3NjVjLTM4LjI0OTQxMiAwLTYxLjc0MTE3NiAyMi43OTkwNTktNjEuNzQxMTc2IDYwLjIzNTI5NGwwIDkwLjM1Mjk0MS0xODAuNzA1ODgyIDAgMCA2MC4yMzUyOTQgNjAuMjM1Mjk0IDAgMCA1MTJjMCA1NC4yNzIgMzMuOTcyNzA2IDkwLjM1Mjk0MSA5MC4zNTI5NDEgOTAuMzUyOTQxbDM5MS41Mjk0MTIgMGM1NS4wODUxNzYgMCA5MC4zNTI5NDEtMzMuNDkwODI0IDkwLjM1Mjk0MS05MC4zNTI5NDFsMC01MTIgNjAuMjM1Mjk0IDAgMC02MC4yMzUyOTRMNjc3LjY0NzA1OSAyNTZ6TTQwNi41ODgyMzUgMTY1LjY0NzA1OWwyMTAuODIzNTI5IDAtMS4yNjQ5NDEgOTAuMzUyOTQxTDQwNi41ODgyMzUgMjU2IDQwNi41ODgyMzUgMTY1LjY0NzA1OXpNNzM3Ljg4MjM1MyA4NTguMzUyOTQxbC00NTEuNzY0NzA2IDAgMC01NDIuMTE3NjQ3IDQ1MS43NjQ3MDYgMEw3MzcuODgyMzUzIDg1OC4zNTI5NDF6TTQ2Ni44MjM1MjkgMzc2LjQ3MDU4OGwtNTguNzI5NDEyIDAtMS41MDU4ODIgMzkxLjUyOTQxMiA2MC4yMzUyOTQgMEw0NjYuODIzNTI5IDM3Ni40NzA1ODh6TTYxNy40MTE3NjUgMzc2LjQ3MDU4OGwtNjAuMjM1Mjk0IDAgMCAzOTEuNTI5NDEyIDYwLjIzNTI5NCAwTDYxNy40MTE3NjUgMzc2LjQ3MDU4OHoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1yZXBseSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTQyNi42NjY2NjcgMzg0IDQyNi42NjY2NjcgMjEzLjMzMzMzMyAxMjggNTEyIDQyNi42NjY2NjcgODEwLjY2NjY2NyA0MjYuNjY2NjY3IDYzNS43MzMzMzNDNjQwIDYzNS43MzMzMzMgNzg5LjMzMzMzMyA3MDQgODk2IDg1My4zMzMzMzMgODUzLjMzMzMzMyA2NDAgNzI1LjMzMzMzMyA0MjYuNjY2NjY3IDQyNi42NjY2NjcgMzg0WiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWVycm9yIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNTEyIDcyMG0tNDggMGE0OCA0OCAwIDEgMCA5NiAwIDQ4IDQ4IDAgMSAwLTk2IDBaIgogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNDgwIDQxNnYxODRjMCA0LjQgMy42IDggOCA4aDQ4YzQuNCAwIDgtMy42IDgtOFY0MTZjMC00LjQtMy42LTgtOC04aC00OGMtNC40IDAtOCAzLjYtOCA4eiIKICAgIH0KICB9KSwgX3ZtLl92KCIgIiksIF9jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTk1NS43IDg1NmwtNDE2LTcyMGMtNi4yLTEwLjctMTYuOS0xNi0yNy43LTE2cy0yMS42IDUuMy0yNy43IDE2bC00MTYgNzIwQzU2IDg3Ny40IDcxLjQgOTA0IDk2IDkwNGg4MzJjMjQuNiAwIDQwLTI2LjYgMjcuNy00OHogbS03ODMuNS0yNy45TDUxMiAyMzkuOWwzMzkuOCA1ODguMkgxNzIuMnoiCiAgICB9CiAgfSldKV0pOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18gPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18gPSB0cnVlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18gPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18sCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXwp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18sIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV9zY29wZV9pZF9fLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18sIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18sIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBzY3JpcHQkMSA9IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdUcmFuc2l0aW9uRmFkZScsCiAgZnVuY3Rpb25hbDogdHJ1ZSwKICBwcm9wczogewogICAgZ3JvdXA6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9LAogICAgdGFnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAiZGVmYXVsdCI6ICdkaXYnCiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBfcmVmKSB7CiAgICB2YXIgcHJvcHMgPSBfcmVmLnByb3BzLAogICAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjsKICAgIHJldHVybiBoKHByb3BzLmdyb3VwID8gJ1RyYW5zaXRpb25Hcm91cCcgOiAnVHJhbnNpdGlvbicsIHsKICAgICAgcHJvcHM6IHsKICAgICAgICBuYW1lOiAnZmFkZScsCiAgICAgICAgbW9kZTogJ291dC1pbicsCiAgICAgICAgYXBwZWFyOiB0cnVlLAogICAgICAgIHRhZzogcHJvcHMudGFnCiAgICAgIH0KICAgIH0sIGNoaWxkcmVuKTsKICB9Cn0pOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQxID0gc2NyaXB0JDE7Ci8qIHRlbXBsYXRlICovCgovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQxID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDEgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQxID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDEgPSB1bmRlZmluZWQ7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQxID0gbm9ybWFsaXplQ29tcG9uZW50KHt9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMSwgX192dWVfc2NyaXB0X18kMSwgX192dWVfc2NvcGVfaWRfXyQxLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMSwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQxLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgc2NyaXB0JDIgPSBWdWUuZXh0ZW5kKHsKICBuYW1lOiAnVnNzdWVJY29uJywKICBmdW5jdGlvbmFsOiB0cnVlLAogIHByb3BzOiB7CiAgICBuYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgImRlZmF1bHQiOiBudWxsCiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBfcmVmMikgewogICAgdmFyIHByb3BzID0gX3JlZjIucHJvcHMsCiAgICAgICAgZGF0YSA9IF9yZWYyLmRhdGE7CiAgICByZXR1cm4gaCgnc3ZnJywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkYXRhKSwgewogICAgICAiY2xhc3MiOiBbJ3Zzc3VlLWljb24nLCAidnNzdWUtaWNvbi0iLmNvbmNhdChwcm9wcy5uYW1lKV0sCiAgICAgIGF0dHJzOiB7CiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnCiAgICAgIH0KICAgIH0pLCBbaCgndGl0bGUnLCBwcm9wcy50aXRsZSksIGgoJ3VzZScsIHsKICAgICAgYXR0cnM6IHsKICAgICAgICAneGxpbms6aHJlZic6ICIjdnNzdWUtaWNvbi0iLmNvbmNhdChwcm9wcy5uYW1lKQogICAgICB9CiAgICB9KV0pOwogIH0KfSk7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDIgPSBzY3JpcHQkMjsKLyogdGVtcGxhdGUgKi8KCi8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDIgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kMiA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDIgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMiA9IHVuZGVmaW5lZDsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDIgPSBub3JtYWxpemVDb21wb25lbnQoe30sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQyLCBfX3Z1ZV9zY3JpcHRfXyQyLCBfX3Z1ZV9zY29wZV9pZF9fJDIsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQyLCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDIsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBWc3N1ZUNvbW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkKSB7CiAgX2luaGVyaXRzKFZzc3VlQ29tbWVudCwgX1Z1ZSQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFZzc3VlQ29tbWVudCk7CgogIGZ1bmN0aW9uIFZzc3VlQ29tbWVudCgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVDb21tZW50KTsKCiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMuZWRpdE1vZGUgPSBmYWxzZTsKICAgIF90aGlzLmVkaXRDb250ZW50ID0gX3RoaXMuY29tbWVudC5jb250ZW50UmF3OwogICAgX3RoaXMuY3JlYXRpbmdSZWFjdGlvbnMgPSBbXTsKICAgIF90aGlzLmlzUHV0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgX3RoaXMuaXNEZWxldGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhWc3N1ZUNvbW1lbnQsIFt7CiAgICBrZXk6ICJjdXJyZW50VXNlciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudnNzdWUudXNlciA/IHRoaXMudnNzdWUudXNlci51c2VybmFtZSA6IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29udGVudCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tbWVudC5jb250ZW50OwogICAgfQogIH0sIHsKICAgIGtleTogImF1dGhvciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tbWVudC5hdXRob3I7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlZEF0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gZm9ybWF0RGF0ZVRpbWUodGhpcy5jb21tZW50LmNyZWF0ZWRBdCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlZEF0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gZm9ybWF0RGF0ZVRpbWUodGhpcy5jb21tZW50LnVwZGF0ZWRBdCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1JlYWN0aW9ucyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy52c3N1ZS5BUEkgJiYgdGhpcy52c3N1ZS5BUEkucGxhdGZvcm0ubWV0YS5yZWFjdGFibGUgJiYgdGhpcy5jb21tZW50LnJlYWN0aW9ucyAmJiAhdGhpcy5lZGl0TW9kZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVhY3Rpb25LZXlzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gWydoZWFydCcsICdsaWtlJywgJ3VubGlrZSddOwogICAgfQogIH0sIHsKICAgIGtleTogImVkaXRDb250ZW50Um93cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZWRpdENvbnRlbnQuc3BsaXQoJ1xuJykubGVuZ3RoIC0gMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlZGl0SW5wdXRSb3dzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0Q29udGVudFJvd3MgPCAzID8gNSA6IHRoaXMuZWRpdENvbnRlbnRSb3dzICsgMjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3N0UmVhY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wb3N0UmVhY3Rpb24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZjMpIHsKICAgICAgICB2YXIgcmVhY3Rpb24sIHN1Y2Nlc3MsIHJlYWN0aW9uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZWFjdGlvbiA9IF9yZWYzLnJlYWN0aW9uOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNyZWF0aW5nUmVhY3Rpb25zLmluY2x1ZGVzKHJlYWN0aW9uKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRpbmdSZWFjdGlvbnMucHVzaChyZWFjdGlvbik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZzc3VlLnBvc3RDb21tZW50UmVhY3Rpb24oewogICAgICAgICAgICAgICAgICBjb21tZW50SWQ6IHRoaXMuY29tbWVudC5pZCwKICAgICAgICAgICAgICAgICAgcmVhY3Rpb246IHJlYWN0aW9uCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgc3VjY2VzcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuJGVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKHRoaXMudnNzdWUuJHQoJ3JlYWN0aW9uR2l2ZW4nLCB7CiAgICAgICAgICAgICAgICAgICAgcmVhY3Rpb246IHRoaXMudnNzdWUuJHQocmVhY3Rpb24pCiAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICB9IC8vIGFsd2F5cyByZWZyZXNoIHJlYWN0aW9ucyBldmVuIGFscmVhZHkgZ2l2ZW4KCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUuZ2V0Q29tbWVudFJlYWN0aW9ucyh7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogdGhpcy5jb21tZW50LmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlYWN0aW9ucyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlYWN0aW9ucykgewogICAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnQucmVhY3Rpb25zID0gcmVhY3Rpb25zOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGluZ1JlYWN0aW9ucy5zcGxpY2UodGhpcy5jcmVhdGluZ1JlYWN0aW9ucy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHJlYWN0aW9uOwogICAgICAgICAgICAgICAgfSksIDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxMyk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzEsLCAxMywgMTZdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHBvc3RSZWFjdGlvbihfeCkgewogICAgICAgIHJldHVybiBfcG9zdFJlYWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwb3N0UmVhY3Rpb247CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJlbnRlckVkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyRWRpdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmVkaXRNb2RlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kcmVmcy5pbnB1dC5mb2N1cygpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNldEVkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0RWRpdCgpIHsKICAgICAgdGhpcy5lZGl0TW9kZSA9IGZhbHNlOwogICAgICB0aGlzLmVkaXRDb250ZW50ID0gdGhpcy5jb21tZW50LmNvbnRlbnRSYXc7CiAgICB9CiAgfSwgewogICAga2V5OiAicHV0Q29tbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3B1dENvbW1lbnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICB2YXIgY29tbWVudDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy52c3N1ZS5pc1BlbmRpbmcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuZWRpdENvbnRlbnQgIT09IHRoaXMuY29tbWVudC5jb250ZW50UmF3KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmlzUHV0aW5nQ29tbWVudCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLmlzVXBkYXRpbmdDb21tZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZzc3VlLnB1dENvbW1lbnQoewogICAgICAgICAgICAgICAgICBjb21tZW50SWQ6IHRoaXMuY29tbWVudC5pZCwKICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5lZGl0Q29udGVudAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoY29tbWVudCkgewogICAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLmNvbW1lbnRzLmRhdGEuc3BsaWNlKHRoaXMudnNzdWUuY29tbWVudHMuZGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gX3RoaXMzLmNvbW1lbnQuaWQ7CiAgICAgICAgICAgICAgICAgIH0pLCAxLCBjb21tZW50KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICB0aGlzLmlzUHV0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5pc1VwZGF0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMTEpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzAsLCAxMSwgMTVdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHB1dENvbW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9wdXRDb21tZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwdXRDb21tZW50OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZGVsZXRlQ29tbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2RlbGV0ZUNvbW1lbnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICB2YXIgc3VjY2VzczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy52c3N1ZS5pc1BlbmRpbmcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY29uZmlybSh0aGlzLnZzc3VlLiR0KCdkZWxldGVDb25maXJtJykpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB0aGlzLmlzRGVsZXRpbmdDb21tZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuaXNVcGRhdGluZ0NvbW1lbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUuZGVsZXRlQ29tbWVudCh7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogdGhpcy5jb21tZW50LmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgc3VjY2VzcyA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBkZWNyZWFzZSBjb3VudCBpbW1lZGlhdGVseQogICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5jb21tZW50cy5jb3VudCAtPSAxOyAvLyBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBjb21tZW50IG9uIHRoaXMgcGFnZSwgcmVtb3ZlIHRoZSBkZWxldGVkIGNvbW1lbnQgaW1tZWRpYXRlbHkKCiAgICAgICAgICAgICAgICBpZiAodGhpcy52c3N1ZS5jb21tZW50cy5kYXRhLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5jb21tZW50cy5kYXRhLnNwbGljZSh0aGlzLnZzc3VlLmNvbW1lbnRzLmRhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IF90aGlzNC5jb21tZW50LmlkOwogICAgICAgICAgICAgICAgICB9KSwgMSk7CiAgICAgICAgICAgICAgICB9IC8vIGlmIHRoZSBwYWdlIGNvdW50IHNob3VsZCBiZSBkZWNyZWFzZWQsIGNoYW5nZSB0aGUgcXVlcnkgcGFyYW0gdG8gdHJpZ2dlciBjb21tZW50cyByZWxvYWQKCgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy52c3N1ZS5xdWVyeS5wYWdlID4gMSAmJiB0aGlzLnZzc3VlLnF1ZXJ5LnBhZ2UgPiBNYXRoLmNlaWwodGhpcy52c3N1ZS5jb21tZW50cy5jb3VudCAvIHRoaXMudnNzdWUucXVlcnkucGVyUGFnZSkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMudnNzdWUucXVlcnkucGFnZSAtPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZzc3VlLmdldENvbW1lbnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLiRlbWl0KCdlcnJvcicsIG5ldyBFcnJvcih0aGlzLnZzc3VlLiR0KCdkZWxldGVGYWlsZWQnKSkpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyMjsKICAgICAgICAgICAgICAgIHRoaXMuaXNEZWxldGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuaXNVcGRhdGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDIyKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcywgW1swLCwgMjIsIDI2XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBkZWxldGVDb21tZW50KCkgewogICAgICAgIHJldHVybiBfZGVsZXRlQ29tbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVsZXRlQ29tbWVudDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFZzc3VlQ29tbWVudDsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICB0eXBlOiBPYmplY3QsCiAgcmVxdWlyZWQ6IHRydWUKfSldLCBWc3N1ZUNvbW1lbnQucHJvdG90eXBlLCAiY29tbWVudCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlQ29tbWVudC5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpWc3N1ZUNvbW1lbnQgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFZzc3VlSWNvbjogX192dWVfY29tcG9uZW50X18kMgogIH0KfSldLCBWc3N1ZUNvbW1lbnQpOwp2YXIgc2NyaXB0JDMgPSBWc3N1ZUNvbW1lbnQ7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDMgPSBzY3JpcHQkMzsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQxID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kMSgpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50IiwKICAgICJjbGFzcyI6IHsKICAgICAgJ3Zzc3VlLWNvbW1lbnQtZWRpdC1tb2RlJzogX3ZtLmVkaXRNb2RlLAogICAgICAndnNzdWUtY29tbWVudC1kaXNhYmxlZCc6IF92bS5pc0RlbGV0aW5nQ29tbWVudCB8fCBfdm0uaXNQdXRpbmdDb21tZW50CiAgICB9CiAgfSwgW19jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtYXZhdGFyIgogIH0sIFtfYygnYScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogX3ZtLmF1dGhvci5ob21lcGFnZSwKICAgICAgInRpdGxlIjogX3ZtLmF1dGhvci51c2VybmFtZSwKICAgICAgInRhcmdldCI6ICJfYmxhbmsiLAogICAgICAicmVsIjogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICB9CiAgfSwgW19jKCdpbWcnLCB7CiAgICBhdHRyczogewogICAgICAic3JjIjogX3ZtLmF1dGhvci5hdmF0YXIsCiAgICAgICJhbHQiOiBfdm0uYXV0aG9yLnVzZXJuYW1lCiAgICB9CiAgfSldKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1ib2R5IgogIH0sIFtfdm0uX3QoImJvZHkiLCBbX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1oZWFkZXIiCiAgfSwgW19jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWF1dGhvciIKICB9LCBbX2MoJ2EnLCB7CiAgICBhdHRyczogewogICAgICAiaHJlZiI6IF92bS5hdXRob3IuaG9tZXBhZ2UsCiAgICAgICJ0aXRsZSI6IF92bS5hdXRob3IudXNlcm5hbWUsCiAgICAgICJ0YXJnZXQiOiAiX2JsYW5rIiwKICAgICAgInJlbCI6ICJub29wZW5lciBub3JlZmVycmVyIgogICAgfQogIH0sIFtfdm0uX3YoIlxuICAgICAgICAgICAgIiArIF92bS5fcyhfdm0uYXV0aG9yLnVzZXJuYW1lKSArICJcbiAgICAgICAgICAiKV0pXSksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1jcmVhdGVkLWF0IgogIH0sIFtfdm0uX3YoIlxuICAgICAgICAgICIgKyBfdm0uX3MoX3ZtLmNyZWF0ZWRBdCkgKyAiXG4gICAgICAgICIpXSldKSwgX3ZtLl92KCIgIiksIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtbWFpbiIKICB9LCBbX3ZtLmVkaXRNb2RlID8gX2MoJ3RleHRhcmVhJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICB2YWx1ZTogX3ZtLmVkaXRDb250ZW50LAogICAgICBleHByZXNzaW9uOiAiZWRpdENvbnRlbnQiCiAgICB9XSwKICAgIHJlZjogImlucHV0IiwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtZWRpdC1jb21tZW50LWlucHV0IiwKICAgIGF0dHJzOiB7CiAgICAgICJyb3dzIjogX3ZtLmVkaXRJbnB1dFJvd3MKICAgIH0sCiAgICBkb21Qcm9wczogewogICAgICAidmFsdWUiOiBfdm0uZWRpdENvbnRlbnQKICAgIH0sCiAgICBvbjogewogICAgICAia2V5dXAiOiBmdW5jdGlvbiBrZXl1cCgkZXZlbnQpIHsKICAgICAgICBpZiAoISRldmVudC50eXBlLmluZGV4T2YoJ2tleScpICYmIF92bS5faygkZXZlbnQua2V5Q29kZSwgImVudGVyIiwgMTMsICRldmVudC5rZXksICJFbnRlciIpKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmICghJGV2ZW50LmN0cmxLZXkpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF92bS5wdXRDb21tZW50KCk7CiAgICAgIH0sCiAgICAgICJpbnB1dCI6IGZ1bmN0aW9uIGlucHV0KCRldmVudCkgewogICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3ZtLmVkaXRDb250ZW50ID0gJGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgfQogICAgfQogIH0pIDogX2MoJ2FydGljbGUnLCB7CiAgICBzdGF0aWNDbGFzczogIm1hcmtkb3duLWJvZHkiLAogICAgZG9tUHJvcHM6IHsKICAgICAgImlubmVySFRNTCI6IF92bS5fcyhfdm0uY29udGVudCkKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1mb290ZXIiCiAgfSwgW192bS5lZGl0TW9kZSA/IF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWhpbnQiCiAgfSwgW192bS5fdigiXG4gICAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ2VkaXRNb2RlJykpICsgIlxuICAgICAgICAiKV0pIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfdm0uc2hvd1JlYWN0aW9ucyA/IF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LXJlYWN0aW9ucyIKICB9LCBfdm0uX2woX3ZtLnJlYWN0aW9uS2V5cywgZnVuY3Rpb24gKHJlYWN0aW9uKSB7CiAgICByZXR1cm4gX2MoJ3NwYW4nLCB7CiAgICAgIGtleTogcmVhY3Rpb24sCiAgICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1yZWFjdGlvbiIsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KF92bS5jcmVhdGluZ1JlYWN0aW9ucy5pbmNsdWRlcyhyZWFjdGlvbikgPyAnbG9hZGluZycgOiByZWFjdGlvbikKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdm0ucG9zdFJlYWN0aW9uKHsKICAgICAgICAgICAgcmVhY3Rpb246IHJlYWN0aW9uCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtfYygnVnNzdWVJY29uJywgewogICAgICBhdHRyczogewogICAgICAgICJuYW1lIjogX3ZtLmNyZWF0aW5nUmVhY3Rpb25zLmluY2x1ZGVzKHJlYWN0aW9uKSA/ICdsb2FkaW5nJyA6IHJlYWN0aW9uLAogICAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdChfdm0uY3JlYXRpbmdSZWFjdGlvbnMuaW5jbHVkZXMocmVhY3Rpb24pID8gJ2xvYWRpbmcnIDogcmVhY3Rpb24pCiAgICAgIH0KICAgIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1yZWFjdGlvbi1udW1iZXIiCiAgICB9LCBbX3ZtLl92KCJcbiAgICAgICAgICAgICAgIiArIF92bS5fcyhfdm0uY29tbWVudC5yZWFjdGlvbnNbcmVhY3Rpb25dKSArICJcbiAgICAgICAgICAgICIpXSldLCAxKTsKICB9KSwgMCkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LW9wZXJhdGlvbnMiCiAgfSwgW192bS5jb21tZW50LmF1dGhvci51c2VybmFtZSA9PT0gX3ZtLmN1cnJlbnRVc2VyICYmIF92bS5lZGl0TW9kZSA/IF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LW9wZXJhdGlvbiIsCiAgICAiY2xhc3MiOiB7CiAgICAgICd2c3N1ZS1jb21tZW50LW9wZXJhdGlvbi1tdXRlZCc6IF92bS5pc1B1dGluZ0NvbW1lbnQKICAgIH0sCiAgICBhdHRyczogewogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoX3ZtLmlzUHV0aW5nQ29tbWVudCA/ICdsb2FkaW5nJyA6ICdzdWJtaXQnKQogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0ucHV0Q29tbWVudCgpOwogICAgICB9CiAgICB9CiAgfSwgW19jKCdWc3N1ZUljb24nLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogX3ZtLmlzUHV0aW5nQ29tbWVudCwKICAgICAgZXhwcmVzc2lvbjogImlzUHV0aW5nQ29tbWVudCIKICAgIH1dLAogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiAibG9hZGluZyIsCiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdCgnbG9hZGluZycpCiAgICB9CiAgfSksIF92bS5fdigiXG5cbiAgICAgICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdzdWJtaXQnKSkgKyAiXG4gICAgICAgICAgIildLCAxKSA6IF92bS5fZSgpLCBfdm0uX3YoIiAiKSwgX3ZtLmNvbW1lbnQuYXV0aG9yLnVzZXJuYW1lID09PSBfdm0uY3VycmVudFVzZXIgJiYgX3ZtLmVkaXRNb2RlID8gX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtb3BlcmF0aW9uIHZzc3VlLWNvbW1lbnQtb3BlcmF0aW9uLW11dGVkIiwKICAgIGF0dHJzOiB7CiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdCgnY2FuY2VsJykKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLnJlc2V0RWRpdCgpOwogICAgICB9CiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdCgnY2FuY2VsJykpICsgIlxuICAgICAgICAgICIpXSkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF92bS5jb21tZW50LmF1dGhvci51c2VybmFtZSA9PT0gX3ZtLmN1cnJlbnRVc2VyID8gX2MoJ3NwYW4nLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogIV92bS5lZGl0TW9kZSwKICAgICAgZXhwcmVzc2lvbjogIiFlZGl0TW9kZSIKICAgIH1dLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LW9wZXJhdGlvbiIsCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLmVudGVyRWRpdCgpOwogICAgICB9CiAgICB9CiAgfSwgW19jKCdWc3N1ZUljb24nLCB7CiAgICBhdHRyczogewogICAgICAibmFtZSI6ICJlZGl0IiwKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdlZGl0JykKICAgIH0KICB9KV0sIDEpIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfdm0uY29tbWVudC5hdXRob3IudXNlcm5hbWUgPT09IF92bS5jdXJyZW50VXNlciB8fCBfdm0udnNzdWUuaXNBZG1pbiA/IF9jKCdzcGFuJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6ICFfdm0uZWRpdE1vZGUsCiAgICAgIGV4cHJlc3Npb246ICIhZWRpdE1vZGUiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1vcGVyYXRpb24iLAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS5kZWxldGVDb21tZW50KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoJ1Zzc3VlSWNvbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJuYW1lIjogX3ZtLmlzRGVsZXRpbmdDb21tZW50ID8gJ2xvYWRpbmcnIDogJ2RlbGV0ZScsCiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdChfdm0uaXNEZWxldGluZ0NvbW1lbnQgPyAnbG9hZGluZycgOiAnZGVsZXRlJykKICAgIH0KICB9KV0sIDEpIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiAhX3ZtLmVkaXRNb2RlLAogICAgICBleHByZXNzaW9uOiAiIWVkaXRNb2RlIgogICAgfV0sCiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtb3BlcmF0aW9uIiwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0udnNzdWUuJGVtaXQoJ3JlcGx5LWNvbW1lbnQnLCBfdm0uY29tbWVudCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoJ1Zzc3VlSWNvbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJuYW1lIjogInJlcGx5IiwKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdyZXBseScpCiAgICB9CiAgfSldLCAxKV0pXSldKV0sIDIpXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kMSA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQzID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDMgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQzID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDMgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDMgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kMSwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDEKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDMsIF9fdnVlX3NjcmlwdF9fJDMsIF9fdnVlX3Njb3BlX2lkX18kMywgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDMsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMywgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlUGFnaW5hdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQyKSB7CiAgX2luaGVyaXRzKFZzc3VlUGFnaW5hdGlvbiwgX1Z1ZSQyKTsKCiAgdmFyIF9zdXBlcjIgPSBfY3JlYXRlU3VwZXIoVnNzdWVQYWdpbmF0aW9uKTsKCiAgZnVuY3Rpb24gVnNzdWVQYWdpbmF0aW9uKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZzc3VlUGFnaW5hdGlvbik7CgogICAgcmV0dXJuIF9zdXBlcjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIF9jcmVhdGVDbGFzcyhWc3N1ZVBhZ2luYXRpb24sIFt7CiAgICBrZXk6ICJkaXNhYmxlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudnNzdWUuaXNQZW5kaW5nOwogICAgfQogIH0sIHsKICAgIGtleTogInBhZ2VDb3VudCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHBhZ2VDb3VudCA9IE1hdGguY2VpbCh0aGlzLnZzc3VlLmNvbW1lbnRzLmNvdW50IC8gdGhpcy52c3N1ZS5jb21tZW50cy5wZXJQYWdlKTsKICAgICAgcmV0dXJuIHBhZ2VDb3VudCA+IDEgPyBwYWdlQ291bnQgOiAxOwogICAgfQogIH0sIHsKICAgIGtleTogInBlclBhZ2VPcHRpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgcGVyUGFnZU9wdGlvbnMgPSBbNSwgMTAsIDIwLCA1MF07CgogICAgICBpZiAoIXBlclBhZ2VPcHRpb25zLmluY2x1ZGVzKHRoaXMudnNzdWUub3B0aW9ucy5wZXJQYWdlKSAmJiB0aGlzLnZzc3VlLm9wdGlvbnMucGVyUGFnZSA8IDEwMCkgewogICAgICAgIHBlclBhZ2VPcHRpb25zLnB1c2godGhpcy52c3N1ZS5vcHRpb25zLnBlclBhZ2UpOwogICAgICB9CgogICAgICByZXR1cm4gcGVyUGFnZU9wdGlvbnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhIC0gYjsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGFnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudnNzdWUucXVlcnkucGFnZSA+IHRoaXMucGFnZUNvdW50ID8gdGhpcy5wYWdlQ291bnQgOiB0aGlzLnZzc3VlLnF1ZXJ5LnBhZ2U7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgIGlmICh2YWwgPiAwICYmIHZhbCA8PSB0aGlzLnBhZ2VDb3VudCkgewogICAgICAgIHRoaXMudnNzdWUucXVlcnkucGFnZSA9IHZhbDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInBlclBhZ2UiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZzc3VlLnF1ZXJ5LnBlclBhZ2U7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgIGlmICh0aGlzLnBlclBhZ2VPcHRpb25zLmluY2x1ZGVzKHZhbCkpIHsKICAgICAgICB0aGlzLnZzc3VlLnF1ZXJ5LnBlclBhZ2UgPSB2YWw7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBWc3N1ZVBhZ2luYXRpb247Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZVBhZ2luYXRpb24ucHJvdG90eXBlLCAidnNzdWUiLCB2b2lkIDApOwoKVnNzdWVQYWdpbmF0aW9uID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBWc3N1ZUljb246IF9fdnVlX2NvbXBvbmVudF9fJDIKICB9Cn0pXSwgVnNzdWVQYWdpbmF0aW9uKTsKdmFyIHNjcmlwdCQ0ID0gVnNzdWVQYWdpbmF0aW9uOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQ0ID0gc2NyaXB0JDQ7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kMiA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fJDIoKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcGFnaW5hdGlvbiIKICB9LCBbX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcGFnaW5hdGlvbi1wZXItcGFnZSIKICB9LCBbX2MoJ2xhYmVsJywgW19jKCdzZWxlY3QnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibW9kZWwiLAogICAgICByYXdOYW1lOiAidi1tb2RlbCIsCiAgICAgIHZhbHVlOiBfdm0ucGVyUGFnZSwKICAgICAgZXhwcmVzc2lvbjogInBlclBhZ2UiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcGFnaW5hdGlvbi1zZWxlY3QiLAogICAgYXR0cnM6IHsKICAgICAgImRpc2FibGVkIjogX3ZtLmRpc2FibGVkCiAgICB9LAogICAgb246IHsKICAgICAgImNoYW5nZSI6IGZ1bmN0aW9uIGNoYW5nZSgkZXZlbnQpIHsKICAgICAgICB2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsIGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICByZXR1cm4gby5zZWxlY3RlZDsKICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHZhciB2YWwgPSAiX3ZhbHVlIiBpbiBvID8gby5fdmFsdWUgOiBvLnZhbHVlOwogICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICB9KTsKICAgICAgICBfdm0ucGVyUGFnZSA9ICRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXTsKICAgICAgfQogICAgfQogIH0sIF92bS5fbChfdm0ucGVyUGFnZU9wdGlvbnMsIGZ1bmN0aW9uICh2YWwpIHsKICAgIHJldHVybiBfYygnb3B0aW9uJywgewogICAgICBrZXk6IHZhbCwKICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAidmFsdWUiOiB2YWwKICAgICAgfQogICAgfSwgW192bS5fdigiXG4gICAgICAgICAgIiArIF92bS5fcyh2YWwpICsgIlxuICAgICAgICAiKV0pOwogIH0pLCAwKSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgW192bS5fdigiXG4gICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdwZXJQYWdlJykpICsgIlxuICAgICAgIildKV0pLCBfdm0uX3YoIiAiKSwgX3ZtLnZzc3VlLkFQSS5wbGF0Zm9ybS5tZXRhLnNvcnRhYmxlID8gX2MoJ3NwYW4nLCB7CiAgICAiY2xhc3MiOiB7CiAgICAgICd2c3N1ZS1wYWdpbmF0aW9uLWxpbmsnOiB0cnVlLAogICAgICBkaXNhYmxlZDogX3ZtLmRpc2FibGVkCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdzb3J0JykKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICBfdm0udnNzdWUucXVlcnkuc29ydCA9IF92bS52c3N1ZS5xdWVyeS5zb3J0ID09PSAnYXNjJyA/ICdkZXNjJyA6ICdhc2MnOwogICAgICB9CiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS5xdWVyeS5zb3J0ID09PSAnYXNjJyA/ICLihpEiIDogIuKGkyIpICsgIlxuICAgICIpXSkgOiBfdm0uX2UoKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcGFnaW5hdGlvbi1wYWdlIgogIH0sIFtfYygnc3BhbicsIHsKICAgICJjbGFzcyI6IHsKICAgICAgJ3Zzc3VlLXBhZ2luYXRpb24tbGluayc6IHRydWUsCiAgICAgIGRpc2FibGVkOiBfdm0ucGFnZSA9PT0gMSB8fCBfdm0uZGlzYWJsZWQKICAgIH0sCiAgICBhdHRyczogewogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ3ByZXYnKQogICAgfSwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ0ZXh0Q29udGVudCI6IF92bS5fcygiPCIpCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgX3ZtLnBhZ2UgLT0gMTsKICAgICAgfQogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ2xhYmVsJywgW19jKCdzcGFuJywgW192bS5fdigiXG4gICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdwYWdlJykpICsgIlxuICAgICAgIildKSwgX3ZtLl92KCIgIiksIF9jKCdzZWxlY3QnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogX3ZtLnBhZ2VDb3VudCA+IDEsCiAgICAgIGV4cHJlc3Npb246ICJwYWdlQ291bnQgPiAxIgogICAgfSwgewogICAgICBuYW1lOiAibW9kZWwiLAogICAgICByYXdOYW1lOiAidi1tb2RlbCIsCiAgICAgIHZhbHVlOiBfdm0ucGFnZSwKICAgICAgZXhwcmVzc2lvbjogInBhZ2UiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcGFnaW5hdGlvbi1zZWxlY3QiLAogICAgYXR0cnM6IHsKICAgICAgImRpc2FibGVkIjogX3ZtLmRpc2FibGVkCiAgICB9LAogICAgb246IHsKICAgICAgImNoYW5nZSI6IGZ1bmN0aW9uIGNoYW5nZSgkZXZlbnQpIHsKICAgICAgICB2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsIGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICByZXR1cm4gby5zZWxlY3RlZDsKICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHZhciB2YWwgPSAiX3ZhbHVlIiBpbiBvID8gby5fdmFsdWUgOiBvLnZhbHVlOwogICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICB9KTsKICAgICAgICBfdm0ucGFnZSA9ICRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXTsKICAgICAgfQogICAgfQogIH0sIF92bS5fbChfdm0ucGFnZUNvdW50LCBmdW5jdGlvbiAodmFsKSB7CiAgICByZXR1cm4gX2MoJ29wdGlvbicsIHsKICAgICAga2V5OiB2YWwsCiAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgInZhbHVlIjogdmFsCiAgICAgIH0KICAgIH0sIFtfdm0uX3YoIlxuICAgICAgICAgICIgKyBfdm0uX3ModmFsKSArICJcbiAgICAgICAgIildKTsKICB9KSwgMCksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0ucGFnZUNvdW50IDwgMiwKICAgICAgZXhwcmVzc2lvbjogInBhZ2VDb3VudCA8IDIiCiAgICB9XSwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ0ZXh0Q29udGVudCI6IF92bS5fcyhfdm0ucGFnZSkKICAgIH0KICB9KSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgewogICAgZG9tUHJvcHM6IHsKICAgICAgInRleHRDb250ZW50IjogX3ZtLl9zKCIgLyAiICsgX3ZtLnBhZ2VDb3VudCArICIgIikKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCB7CiAgICAiY2xhc3MiOiB7CiAgICAgICd2c3N1ZS1wYWdpbmF0aW9uLWxpbmsnOiB0cnVlLAogICAgICBkaXNhYmxlZDogX3ZtLnBhZ2UgPT09IF92bS5wYWdlQ291bnQgfHwgX3ZtLmRpc2FibGVkCiAgICB9LAogICAgYXR0cnM6IHsKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCduZXh0JykKICAgIH0sCiAgICBkb21Qcm9wczogewogICAgICAidGV4dENvbnRlbnQiOiBfdm0uX3MoIj4iKQogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIF92bS5wYWdlICs9IDE7CiAgICAgIH0KICAgIH0KICB9KV0pXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kMiA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ0ID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDQgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ0ID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDQgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDQgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kMiwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDIKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDQsIF9fdnVlX3NjcmlwdF9fJDQsIF9fdnVlX3Njb3BlX2lkX18kNCwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDQsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNCwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlQ29tbWVudHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkMykgewogIF9pbmhlcml0cyhWc3N1ZUNvbW1lbnRzLCBfVnVlJDMpOwoKICB2YXIgX3N1cGVyMyA9IF9jcmVhdGVTdXBlcihWc3N1ZUNvbW1lbnRzKTsKCiAgZnVuY3Rpb24gVnNzdWVDb21tZW50cygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZUNvbW1lbnRzKTsKCiAgICByZXR1cm4gX3N1cGVyMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgcmV0dXJuIFZzc3VlQ29tbWVudHM7Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZUNvbW1lbnRzLnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlQ29tbWVudHMgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFRyYW5zaXRpb25GYWRlOiBfX3Z1ZV9jb21wb25lbnRfXyQxLAogICAgVnNzdWVDb21tZW50OiBfX3Z1ZV9jb21wb25lbnRfXyQzLAogICAgVnNzdWVQYWdpbmF0aW9uOiBfX3Z1ZV9jb21wb25lbnRfXyQ0CiAgfQp9KV0sIFZzc3VlQ29tbWVudHMpOwp2YXIgc2NyaXB0JDUgPSBWc3N1ZUNvbW1lbnRzOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQ1ID0gc2NyaXB0JDU7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kMyA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fJDMoKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudHMiCiAgfSwgW19jKCdWc3N1ZVBhZ2luYXRpb24nKSwgX3ZtLl92KCIgIiksIF9jKCdUcmFuc2l0aW9uRmFkZScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJncm91cCI6ICIiCiAgICB9CiAgfSwgX3ZtLl9sKF92bS52c3N1ZS5jb21tZW50cy5kYXRhLCBmdW5jdGlvbiAoY29tbWVudCkgewogICAgcmV0dXJuIF9jKCdWc3N1ZUNvbW1lbnQnLCB7CiAgICAgIGtleTogY29tbWVudC5pZCwKICAgICAgYXR0cnM6IHsKICAgICAgICAiY29tbWVudCI6IGNvbW1lbnQKICAgICAgfQogICAgfSk7CiAgfSksIDEpLCBfdm0uX3YoIiAiKSwgX2MoJ1Zzc3VlUGFnaW5hdGlvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0udnNzdWUuY29tbWVudHMuZGF0YS5sZW5ndGggPiA1LAogICAgICBleHByZXNzaW9uOiAidnNzdWUuY29tbWVudHMuZGF0YS5sZW5ndGggPiA1IgogICAgfV0KICB9KV0sIDEpOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDMgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kNSA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQ1ID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNSA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ1ID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQ1ID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fJDMsCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQzCn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ1LCBfX3Z1ZV9zY3JpcHRfXyQ1LCBfX3Z1ZV9zY29wZV9pZF9fJDUsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ1LCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDUsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBzY3JpcHQkNiA9IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdWc3N1ZUljb24nLAogIGZ1bmN0aW9uYWw6IHRydWUsCiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICJkZWZhdWx0IjogJ2RlZmF1bHQnCiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBfcmVmNCkgewogICAgdmFyIHByb3BzID0gX3JlZjQucHJvcHMsCiAgICAgICAgZGF0YSA9IF9yZWY0LmRhdGEsCiAgICAgICAgY2hpbGRyZW4gPSBfcmVmNC5jaGlsZHJlbjsKICAgIHJldHVybiBoKCdidXR0b24nLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRhdGEpLCB7CiAgICAgICJjbGFzcyI6IFsndnNzdWUtYnV0dG9uJywgInZzc3VlLWJ1dHRvbi0iLmNvbmNhdChwcm9wcy50eXBlKV0KICAgIH0pLCBjaGlsZHJlbik7CiAgfQp9KTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kNiA9IHNjcmlwdCQ2OwovKiB0ZW1wbGF0ZSAqLwoKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kNiA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQ2ID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNiA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ2ID0gdW5kZWZpbmVkOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kNiA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7fSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDYsIF9fdnVlX3NjcmlwdF9fJDYsIF9fdnVlX3Njb3BlX2lkX18kNiwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDYsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNiwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlTmV3Q29tbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQ0KSB7CiAgX2luaGVyaXRzKFZzc3VlTmV3Q29tbWVudCwgX1Z1ZSQ0KTsKCiAgdmFyIF9zdXBlcjQgPSBfY3JlYXRlU3VwZXIoVnNzdWVOZXdDb21tZW50KTsKCiAgZnVuY3Rpb24gVnNzdWVOZXdDb21tZW50KCkgewogICAgdmFyIF90aGlzNTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVOZXdDb21tZW50KTsKCiAgICBfdGhpczUgPSBfc3VwZXI0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpczUuY29udGVudCA9ICcnOwogICAgcmV0dXJuIF90aGlzNTsKICB9CgogIF9jcmVhdGVDbGFzcyhWc3N1ZU5ld0NvbW1lbnQsIFt7CiAgICBrZXk6ICJ1c2VyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS51c2VyOwogICAgfQogIH0sIHsKICAgIGtleTogInBsYXRmb3JtIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS5BUEkgJiYgdGhpcy52c3N1ZS5BUEkucGxhdGZvcm0ubmFtZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0lucHV0RGlzYWJsZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgfHwgdGhpcy51c2VyID09PSBudWxsIHx8IHRoaXMudnNzdWUuaXNzdWUgPT09IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNTdWJtaXREaXNhYmxlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGVudCA9PT0gJycgfHwgdGhpcy52c3N1ZS5pc1BlbmRpbmcgfHwgdGhpcy52c3N1ZS5pc3N1ZSA9PT0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2FkaW5nIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS5pc0NyZWF0aW5nQ29tbWVudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb250ZW50Um93cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5zcGxpdCgnXG4nKS5sZW5ndGggLSAxOwogICAgfQogIH0sIHsKICAgIGtleTogImlucHV0Um93cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGVudFJvd3MgPCAzID8gNSA6IHRoaXMuY29udGVudFJvd3MgKyAyOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy52c3N1ZS4kb24oJ3JlcGx5LWNvbW1lbnQnLCBmdW5jdGlvbiAoY29tbWVudCkgewogICAgICAgIHZhciBxdW90ZWRDb21tZW50ID0gY29tbWVudC5jb250ZW50UmF3LnJlcGxhY2UoL1xuL2csICdcbj4gJyk7CiAgICAgICAgdmFyIHJlcGx5Q29udGVudCA9ICJAIi5jb25jYXQoY29tbWVudC5hdXRob3IudXNlcm5hbWUsICJcblxuPiAiKS5jb25jYXQocXVvdGVkQ29tbWVudCwgIlxuXG4iKTsKICAgICAgICBfdGhpczYuY29udGVudCA9IF90aGlzNi5jb250ZW50LmNvbmNhdChyZXBseUNvbnRlbnQpOwoKICAgICAgICBfdGhpczYuZm9jdXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYmVmb3JlRGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgICAgdGhpcy52c3N1ZS4kb2ZmKCdyZXBseS1jb21tZW50Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3VibWl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3VibWl0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzU3VibWl0RGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZzc3VlLnBvc3RDb21tZW50KHsKICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52c3N1ZS5nZXRDb21tZW50cygpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9zdWJtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN1Ym1pdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFZzc3VlTmV3Q29tbWVudDsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlTmV3Q29tbWVudC5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpWc3N1ZU5ld0NvbW1lbnQgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFZzc3VlQnV0dG9uOiBfX3Z1ZV9jb21wb25lbnRfXyQ2LAogICAgVnNzdWVJY29uOiBfX3Z1ZV9jb21wb25lbnRfXyQyCiAgfQp9KV0sIFZzc3VlTmV3Q29tbWVudCk7CnZhciBzY3JpcHQkNyA9IFZzc3VlTmV3Q29tbWVudDsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kNyA9IHNjcmlwdCQ3OwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDQgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ0KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5ldy1jb21tZW50IgogIH0sIFtfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWF2YXRhciIKICB9LCBbX3ZtLnVzZXIgPyBfYygnYScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogX3ZtLnVzZXIuaG9tZXBhZ2UsCiAgICAgICJ0aXRsZSI6IF92bS51c2VyLnVzZXJuYW1lLAogICAgICAidGFyZ2V0IjogIl9ibGFuayIsCiAgICAgICJyZWwiOiAibm9vcGVuZXIgbm9yZWZlcnJlciIKICAgIH0KICB9LCBbX2MoJ2ltZycsIHsKICAgIGF0dHJzOiB7CiAgICAgICJzcmMiOiBfdm0udXNlci5hdmF0YXIsCiAgICAgICJhbHQiOiBfdm0udXNlci51c2VybmFtZQogICAgfQogIH0pXSkgOiBfYygnVnNzdWVJY29uJywgewogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiBfdm0ucGxhdGZvcm0udG9Mb3dlckNhc2UoKSwKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdsb2dpblRvQ29tbWVudCcsIHsKICAgICAgICBwbGF0Zm9ybTogX3ZtLnBsYXRmb3JtCiAgICAgIH0pCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS52c3N1ZS5sb2dpbigpOwogICAgICB9CiAgICB9CiAgfSldLCAxKSwgX3ZtLl92KCIgIiksIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5ldy1jb21tZW50LWJvZHkiCiAgfSwgW19jKCd0ZXh0YXJlYScsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgdmFsdWU6IF92bS5jb250ZW50LAogICAgICBleHByZXNzaW9uOiAiY29udGVudCIKICAgIH1dLAogICAgcmVmOiAiaW5wdXQiLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1uZXctY29tbWVudC1pbnB1dCIsCiAgICBhdHRyczogewogICAgICAicm93cyI6IF92bS5pbnB1dFJvd3MsCiAgICAgICJkaXNhYmxlZCI6IF92bS5pc0lucHV0RGlzYWJsZWQsCiAgICAgICJwbGFjZWhvbGRlciI6IF92bS52c3N1ZS4kdChfdm0udXNlciA/ICdwbGFjZWhvbGRlcicgOiAnbm9Mb2dpblBsYWNlSG9sZGVyJyksCiAgICAgICJzcGVsbGNoZWNrIjogZmFsc2UsCiAgICAgICJhcmlhLWxhYmVsIjogImxlYXZlIGEgY29tbWVudCIKICAgIH0sCiAgICBkb21Qcm9wczogewogICAgICAidmFsdWUiOiBfdm0uY29udGVudAogICAgfSwKICAgIG9uOiB7CiAgICAgICJrZXl1cCI6IGZ1bmN0aW9uIGtleXVwKCRldmVudCkgewogICAgICAgIGlmICghJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCAiZW50ZXIiLCAxMywgJGV2ZW50LmtleSwgIkVudGVyIikpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKCEkZXZlbnQuY3RybEtleSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3ZtLnN1Ym1pdCgpOwogICAgICB9LAogICAgICAiaW5wdXQiOiBmdW5jdGlvbiBpbnB1dCgkZXZlbnQpIHsKICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF92bS5jb250ZW50ID0gJGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgfQogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1uZXctY29tbWVudC1mb290ZXIiCiAgfSwgW192bS51c2VyID8gX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWN1cnJlbnQtdXNlciIKICB9LCBbX2MoJ3NwYW4nLCBbX3ZtLl92KF92bS5fcyhfdm0udnNzdWUuJHQoJ2N1cnJlbnRVc2VyJykpICsgIiAtICIgKyBfdm0uX3MoX3ZtLnVzZXIudXNlcm5hbWUpICsgIiAtICIpXSksIF92bS5fdigiICIpLCBfYygnYScsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtbG9nb3V0IiwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0udnNzdWUubG9nb3V0KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ2xvZ291dCcpKSArICJcbiAgICAgICIpXSldKSA6IF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jdXJyZW50LXVzZXIiCiAgfSwgW192bS5fdigiXG4gICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdCgnbG9naW5Ub0NvbW1lbnQnLCB7CiAgICBwbGF0Zm9ybTogX3ZtLnBsYXRmb3JtCiAgfSkpICsgIlxuICAgICIpXSksIF92bS5fdigiICIpLCBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1uZXctY29tbWVudC1vcGVyYXRpb25zIgogIH0sIFtfdm0udXNlciA/IF9jKCdWc3N1ZUJ1dHRvbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtYnV0dG9uLXN1Ym1pdC1jb21tZW50IiwKICAgIGF0dHJzOiB7CiAgICAgICJ0eXBlIjogInByaW1hcnkiLAogICAgICAiZGlzYWJsZWQiOiBfdm0uaXNTdWJtaXREaXNhYmxlZAogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0uc3VibWl0KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoJ1Zzc3VlSWNvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0ubG9hZGluZywKICAgICAgZXhwcmVzc2lvbjogImxvYWRpbmciCiAgICB9XSwKICAgIGF0dHJzOiB7CiAgICAgICJuYW1lIjogImxvYWRpbmciCiAgICB9CiAgfSksIF92bS5fdigiXG5cbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoX3ZtLmxvYWRpbmcgPyAnc3VibWl0dGluZycgOiAnc3VibWl0Q29tbWVudCcpKSArICJcbiAgICAgICIpXSwgMSkgOiBfYygnVnNzdWVCdXR0b24nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWJ1dHRvbi1sb2dpbiIsCiAgICBhdHRyczogewogICAgICAidHlwZSI6ICJwcmltYXJ5IiwKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdsb2dpblRvQ29tbWVudCcsIHsKICAgICAgICBwbGF0Zm9ybTogX3ZtLnBsYXRmb3JtCiAgICAgIH0pCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS52c3N1ZS5sb2dpbigpOwogICAgICB9CiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdsb2dpbicsIHsKICAgIHBsYXRmb3JtOiBfdm0ucGxhdGZvcm0KICB9KSkgKyAiXG4gICAgICAiKV0pXSwgMSldKV0pOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDQgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kNyA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQ3ID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNyA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ3ID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQ3ID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fJDQsCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ0Cn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ3LCBfX3Z1ZV9zY3JpcHRfXyQ3LCBfX3Z1ZV9zY29wZV9pZF9fJDcsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ3LCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDcsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBWc3N1ZU5vdGljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQ1KSB7CiAgX2luaGVyaXRzKFZzc3VlTm90aWNlLCBfVnVlJDUpOwoKICB2YXIgX3N1cGVyNSA9IF9jcmVhdGVTdXBlcihWc3N1ZU5vdGljZSk7CgogIGZ1bmN0aW9uIFZzc3VlTm90aWNlKCkgewogICAgdmFyIF90aGlzNzsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVOb3RpY2UpOwoKICAgIF90aGlzNyA9IF9zdXBlcjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gcHJvZ3Jlc3MgZGF0YQoKICAgIF90aGlzNy5wcm9ncmVzcyA9IHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIHBlcmNlbnQ6IDAsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBzcGVlZDogMjAwCiAgICB9OyAvLyBhbGVydCBkYXRhCgogICAgX3RoaXM3LmFsZXJ0ID0gewogICAgICBzaG93OiBmYWxzZSwKICAgICAgbWVzc2FnZTogbnVsbCwKICAgICAgdGltZXI6IG51bGwKICAgIH07CiAgICByZXR1cm4gX3RoaXM3OwogIH0KICAvKioKICAgKiBTaG93IHByb2dyZXNzIHdoZW4gbG9hZGluZyBjb21tZW50cwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFZzc3VlTm90aWNlLCBbewogICAga2V5OiAib25Mb2FkaW5nQ29tbWVudHNDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTG9hZGluZ0NvbW1lbnRzQ2hhbmdlKHZhbCkgewogICAgICBpZiAodGhpcy52c3N1ZS5jb21tZW50cykgewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMucHJvZ3Jlc3NTdGFydCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnByb2dyZXNzRG9uZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy52c3N1ZS4kb24oJ2Vycm9yJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LmFsZXJ0U2hvdyhlLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJiZWZvcmVEZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgICB0aGlzLnZzc3VlLiRvZmYoJ2Vycm9yJyk7CiAgICAgIGlmICh0aGlzLnByb2dyZXNzLnRpbWVyICE9PSBudWxsKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucHJvZ3Jlc3MudGltZXIpOwogICAgICBpZiAodGhpcy5hbGVydC50aW1lciAhPT0gbnVsbCkgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmFsZXJ0LnRpbWVyKTsKICAgIH0KICAgIC8qKgogICAgICogUHJvZ3Jlc3Mgc3RhcnQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwcm9ncmVzc1N0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9ncmVzc1N0YXJ0KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHRoaXMucHJvZ3Jlc3Muc2hvdyA9IHRydWU7CiAgICAgIHRoaXMucHJvZ3Jlc3MucGVyY2VudCA9IDA7CiAgICAgIHRoaXMucHJvZ3Jlc3MudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOS5wcm9ncmVzcy5wZXJjZW50ICs9IDU7CgogICAgICAgIGlmIChfdGhpczkucHJvZ3Jlc3MucGVyY2VudCA+IDk0KSB7CiAgICAgICAgICBpZiAoX3RoaXM5LnByb2dyZXNzLnRpbWVyICE9PSBudWxsKSB3aW5kb3cuY2xlYXJJbnRlcnZhbChfdGhpczkucHJvZ3Jlc3MudGltZXIpOwogICAgICAgIH0KICAgICAgfSwgdGhpcy5wcm9ncmVzcy5zcGVlZCk7CiAgICB9CiAgICAvKioKICAgICAqIFByb2dyZXNzIHN0b3AKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwcm9ncmVzc0RvbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2dyZXNzRG9uZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy5wcm9ncmVzcy5wZXJjZW50ID0gMTAwOwogICAgICBpZiAodGhpcy5wcm9ncmVzcy50aW1lciAhPT0gbnVsbCkgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnByb2dyZXNzLnRpbWVyKTsKICAgICAgdGhpcy5wcm9ncmVzcy50aW1lciA9IG51bGw7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEwLnByb2dyZXNzLnNob3cgPSBmYWxzZTsKICAgICAgfSwgdGhpcy5wcm9ncmVzcy5zcGVlZCk7CiAgICB9CiAgICAvKioKICAgICAqIFNob3cgYWxlcnQgbWVzc2FnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImFsZXJ0U2hvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWxlcnRTaG93KGNvbnRlbnQpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdGhpcy5hbGVydC5zaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5hbGVydC5tZXNzYWdlID0gY29udGVudDsKICAgICAgaWYgKHRoaXMuYWxlcnQudGltZXIgIT09IG51bGwpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5hbGVydC50aW1lcik7CiAgICAgIHRoaXMuYWxlcnQudGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMS5hbGVydEhpZGUoKTsKICAgICAgfSwgMzAwMCk7CiAgICB9CiAgICAvKioKICAgICAqIEhpZGUgYWxlcnQgbWVzc2FnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImFsZXJ0SGlkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWxlcnRIaWRlKCkgewogICAgICB0aGlzLmFsZXJ0LnNob3cgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuYWxlcnQudGltZXIgIT09IG51bGwpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5hbGVydC50aW1lcik7CiAgICAgIHRoaXMuYWxlcnQudGltZXIgPSBudWxsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZzc3VlTm90aWNlOwp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW0luamVjdCgpXSwgVnNzdWVOb3RpY2UucHJvdG90eXBlLCAidnNzdWUiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3Zzc3VlLmlzTG9hZGluZ0NvbW1lbnRzJyldLCBWc3N1ZU5vdGljZS5wcm90b3R5cGUsICJvbkxvYWRpbmdDb21tZW50c0NoYW5nZSIsIG51bGwpOwoKVnNzdWVOb3RpY2UgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFRyYW5zaXRpb25GYWRlOiBfX3Z1ZV9jb21wb25lbnRfXyQxCiAgfQp9KV0sIFZzc3VlTm90aWNlKTsKdmFyIHNjcmlwdCQ4ID0gVnNzdWVOb3RpY2U7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDggPSBzY3JpcHQkODsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQ1ID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kNSgpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1ub3RpY2UiCiAgfSwgW19jKCdkaXYnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogX3ZtLnByb2dyZXNzLnNob3csCiAgICAgIGV4cHJlc3Npb246ICJwcm9ncmVzcy5zaG93IgogICAgfV0sCiAgICBzdGF0aWNDbGFzczogInZzc3VlLXByb2dyZXNzIiwKICAgIHN0eWxlOiB7CiAgICAgIHdpZHRoOiBfdm0ucHJvZ3Jlc3MucGVyY2VudCArICIlIiwKICAgICAgdHJhbnNpdGlvbjogImFsbCAiICsgX3ZtLnByb2dyZXNzLnNwZWVkICsgIm1zIGxpbmVhciIKICAgIH0KICB9KSwgX3ZtLl92KCIgIiksIF9jKCdUcmFuc2l0aW9uRmFkZScsIFtfYygnZGl2JywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS5hbGVydC5zaG93LAogICAgICBleHByZXNzaW9uOiAiYWxlcnQuc2hvdyIKICAgIH1dLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1hbGVydCIsCiAgICBkb21Qcm9wczogewogICAgICAidGV4dENvbnRlbnQiOiBfdm0uX3MoX3ZtLmFsZXJ0Lm1lc3NhZ2UpCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS5hbGVydEhpZGUoKTsKICAgICAgfQogICAgfQogIH0pXSldLCAxKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ1ID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDggPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kOCA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDggPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kOCA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kOCA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQ1LAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kNQp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kOCwgX192dWVfc2NyaXB0X18kOCwgX192dWVfc2NvcGVfaWRfXyQ4LCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kOCwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ4LCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVTdGF0dXMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkNikgewogIF9pbmhlcml0cyhWc3N1ZVN0YXR1cywgX1Z1ZSQ2KTsKCiAgdmFyIF9zdXBlcjYgPSBfY3JlYXRlU3VwZXIoVnNzdWVTdGF0dXMpOwoKICBmdW5jdGlvbiBWc3N1ZVN0YXR1cygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZVN0YXR1cyk7CgogICAgcmV0dXJuIF9zdXBlcjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIF9jcmVhdGVDbGFzcyhWc3N1ZVN0YXR1cywgW3sKICAgIGtleTogInN0YXR1cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMudnNzdWUuaXNGYWlsZWQpIHsKICAgICAgICByZXR1cm4gJ2ZhaWxlZCc7CiAgICAgIH0gZWxzZSBpZiAodGhpcy52c3N1ZS5pc0luaXRpYWxpemluZykgewogICAgICAgIHJldHVybiAnaW5pdGlhbGl6aW5nJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLnZzc3VlLmlzSXNzdWVOb3RDcmVhdGVkICYmICF0aGlzLnZzc3VlLmlzQ3JlYXRpbmdJc3N1ZSkgewogICAgICAgIGlmICh0aGlzLnZzc3VlLmlzQWRtaW4gfHwgIXRoaXMudnNzdWUuaXNMb2dpbmVkKSB7CiAgICAgICAgICByZXR1cm4gJ2lzc3VlTm90Q3JlYXRlZCc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAnZmFpbGVkJzsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy52c3N1ZS5pc0xvZ2luUmVxdWlyZWQpIHsKICAgICAgICByZXR1cm4gJ2xvZ2luUmVxdWlyZWQnOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnZzc3VlLmNvbW1lbnRzIHx8IHRoaXMudnNzdWUuaXNDcmVhdGluZ0lzc3VlKSB7CiAgICAgICAgcmV0dXJuICdsb2FkaW5nQ29tbWVudHMnOwogICAgICB9IGVsc2UgaWYgKHRoaXMudnNzdWUuY29tbWVudHMuZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gJ25vQ29tbWVudHMnOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkgewogICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdpc3N1ZU5vdENyZWF0ZWQnKSB7CiAgICAgICAgdGhpcy52c3N1ZS5wb3N0SXNzdWUoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gJ2xvZ2luUmVxdWlyZWQnKSB7CiAgICAgICAgdGhpcy52c3N1ZS5sb2dpbigpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVnNzdWVTdGF0dXM7Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZVN0YXR1cy5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpWc3N1ZVN0YXR1cyA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVHJhbnNpdGlvbkZhZGU6IF9fdnVlX2NvbXBvbmVudF9fJDEsCiAgICBWc3N1ZUljb246IF9fdnVlX2NvbXBvbmVudF9fJDIKICB9Cn0pXSwgVnNzdWVTdGF0dXMpOwp2YXIgc2NyaXB0JDkgPSBWc3N1ZVN0YXR1czsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kOSA9IHNjcmlwdCQ5OwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDYgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ2KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdUcmFuc2l0aW9uRmFkZScsIFtfdm0uc3RhdHVzID8gX2MoJ2RpdicsIHsKICAgIGtleTogX3ZtLnN0YXR1cywKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtc3RhdHVzIgogIH0sIFtbJ2ZhaWxlZCcsICdsb2FkaW5nQ29tbWVudHMnLCAnaW5pdGlhbGl6aW5nJ10uaW5jbHVkZXMoX3ZtLnN0YXR1cykgPyBfYygnVnNzdWVJY29uJywgewogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiBfdm0uc3RhdHVzID09PSAnZmFpbGVkJyA/ICdlcnJvcicgOiAnbG9hZGluZycKICAgIH0KICB9KSA6IF92bS5fZSgpLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLXN0YXR1cy1pbmZvIgogIH0sIFtfYyhbJ2lzc3VlTm90Q3JlYXRlZCcsICdsb2dpblJlcXVpcmVkJ10uaW5jbHVkZXMoX3ZtLnN0YXR1cykgPyAnYScgOiAnc3BhbicsIHsKICAgIHRhZzogIkNvbXBvbmVudCIsCiAgICBvbjogewogICAgICAiY2xpY2siOiBfdm0uaGFuZGxlQ2xpY2sKICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoX3ZtLnN0YXR1cykpICsgIlxuICAgICAgIildKV0sIDEpXSwgMSkgOiBfdm0uX2UoKV0pOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDYgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kOSA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQ5ID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kOSA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ5ID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQ5ID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fJDYsCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ2Cn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ5LCBfX3Z1ZV9zY3JpcHRfXyQ5LCBfX3Z1ZV9zY29wZV9pZF9fJDksIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ5LCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDksIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBWc3N1ZUJvZHkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkNykgewogIF9pbmhlcml0cyhWc3N1ZUJvZHksIF9WdWUkNyk7CgogIHZhciBfc3VwZXI3ID0gX2NyZWF0ZVN1cGVyKFZzc3VlQm9keSk7CgogIGZ1bmN0aW9uIFZzc3VlQm9keSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZUJvZHkpOwoKICAgIHJldHVybiBfc3VwZXI3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gVnNzdWVCb2R5Owp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW0luamVjdCgpXSwgVnNzdWVCb2R5LnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlQm9keSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVHJhbnNpdGlvbkZhZGU6IF9fdnVlX2NvbXBvbmVudF9fJDEsCiAgICBWc3N1ZUljb246IF9fdnVlX2NvbXBvbmVudF9fJDIsCiAgICBWc3N1ZUNvbW1lbnRzOiBfX3Z1ZV9jb21wb25lbnRfXyQ1LAogICAgVnNzdWVOZXdDb21tZW50OiBfX3Z1ZV9jb21wb25lbnRfXyQ3LAogICAgVnNzdWVOb3RpY2U6IF9fdnVlX2NvbXBvbmVudF9fJDgsCiAgICBWc3N1ZVN0YXR1czogX192dWVfY29tcG9uZW50X18kOQogIH0KfSldLCBWc3N1ZUJvZHkpOwp2YXIgc2NyaXB0JGEgPSBWc3N1ZUJvZHk7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJGEgPSBzY3JpcHQkYTsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQ3ID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kNygpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnVHJhbnNpdGlvbkZhZGUnLCBbIV92bS52c3N1ZS5pc0luaXRpYWxpemluZyA/IF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWJvZHkiCiAgfSwgW192bS52c3N1ZS5BUEkgPyBfYygnVnNzdWVOZXdDb21tZW50JykgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF9jKCdWc3N1ZU5vdGljZScpLCBfdm0uX3YoIiAiKSwgX2MoJ1RyYW5zaXRpb25GYWRlJywgW192bS52c3N1ZS5jb21tZW50cyAmJiBfdm0udnNzdWUuY29tbWVudHMuZGF0YS5sZW5ndGggPiAwID8gX2MoJ1Zzc3VlQ29tbWVudHMnKSA6IF9jKCdWc3N1ZVN0YXR1cycpXSwgMSldLCAxKSA6IF9jKCdWc3N1ZVN0YXR1cycpXSwgMSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kNyA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyRhID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJGEgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyRhID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGEgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJGEgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kNywKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDcKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJGEsIF9fdnVlX3NjcmlwdF9fJGEsIF9fdnVlX3Njb3BlX2lkX18kYSwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGEsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kYSwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlSGVhZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDgpIHsKICBfaW5oZXJpdHMoVnNzdWVIZWFkZXIsIF9WdWUkOCk7CgogIHZhciBfc3VwZXI4ID0gX2NyZWF0ZVN1cGVyKFZzc3VlSGVhZGVyKTsKCiAgZnVuY3Rpb24gVnNzdWVIZWFkZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVIZWFkZXIpOwoKICAgIHJldHVybiBfc3VwZXI4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gVnNzdWVIZWFkZXI7Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZUhlYWRlci5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpWc3N1ZUhlYWRlciA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudF0sIFZzc3VlSGVhZGVyKTsKdmFyIHNjcmlwdCRiID0gVnNzdWVIZWFkZXI7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJGIgPSBzY3JpcHQkYjsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQ4ID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kOCgpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1oZWFkZXIiCiAgfSwgW19jKCdhJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1oZWFkZXItY29tbWVudHMtY291bnQiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiBfdm0udnNzdWUuaXNzdWUgPyBfdm0udnNzdWUuaXNzdWUubGluayA6IG51bGwsCiAgICAgICJ0YXJnZXQiOiAiX2JsYW5rIiwKICAgICAgInJlbCI6ICJub29wZW5lciBub3JlZmVycmVyIgogICAgfQogIH0sIFtfYygnc3BhbicsIFtfdm0uX3YoIlxuICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuY29tbWVudHMgPyBfdm0udnNzdWUuJHRjKCdjb21tZW50cycsIF92bS52c3N1ZS5jb21tZW50cy5jb3VudCwgewogICAgY291bnQ6IF92bS52c3N1ZS5jb21tZW50cy5jb3VudAogIH0pIDogX3ZtLnZzc3VlLiR0YygnY29tbWVudHMnLCAwKSkgKyAiXG4gICAgIildKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWhlYWRlci1wb3dlcmVkLWJ5IgogIH0sIFtfYygnc3BhbicsIFtfdm0uX3YoIlBvd2VyZWQgYnkiKV0pLCBfdm0uX3YoIiAiKSwgX3ZtLnZzc3VlLkFQSSA/IF9jKCdzcGFuJywgW19jKCdhJywgewogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiBfdm0udnNzdWUuQVBJLnBsYXRmb3JtLmxpbmssCiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS5BUEkucGxhdGZvcm0ubmFtZSArICIgQVBJICIgKyBfdm0udnNzdWUuQVBJLnBsYXRmb3JtLnZlcnNpb24sCiAgICAgICJ0YXJnZXQiOiAiX2JsYW5rIiwKICAgICAgInJlbCI6ICJub29wZW5lciBub3JlZmVycmVyIgogICAgfQogIH0sIFtfdm0uX3YoIlxuICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS5BUEkucGxhdGZvcm0ubmFtZSkgKyAiXG4gICAgICAiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KCImIildKV0pIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfYygnYScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogImh0dHBzOi8vZ2l0aHViLmNvbS9tZXRlb3JseHkvdnNzdWUiLAogICAgICAidGl0bGUiOiAiVnNzdWUgdiIgKyBfdm0udnNzdWUudmVyc2lvbiwKICAgICAgInRhcmdldCI6ICJfYmxhbmsiLAogICAgICAicmVsIjogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICBWc3N1ZVxuICAgICIpXSldKV0pOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDggPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kYiA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyRiID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kYiA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyRiID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyRiID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fJDgsCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ4Cn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXyRiLCBfX3Z1ZV9zY3JpcHRfXyRiLCBfX3Z1ZV9zY29wZV9pZF9fJGIsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyRiLCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJGIsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBtZXNzYWdlcyA9IHsKICAvLyBhdXRoCiAgbG9naW46ICdMb2dpbiB3aXRoIHtwbGF0Zm9ybX0nLAogIGxvZ291dDogJ0xvZ291dCcsCiAgY3VycmVudFVzZXI6ICdDdXJyZW50IFVzZXInLAogIC8vIGNvbW1lbnQgaW5wdXQKICBsb2FkaW5nOiAnTG9hZGluZycsCiAgc3VibWl0OiAnU3VibWl0JywKICBzdWJtaXR0aW5nOiAnU3VibWl0dGluZycsCiAgc3VibWl0Q29tbWVudDogJ1N1Ym1pdCBDb21tZW50JywKICBjYW5jZWw6ICdDYW5jZWwnLAogIGVkaXQ6ICdFZGl0JywKICBlZGl0TW9kZTogJ0VkaXQgTW9kZScsCiAgImRlbGV0ZSI6ICdEZWxldGUnLAogIHJlcGx5OiAnUmVwbHknLAogIC8vIHJlYWN0aW9ucwogIGhlYXJ0OiAnSGVhcnQnLAogIGxpa2U6ICdMaWtlJywKICB1bmxpa2U6ICdVbmxpa2UnLAogIC8vIHBhZ2luYXRpb24KICBwZXJQYWdlOiAnQ29tbWVudHMgcGVyIHBhZ2UnLAogIHNvcnQ6ICdDbGljayB0byBjaGFuZ2UgdGhlIHNvcnQgZGlyZWN0aW9uJywKICBwYWdlOiAnUGFnZScsCiAgcHJldjogJ1ByZXZpb3VzIFBhZ2UnLAogIG5leHQ6ICdOZXh0IFBhZ2UnLAogIC8vIGhpbnQKICBjb21tZW50czogJ0NvbW1lbnRzIHwge2NvdW50fSBDb21tZW50IHwge2NvdW50fSBDb21tZW50cycsCiAgbG9naW5Ub0NvbW1lbnQ6ICdMb2dpbiB3aXRoIHtwbGF0Zm9ybX0gYWNjb3VudCB0byBsZWF2ZSBhIGNvbW1lbnQnLAogIHBsYWNlaG9sZGVyOiAnTGVhdmUgYSBjb21tZW50LiBTdHlsaW5nIHdpdGggTWFya2Rvd24gaXMgc3VwcG9ydGVkLiBDdHJsICsgRW50ZXIgdG8gc3VibWl0LicsCiAgbm9Mb2dpblBsYWNlSG9sZGVyOiAnTG9naW4gdG8gbGVhdmUgYSBjb21tZW50LiBTdHlsaW5nIHdpdGggTWFya2Rvd24gaXMgc3VwcG9ydGVkLiAnLAogIC8vIHN0YXR1cwogIGZhaWxlZDogJ0ZhaWxlZCB0byBsb2FkIGNvbW1lbnRzJywKICBpbml0aWFsaXppbmc6ICdJbml0aWFsaXppbmcuLi4nLAogIGlzc3VlTm90Q3JlYXRlZDogJ0NsaWNrIHRvIGNyZWF0ZSBpc3N1ZScsCiAgbG9hZGluZ0NvbW1lbnRzOiAnTG9hZGluZyBjb21tZW50cy4uLicsCiAgbG9naW5SZXF1aXJlZDogJ0xvZ2luIHRvIHZpZXcgY29tbWVudHMnLAogIG5vQ29tbWVudHM6ICdObyBjb21tZW50cyB5ZXQuIExlYXZlIHRoZSBmaXJzdCBjb21tZW50ICEnLAogIC8vIGFsZXJ0cwogIHJlYWN0aW9uR2l2ZW46ICJBbHJlYWR5IGdpdmVuICd7cmVhY3Rpb259JyByZWFjdGlvbiIsCiAgZGVsZXRlQ29uZmlybTogJ0NvbmZpcm0gdG8gZGVsZXRlIHRoaXMgY29tbWVudCA/JywKICBkZWxldGVGYWlsZWQ6ICdGYWlsZWQgdG8gZGVsZXRlIGNvbW1lbnQnCn07CnZhciBtZXNzYWdlcyQxID0gewogIC8vIGF1dGgKICBsb2dpbjogJ+S9v+eUqCB7cGxhdGZvcm19IOeZu+W9lScsCiAgbG9nb3V0OiAn6YCA5Ye655m75b2VJywKICBjdXJyZW50VXNlcjogJ+W9k+WJjeeUqOaItycsCiAgLy8gY29tbWVudCBpbnB1dAogIGxvYWRpbmc6ICfliqDovb3kuK0nLAogIHN1Ym1pdDogJ+aPkOS6pCcsCiAgc3VibWl0dGluZzogJ+WPkeihqOS4rScsCiAgc3VibWl0Q29tbWVudDogJ+WPkeihqOivhOiuuicsCiAgY2FuY2VsOiAn5Y+W5raIJywKICBlZGl0OiAn57yW6L6RJywKICBlZGl0TW9kZTogJ+e8lui+keaooeW8jycsCiAgImRlbGV0ZSI6ICfliKDpmaQnLAogIHJlcGx5OiAn5Zue5aSNJywKICAvLyByZWFjdGlvbnMKICBoZWFydDogJ+WWnOasoicsCiAgbGlrZTogJ+i1nicsCiAgdW5saWtlOiAn6LipJywKICAvLyBwYWdpbmF0aW9uCiAgcGVyUGFnZTogJ+avj+mhteivhOiuuuaVsCcsCiAgc29ydDogJ+eCueWHu+aUueWPmOaOkuW6j+aWueW8jycsCiAgcGFnZTogJ+mhteaVsCcsCiAgcHJldjogJ+S4iuS4gOmhtScsCiAgbmV4dDogJ+S4i+S4gOmhtScsCiAgLy8gaGludAogIGNvbW1lbnRzOiAn6K+E6K66IHwge2NvdW50fSDmnaHor4TorrogfCB7Y291bnR9IOadoeivhOiuuicsCiAgbG9naW5Ub0NvbW1lbnQ6ICfkvb/nlKgge3BsYXRmb3JtfSDluJDlj7fnmbvlvZXlkI7lj5Hooajor4TorronLAogIHBsYWNlaG9sZGVyOiAn55WZ5LiL5L2g55qE6K+E6K665Lio5pSv5oyBIE1hcmtkb3duIOivreazleS4qEN0cmwgKyBFbnRlciDlj5Hooajor4TorronLAogIG5vTG9naW5QbGFjZUhvbGRlcjogJ+eZu+W9leWQjuaJjeiDveWPkeihqOivhOiuuuS4qOaUr+aMgSBNYXJrZG93biDor63ms5UnLAogIC8vIHN0YXR1cwogIGZhaWxlZDogJ+ivhOiuuuWKoOi9veWksei0pScsCiAgaW5pdGlhbGl6aW5nOiAn5q2j5Zyo5Yid5aeL5YyWLi4uJywKICBpc3N1ZU5vdENyZWF0ZWQ6ICfngrnlh7vliJvlu7ogSXNzdWUnLAogIGxvYWRpbmdDb21tZW50czogJ+ato+WcqOWKoOi9veivhOiuui4uLicsCiAgbG9naW5SZXF1aXJlZDogJ+eZu+W9leWQjuafpeeci+ivhOiuuicsCiAgbm9Db21tZW50czogJ+i/mOayoeacieivhOiuuu+8jOadpeWPkeihqOesrOS4gOadoeivhOiuuuWQp++8gScsCiAgLy8gYWxlcnRzCiAgcmVhY3Rpb25HaXZlbjogIlx1NURGMlx1N0VDRlx1NkRGQlx1NTJBMFx1OEZDNyAne3JlYWN0aW9ufScgXHU0RTg2IiwKICBkZWxldGVDb25maXJtOiAn56Gu6K6k6KaB5Yig6Zmk6K+l6K+E6K665ZCX77yfJywKICBkZWxldGVGYWlsZWQ6ICfor4TorrrliKDpmaTlpLHotKUnCn07CnZhciBtZXNzYWdlcyQyID0gewogIC8vIGF1dGgKICBsb2dpbjogJ0VudHJhciBjb20ge3BsYXRmb3JtfScsCiAgbG9nb3V0OiAnU2FpcicsCiAgY3VycmVudFVzZXI6ICdVc3XDoXJpbyBBdHVhbCcsCiAgLy8gY29tbWVudCBpbnB1dAogIGxvYWRpbmc6ICdDYXJyZWdhbmRvJywKICBzdWJtaXQ6ICdFbnZpYXInLAogIHN1Ym1pdHRpbmc6ICdFbnZpYW5kbycsCiAgc3VibWl0Q29tbWVudDogJ0VudmlhciBDb21lbnTDoXJpbycsCiAgY2FuY2VsOiAnQ2FuY2VsYXInLAogIGVkaXQ6ICdFZGl0YXInLAogIGVkaXRNb2RlOiAnTW9kbyBkZSBFZGnDp8OjbycsCiAgImRlbGV0ZSI6ICdBcGFnYXInLAogIHJlcGx5OiAnUmVzcG9uZGVyJywKICAvLyByZWFjdGlvbnMKICBoZWFydDogJ0hlYXJ0JywKICBsaWtlOiAnTGlrZScsCiAgdW5saWtlOiAnVW5saWtlJywKICAvLyBwYWdpbmF0aW9uCiAgcGVyUGFnZTogJ0NvbWVudMOhcmlvcyBwb3IgcMOhZ2luYScsCiAgc29ydDogJ0NsaXF1ZSBwYXJhIGFsdGVyYXIgYSBvcmRlbmHDp8OjbycsCiAgcGFnZTogJ1DDoWdpbmEnLAogIHByZXY6ICdQw6FnaW5hIEFudGVyaW9yJywKICBuZXh0OiAnUHLDs3hpbWEgUMOhZ2luYScsCiAgLy8gaGludAogIGNvbW1lbnRzOiAnQ29tZW50w6FyaW9zIHwge2NvdW50fSBDb21lbnTDoXJpbyB8IHtjb3VudH0gQ29tZW50w6FyaW9zJywKICBsb2dpblRvQ29tbWVudDogJ0VudHJlIGNvbSB1bWEgY29udGEge3BsYXRmb3JtfSBwYXJhIGRlaXhhciB1bSBjb21lbnTDoXJpbycsCiAgcGxhY2Vob2xkZXI6ICdEZWl4ZSB1bSBjb21lbnTDoXJpby4gRXN0aWxvcyBjb20gTWFya2Rvd24gc3Vwb3J0YWRvcy4gQ3RybCArIEVudGVyIHBhcmEgZW52aWFyLicsCiAgbm9Mb2dpblBsYWNlSG9sZGVyOiAnRW50cmUgcGFyYSBkZWl4YXIgdW0gY29tZW50w6FyaW8uIEVzdGlsb3MgY29tIE1hcmtkb3duIHN1cG9ydGFkb3MuICcsCiAgLy8gc3RhdHVzCiAgZmFpbGVkOiAnRmFsaGEgYW8gY2FycmVnYXIgY29tZW50w6FyaW9zJywKICBpbml0aWFsaXppbmc6ICdJbmljaWFsaXphbmRvLi4uJywKICBpc3N1ZU5vdENyZWF0ZWQ6ICdDbGljayB0byBjcmVhdGUgaXNzdWUnLAogIGxvYWRpbmdDb21tZW50czogJ0NhcnJlZ2FuZG8gY29tZW50w6FyaW9zLi4uJywKICBsb2dpblJlcXVpcmVkOiAnRW50cmFyIHBhcmEgdmlzdWFsaXphciBjb21lbnTDoXJpb3MnLAogIG5vQ29tbWVudHM6ICdOZW5odW0gY29tZW50w6FyaW8uIERlaXhlIG8gcHJpbWVpcm8gY29tZW50w6FyaW8hJywKICAvLyBhbGVydHMKICByZWFjdGlvbkdpdmVuOiAiSlx4RTEgcmVhZ2l1IGNvbSAne3JlYWN0aW9ufSciLAogIGRlbGV0ZUNvbmZpcm06ICdBcGFnYXIgZXN0ZSBjb21lbnTDoXJpbz8nLAogIGRlbGV0ZUZhaWxlZDogJ0ZhbGhhIGFvIGFwYWdhciBjb21lbnTDoXJpbycKfTsKdmFyIG1lc3NhZ2VzJDMgPSB7CiAgLy8gYXV0aAogIGxvZ2luOiAne3BsYXRmb3JtfSDjgafjg63jgrDjgqTjg7MnLAogIGxvZ291dDogJ+ODreOCsOOCouOCpuODiCcsCiAgY3VycmVudFVzZXI6ICfnj77lnKjjga7jg6bjg7zjgrbjg7wnLAogIC8vIGNvbW1lbnQgaW5wdXQKICBsb2FkaW5nOiAn6Kqt44G/6L6844G/5LitJywKICBzdWJtaXQ6ICfpgIHkv6EnLAogIHN1Ym1pdHRpbmc6ICfpgIHkv6HkuK0nLAogIHN1Ym1pdENvbW1lbnQ6ICfjgrPjg6Hjg7Pjg4jjgpLpgIHkv6EnLAogIGNhbmNlbDogJ+OCreODo+ODs+OCu+ODqycsCiAgZWRpdDogJ+e3qOmbhicsCiAgZWRpdE1vZGU6ICfnt6jpm4bjg6Ljg7zjg4knLAogICJkZWxldGUiOiAn5YmK6ZmkJywKICByZXBseTogJ+i/lOS/oScsCiAgLy8gcmVhY3Rpb25zCiAgaGVhcnQ6ICfjg4/jg7zjg4gnLAogIGxpa2U6ICfpq5joqZXkvqEnLAogIHVubGlrZTogJ+S9juipleS+oScsCiAgLy8gcGFnaW5hdGlvbgogIHBlclBhZ2U6ICfjgrPjg6Hjg7Pjg4gv44Oa44O844K4JywKICBzb3J0OiAn5Lim44Gz6aCG44KS5aSJ5pu044GZ44KL44Gr44Gv44Kv44Oq44OD44Kv44GX44Gm44GP44Gg44GV44GEJywKICBwYWdlOiAn44Oa44O844K4JywKICBwcmV2OiAn5YmN44Gu44Oa44O844K4JywKICBuZXh0OiAn5qyh44Gu44Oa44O844K4JywKICAvLyBoaW50CiAgY29tbWVudHM6ICfjgrPjg6Hjg7Pjg4ggfCB7Y291bnR9IOOCs+ODoeODs+ODiCB8IHtjb3VudH0g44Kz44Oh44Oz44OIJywKICBsb2dpblRvQ29tbWVudDogJ+OCs+ODoeODs+ODiOOCkuaui+OBmeOBq+OBryB7cGxhdGZvcm19IOOCouOCq+OCpuODs+ODiOOBp+ODreOCsOOCpOODs+OBl+OBpuOBj+OBoOOBleOBhOOAgicsCiAgcGxhY2Vob2xkZXI6ICfjgrPjg6Hjg7Pjg4jjgpLmrovjgZfjgabjgY/jgaDjgZXjgYTjgIJNYXJrZG93biDoqJjms5XjgpLjgrXjg53jg7zjg4jjgZfjgabjgYTjgb7jgZnjgIIgQ3RybCArIEVudGVyIOOBp+mAgeS/oeOBp+OBjeOBvuOBmeOAgicsCiAgbm9Mb2dpblBsYWNlSG9sZGVyOiAn44Kz44Oh44Oz44OI44KS5q6L44GZ44Gr44Gv44Ot44Kw44Kk44Oz44GX44Gm44GP44Gg44GV44GE44CC44Oe44O844Kv44OA44Km44Oz6KiY5rOV44KS44K144Od44O844OI44GX44Gm44GE44G+44GZ44CCJywKICAvLyBzdGF0dXMKICBmYWlsZWQ6ICfjgrPjg6Hjg7Pjg4jjga7oqq3jgb/ovrzjgb/jgavlpLHmlZfjgZfjgb7jgZfjgZ8nLAogIGluaXRpYWxpemluZzogJ+WIneacn+WMluS4rS4uLicsCiAgaXNzdWVOb3RDcmVhdGVkOiAnQ2xpY2sgdG8gY3JlYXRlIGlzc3VlJywKICBsb2FkaW5nQ29tbWVudHM6ICfjgrPjg6Hjg7Pjg4jjga7oqq3jgb/ovrzjgb/kuK0uLi4nLAogIGxvZ2luUmVxdWlyZWQ6ICfjgrPjg6Hjg7Pjg4jjgpLopovjgovjgavjga/jg63jgrDjgqTjg7PjgZfjgabjgY/jgaDjgZXjgYQnLAogIG5vQ29tbWVudHM6ICfjgb7jgaDjgrPjg6Hjg7Pjg4jjgYzjgYLjgorjgb7jgZvjgpPjgILmnIDliJ3jga7jgrPjg6Hjg7Pjg4jjgpLmrovjgZfjgb7jgZfjgofjgYbvvIEnLAogIC8vIGFsZXJ0cwogIHJlYWN0aW9uR2l2ZW46ICJcdTY1RTJcdTMwNkIgJ3tyZWFjdGlvbn0nIFx1MzA2RVx1MzBFQVx1MzBBMlx1MzBBRlx1MzBCN1x1MzBFN1x1MzBGM1x1MzA5Mlx1MzA1N1x1MzA2Nlx1MzA0NFx1MzA3RVx1MzA1OSIsCiAgZGVsZXRlQ29uZmlybTogJ+acrOW9k+OBq+OCs+ODoeODs+ODiOOCkuWJiumZpOOBl+OBpuOCguOBhOOBhOOBp+OBmeOBi++8nycsCiAgZGVsZXRlRmFpbGVkOiAn44Kz44Oh44Oz44OI44Gu5YmK6Zmk44Gr5aSx5pWX44GX44G+44GX44GfJwp9Owp2YXIgbWVzc2FnZXMkNCA9IHsKICAvLyBhdXRoCiAgbG9naW46ICfXlNeq15fXkdeo15Ug16LXnSB7cGxhdGZvcm19JywKICBsb2dvdXQ6ICfXlNeq16DXqten15UnLAogIGN1cnJlbnRVc2VyOiAn157Xqdeq157XqS/XqiDXoNeV15vXl9eZL9eqJywKICAvLyBjb21tZW50IGlucHV0CiAgbG9hZGluZzogJ9eY15XXotefJywKICBzdWJtaXQ6ICfXqdec15nXl9eUJywKICBzdWJtaXR0aW5nOiAn16nXldec15cnLAogIHN1Ym1pdENvbW1lbnQ6ICfXqdec15nXl9eqINeq15LXldeR15QnLAogIGNhbmNlbDogJ9eR15nXmNecJywKICBlZGl0OiAn16LXqNeZ15vXlCcsCiAgZWRpdE1vZGU6ICfXntem15Eg16LXqNeZ15vXlCcsCiAgImRlbGV0ZSI6ICfXnteX15nXp9eUJywKICByZXBseTogJ9eq16nXldeR15QnLAogIC8vIHJlYWN0aW9ucwogIGhlYXJ0OiAn15zXkScsCiAgbGlrZTogJ9ec15nXmdenJywKICB1bmxpa2U6ICfXkNeg15zXmdeZ16cnLAogIC8vIHBhZ2luYXRpb24KICBwZXJQYWdlOiAn16rXkteV15HXldeqINec15PXoycsCiAgc29ydDogJ9ec15fXpteVINeb15PXmSDXnNep16DXldeqINeQ16og15vXmdeV15XXnyDXlNee15nXldefJywKICBwYWdlOiAn15PXoycsCiAgcHJldjogJ9eU15PXoyDXlNen15XXk9edJywKICBuZXh0OiAn15TXk9ejINeU15HXkCcsCiAgLy8gaGludAogIGNvbW1lbnRzOiAn16rXkteV15HXldeqIHwge2NvdW50fSDXqteS15XXkdeUIHwge2NvdW50fSDXqteS15XXkdeV16onLAogIGxvZ2luVG9Db21tZW50OiAn15TXqteX15HXqNeVINei150g15fXqdeR15XXnyB7cGxhdGZvcm19INeb15PXmSDXnNeU16nXkNeZ16gg16rXkteV15HXlCcsCiAgcGxhY2Vob2xkZXI6ICfXlNep15DXmdeo15Ug16rXkteV15HXlC4g15nXqSDXqtee15nXm9eUINeR16LXmdem15XXkSDXkdei15bXqNeqIE1hcmtkb3duLiBDdHJsICsgRW50ZXIg15vXk9eZINec16nXnNeV15cuJywKICBub0xvZ2luUGxhY2VIb2xkZXI6ICfXlNeq15fXkdeo15Ug15vXk9eZINec15TXqdeQ15nXqCDXqteS15XXkdeULiDXmdepINeq157Xmdeb15Qg15HXoteZ16bXldeRINeR16LXlteo16ogTWFya2Rvd24uICcsCiAgLy8gc3RhdHVzCiAgZmFpbGVkOiAn15vXqdec15XXnyDXkdeY16LXmdeg16og15TXqteS15XXkdeV16onLAogIGluaXRpYWxpemluZzogJ9ee15DXqteX15wuLi4nLAogIGlzc3VlTm90Q3JlYXRlZDogJ9ec15fXpteVINec15nXpteZ16jXqiBpc3N1ZScsCiAgbG9hZGluZ0NvbW1lbnRzOiAn15jXldei158g16rXkteV15HXldeqLi4uJywKICBsb2dpblJlcXVpcmVkOiAn15TXqteX15HXqNeVINeb15PXmSDXnNem16TXldeqINeR16rXkteV15HXldeqJywKICBub0NvbW1lbnRzOiAn16LXk9eZ15nXnyDXkNeZ158g16rXkteV15HXldeqLiDXlNep15DXmdeo15Ug16rXkteV15HXlCDXqNeQ16nXldeg15QgIScsCiAgLy8gYWxlcnRzCiAgcmVhY3Rpb25HaXZlbjogIlx1MDVEQlx1MDVEMVx1MDVFOCBcdTA1RTBcdTA1RDlcdTA1RUFcdTA1REYgXHUwNUQ3XHUwNUQ5XHUwNUQ1XHUwNUQ1XHUwNUQ5ICd7cmVhY3Rpb259JyIsCiAgZGVsZXRlQ29uZmlybTogJ9eR15jXldeX15nXnSDXkdee15fXmden16og15TXqteS15XXkdeUID8nLAogIGRlbGV0ZUZhaWxlZDogJ9eb16nXnNeV158g15HXnteX15nXp9eqINeU16rXkteV15HXlCcKfTsKCmlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFZ1ZSwgJyRpMThuJykpIHsKICBWdWUudXNlKFZ1ZUkxOG4pOwp9Cgp2YXIgaTE4biA9IG5ldyBWdWVJMThuKHsKICBsb2NhbGU6ICdlbicsCiAgZmFsbGJhY2tMb2NhbGU6ICdlbicsCiAgbWVzc2FnZXM6IHsKICAgIGVuOiBtZXNzYWdlcywKICAgICdlbi1VUyc6IG1lc3NhZ2VzLAogICAgemg6IG1lc3NhZ2VzJDEsCiAgICAnemgtQ04nOiBtZXNzYWdlcyQxLAogICAgcHQ6IG1lc3NhZ2VzJDIsCiAgICAncHQtQlInOiBtZXNzYWdlcyQyLAogICAgamE6IG1lc3NhZ2VzJDMsCiAgICAnamEtSlAnOiBtZXNzYWdlcyQzLAogICAgaGU6IG1lc3NhZ2VzJDQsCiAgICAnaGUtSUwnOiBtZXNzYWdlcyQ0CiAgfQp9KTsKCnZhciBWc3N1ZVN0b3JlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDkpIHsKICBfaW5oZXJpdHMoVnNzdWVTdG9yZSwgX1Z1ZSQ5KTsKCiAgdmFyIF9zdXBlcjkgPSBfY3JlYXRlU3VwZXIoVnNzdWVTdG9yZSk7CgogIGZ1bmN0aW9uIFZzc3VlU3RvcmUoKSB7CiAgICB2YXIgX3RoaXMxMjsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVTdG9yZSk7CgogICAgX3RoaXMxMiA9IF9zdXBlcjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICBfdGhpczEyLnRpdGxlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdChvcHRpb25zLnByZWZpeCkuY29uY2F0KGRvY3VtZW50LnRpdGxlKTsKICAgIH07CgogICAgX3RoaXMxMi5pc3N1ZUlkID0gbnVsbDsKICAgIF90aGlzMTIub3B0aW9ucyA9IG51bGw7CiAgICBfdGhpczEyLkFQSSA9IG51bGw7CiAgICBfdGhpczEyLmFjY2Vzc1Rva2VuID0gbnVsbDsKICAgIF90aGlzMTIudXNlciA9IG51bGw7CiAgICBfdGhpczEyLmlzc3VlID0gbnVsbDsKICAgIF90aGlzMTIuY29tbWVudHMgPSBudWxsOwogICAgX3RoaXMxMi5xdWVyeSA9IHsKICAgICAgcGFnZTogMSwKICAgICAgcGVyUGFnZTogMTAsCiAgICAgIHNvcnQ6ICdkZXNjJwogICAgfTsKICAgIF90aGlzMTIuaXNJbml0aWFsaXppbmcgPSB0cnVlOwogICAgX3RoaXMxMi5pc0lzc3VlTm90Q3JlYXRlZCA9IGZhbHNlOwogICAgX3RoaXMxMi5pc0xvZ2luUmVxdWlyZWQgPSBmYWxzZTsKICAgIF90aGlzMTIuaXNGYWlsZWQgPSBmYWxzZTsKICAgIF90aGlzMTIuaXNDcmVhdGluZ0lzc3VlID0gZmFsc2U7CiAgICBfdGhpczEyLmlzTG9hZGluZ0NvbW1lbnRzID0gZmFsc2U7CiAgICBfdGhpczEyLmlzQ3JlYXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICBfdGhpczEyLmlzVXBkYXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICByZXR1cm4gX3RoaXMxMjsKICB9CgogIF9jcmVhdGVDbGFzcyhWc3N1ZVN0b3JlLCBbewogICAga2V5OiAidmVyc2lvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICIxLjQuNyI7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNzdWVUaXRsZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucyA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnRpdGxlID09PSAnZnVuY3Rpb24nID8gdGhpcy50aXRsZSh0aGlzLm9wdGlvbnMpIDogIiIuY29uY2F0KHRoaXMub3B0aW9ucy5wcmVmaXgpLmNvbmNhdCh0aGlzLnRpdGxlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1BlbmRpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTG9hZGluZ0NvbW1lbnRzIHx8IHRoaXMuaXNDcmVhdGluZ0NvbW1lbnQgfHwgdGhpcy5pc1VwZGF0aW5nQ29tbWVudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0xvZ2luZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuICE9PSBudWxsICYmIHRoaXMudXNlciAhPT0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0FkbWluIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zICE9PSBudWxsICYmIHRoaXMuYWNjZXNzVG9rZW4gIT09IG51bGwgJiYgdGhpcy51c2VyICE9PSBudWxsICYmICh0aGlzLnVzZXIudXNlcm5hbWUgPT09IHRoaXMub3B0aW9ucy5vd25lciB8fCB0aGlzLm9wdGlvbnMuYWRtaW5zLmluY2x1ZGVzKHRoaXMudXNlci51c2VybmFtZSkpOwogICAgfQogICAgLyoqCiAgICAgKiB0aGUga2V5IG9mIGFjY2VzcyB0b2tlbiBmb3IgbG9jYWwgc3RvcmFnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImFjY2Vzc1Rva2VuS2V5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5BUEkgPyAiVnNzdWUuIi5jb25jYXQodGhpcy5BUEkucGxhdGZvcm0ubmFtZS50b0xvd2VyQ2FzZSgpLCAiLmFjY2Vzc190b2tlbiIpIDogJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAib25RdWVyeVBlclBhZ2VDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUXVlcnlQZXJQYWdlQ2hhbmdlKCkgewogICAgICB0aGlzLnF1ZXJ5LnBhZ2UgPSAxOwogICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25RdWVyeUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25RdWVyeUNoYW5nZSgpIHsKICAgICAgdGhpcy5nZXRDb21tZW50cygpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgb3B0aW9ucyBvZiBWc3N1ZQogICAgICovCgogIH0sIHsKICAgIGtleTogInNldE9wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykgewogICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsKICAgICAgICBsYWJlbHM6IFsnVnNzdWUnXSwKICAgICAgICBzdGF0ZTogJ1Zzc3VlJywKICAgICAgICBwcmVmaXg6ICdbVnNzdWVdJywKICAgICAgICBhZG1pbnM6IFtdLAogICAgICAgIHBlclBhZ2U6IDEwLAogICAgICAgIHByb3h5OiBmdW5jdGlvbiBwcm94eSh1cmwpIHsKICAgICAgICAgIHJldHVybiAiaHR0cHM6Ly9jb3JzLWFueXdoZXJlLmhlcm9rdWFwcC5jb20vIi5jb25jYXQodXJsKTsKICAgICAgICB9LAogICAgICAgIGlzc3VlQ29udGVudDogZnVuY3Rpb24gaXNzdWVDb250ZW50KF9yZWY1KSB7CiAgICAgICAgICB2YXIgdXJsID0gX3JlZjUudXJsOwogICAgICAgICAgcmV0dXJuIHVybDsKICAgICAgICB9LAogICAgICAgIGF1dG9DcmVhdGVJc3N1ZTogZmFsc2UKICAgICAgfSwgb3B0aW9ucyk7IC8vIGNoZWNrIG9wdGlvbnMKCiAgICAgIHZhciByZXF1aXJlZE9wdGlvbnMgPSBbJ2FwaScsICdvd25lcicsICdyZXBvJywgJ2NsaWVudElkJ107CgogICAgICBmb3IgKHZhciBfaSA9IDAsIF9yZXF1aXJlZE9wdGlvbnMgPSByZXF1aXJlZE9wdGlvbnM7IF9pIDwgX3JlcXVpcmVkT3B0aW9ucy5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YXIgb3B0ID0gX3JlcXVpcmVkT3B0aW9uc1tfaV07CgogICAgICAgIGlmICghdGhpcy5vcHRpb25zW29wdF0pIHsKICAgICAgICAgIGNvbnNvbGUud2FybigiW1Zzc3VlXSB0aGUgb3B0aW9uICciLmNvbmNhdChvcHQsICInIGlzIHJlcXVpcmVkIikpOwogICAgICAgIH0KICAgICAgfSAvLyBzZXQgbG9jYWxlCgoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhbGUpIHsKICAgICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHRoaXMub3B0aW9ucy5sb2NhbGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGxvY2FsZXMgPSBPYmplY3Qua2V5cyh0aGlzLiRpMThuLm1lc3NhZ2VzKTsKICAgICAgICB2YXIgbmF2TGFuZ3MgPSB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlczsKICAgICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IG5hdkxhbmdzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGxvY2FsZXMuaW5jbHVkZXMoaXRlbSk7CiAgICAgICAgfSkuc2hpZnQoKSB8fCAnZW4nOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEluaXRpYWxpemF0aW9uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0U3RvcmUoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdENvbW1lbnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gX2NvbnRleHQ1WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICAgIGlmIChfY29udGV4dDUudDAucmVzcG9uc2UgJiYgWzQwMSwgNDAzXS5pbmNsdWRlcyhfY29udGV4dDUudDAucmVzcG9uc2Uuc3RhdHVzKSkgewogICAgICAgICAgICAgICAgICAvLyBpbiBzb21lIGNhc2VzLCByZXF1aXJlIGxvZ2luIHRvIGxvYWQgY29tbWVudHMKICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvZ2luUmVxdWlyZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDUudDApOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0OwogICAgfSgpCiAgICAvKioKICAgICAqIEluaXQgVnNzdWVTdG9yZQogICAgICovCgogIH0sIHsKICAgIGtleTogImluaXRTdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRTdG9yZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIEFQSUNvbnN0cnVjdG9yOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3B0aW9ucyBhcmUgcmVxdWlyZWQgdG8gaW5pdGlhbGl6ZSBWc3N1ZScpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAvLyByZXNldCBkYXRhCiAgICAgICAgICAgICAgICB0aGlzLkFQSSA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLmlzc3VlID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5xdWVyeSA9IHsKICAgICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgICAgcGVyUGFnZTogdGhpcy5vcHRpb25zLnBlclBhZ2UsCiAgICAgICAgICAgICAgICAgIHNvcnQ6ICdkZXNjJwogICAgICAgICAgICAgICAgfTsgLy8gcmVzZXQgc3RhdHVzCgogICAgICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmlzSXNzdWVOb3RDcmVhdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9naW5SZXF1aXJlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5pc0ZhaWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nSXNzdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nQ29tbWVudHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZ0NvbW1lbnQgPSBmYWxzZTsgLy8gZ2V0IHRoZSBWc3N1ZUFQSSBpbnN0YW5jZSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMuYXBpCgogICAgICAgICAgICAgICAgQVBJQ29uc3RydWN0b3IgPSB0aGlzLm9wdGlvbnMuYXBpOwogICAgICAgICAgICAgICAgdGhpcy5BUEkgPSBuZXcgQVBJQ29uc3RydWN0b3IoewogICAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLm9wdGlvbnMuYmFzZVVSTCwKICAgICAgICAgICAgICAgICAgbGFiZWxzOiB0aGlzLm9wdGlvbnMubGFiZWxzLAogICAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5vcHRpb25zLnN0YXRlLAogICAgICAgICAgICAgICAgICBvd25lcjogdGhpcy5vcHRpb25zLm93bmVyLAogICAgICAgICAgICAgICAgICByZXBvOiB0aGlzLm9wdGlvbnMucmVwbywKICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMub3B0aW9ucy5jbGllbnRJZCwKICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0LAogICAgICAgICAgICAgICAgICBwcm94eTogdGhpcy5vcHRpb25zLnByb3h5CiAgICAgICAgICAgICAgICB9KTsgLy8gaGFuZGxlIGF1dGhvcml6YXRpb24KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQXV0aCgpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAyMTsKICAgICAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuZmluaXNoKDIxKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcywgW1swLCwgMjEsIDI0XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0U3RvcmUoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0U3RvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluaXRTdG9yZTsKICAgIH0oKQogICAgLyoqCiAgICAgKiBJbml0IGNvbW1lbnRzCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaW5pdENvbW1lbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaW5pdENvbW1lbnRzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgX3lpZWxkJFByb21pc2UkYWxsLCBfeWllbGQkUHJvbWlzZSRhbGwyLCBpc3N1ZSwgY29tbWVudHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5BUEkgfHwgIXRoaXMub3B0aW9ucykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc3N1ZUlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5BUEkuZ2V0SXNzdWUoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVJZDogdGhpcy5pc3N1ZUlkCiAgICAgICAgICAgICAgICB9KSwgdGhpcy5BUEkuZ2V0Q29tbWVudHMoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVJZDogdGhpcy5pc3N1ZUlkLAogICAgICAgICAgICAgICAgICBxdWVyeTogdGhpcy5xdWVyeQogICAgICAgICAgICAgICAgfSldKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgICBfeWllbGQkUHJvbWlzZSRhbGwyID0gX3NsaWNlZFRvQXJyYXkoX3lpZWxkJFByb21pc2UkYWxsLCAyKTsKICAgICAgICAgICAgICAgIGlzc3VlID0gX3lpZWxkJFByb21pc2UkYWxsMlswXTsKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gX3lpZWxkJFByb21pc2UkYWxsMlsxXTsKICAgICAgICAgICAgICAgIHRoaXMuaXNzdWUgPSBpc3N1ZTsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBjb21tZW50czsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5BUEkuZ2V0SXNzdWUoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVUaXRsZTogdGhpcy5pc3N1ZVRpdGxlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHRoaXMuaXNzdWUgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmlzc3VlID09PSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgaXNzdWUgb2YgdGhpcyBwYWdlIGRvZXMgbm90IGV4aXN0CiAgICAgICAgICAgICAgICB0aGlzLmlzSXNzdWVOb3RDcmVhdGVkID0gdHJ1ZTsgLy8gdHJ5IHRvIGNyZWF0ZSBpc3N1ZSB3aGVuIGBhdXRvQ3JlYXRlSXNzdWUgPSB0cnVlYAoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmF1dG9DcmVhdGVJc3N1ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zdElzc3VlKCk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tbWVudHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluaXRDb21tZW50cygpIHsKICAgICAgICByZXR1cm4gX2luaXRDb21tZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdENvbW1lbnRzOwogICAgfSgpCiAgICAvKioKICAgICAqIFBvc3QgYSBuZXcgaXNzdWUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwb3N0SXNzdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wb3N0SXNzdWUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciBpc3N1ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLm9wdGlvbnMgfHwgdGhpcy5pc3N1ZSB8fCB0aGlzLmlzc3VlSWQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAvLyBsb2dpbiB0byBjcmVhdGUgaXNzdWUKICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0xvZ2luZWQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2dpbigpOwogICAgICAgICAgICAgICAgfSAvLyBvbmx5IG93bmVyL2FkbWlucyBjYW4gY3JlYXRlIGlzc3VlCgoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWRtaW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gNTsKICAgICAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ0lzc3VlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IHRoaXMuQVBJOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnQxID0gdGhpcy5pc3N1ZVRpdGxlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaXNzdWVDb250ZW50KHsKICAgICAgICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgICB1cmw6IGdldENsZWFuVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDgudDIgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MyA9IHRoaXMuYWNjZXNzVG9rZW47CiAgICAgICAgICAgICAgICBfY29udGV4dDgudDQgPSB7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiBfY29udGV4dDgudDEsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IF9jb250ZXh0OC50MiwKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IF9jb250ZXh0OC50MwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnQwLnBvc3RJc3N1ZS5jYWxsKF9jb250ZXh0OC50MCwgX2NvbnRleHQ4LnQ0KTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGlzc3VlID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmlzc3VlID0gaXNzdWU7CiAgICAgICAgICAgICAgICB0aGlzLmlzSXNzdWVOb3RDcmVhdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tbWVudHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMjM7CiAgICAgICAgICAgICAgICBfY29udGV4dDgudDUgPSBfY29udGV4dDhbImNhdGNoIl0oNSk7CiAgICAgICAgICAgICAgICB0aGlzLmlzRmFpbGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMjY7CiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JlYXRpbmdJc3N1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5maW5pc2goMjYpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzLCBbWzUsIDIzLCAyNiwgMjldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHBvc3RJc3N1ZSgpIHsKICAgICAgICByZXR1cm4gX3Bvc3RJc3N1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcG9zdElzc3VlOwogICAgfSgpCiAgICAvKioKICAgICAqIEdldCBjb21tZW50cyBvZiB0aGlzIHZzc3VlIGFjY29yZGluZyB0byB0aGUgaXNzdWUgaWQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRDb21tZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldENvbW1lbnRzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgY29tbWVudHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5BUEkgfHwgIXRoaXMuaXNzdWUgfHwgdGhpcy5pc0xvYWRpbmdDb21tZW50cykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nQ29tbWVudHMgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmdldENvbW1lbnRzKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgY29tbWVudHMgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBjb21tZW50czsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVyeS5wYWdlICE9PSBjb21tZW50cy5wYWdlKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnkucGFnZSA9IGNvbW1lbnRzLnBhZ2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnkucGVyUGFnZSAhPT0gY29tbWVudHMucGVyUGFnZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LnBlclBhZ2UgPSBjb21tZW50cy5wZXJQYWdlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBjb21tZW50cyk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDEzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnQwID0gX2NvbnRleHQ5WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0OS50MC5yZXNwb25zZSAmJiBbNDAxLCA0MDNdLmluY2x1ZGVzKF9jb250ZXh0OS50MC5yZXNwb25zZS5zdGF0dXMpICYmICF0aGlzLmlzTG9naW5lZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5pc0xvZ2luUmVxdWlyZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBfY29udGV4dDkudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ5LnQwOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAyMTsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nQ29tbWVudHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuZmluaXNoKDIxKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgdGhpcywgW1swLCAxMywgMjEsIDI0XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDb21tZW50cygpIHsKICAgICAgICByZXR1cm4gX2dldENvbW1lbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRDb21tZW50czsKICAgIH0oKQogICAgLyoqCiAgICAgKiBQb3N0IGEgbmV3IGNvbW1lbnQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwb3N0Q29tbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3Bvc3RDb21tZW50ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoX3JlZjYpIHsKICAgICAgICB2YXIgY29udGVudCwgY29tbWVudDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfcmVmNi5jb250ZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5BUEkgfHwgIXRoaXMuaXNzdWUgfHwgdGhpcy5pc0NyZWF0aW5nQ29tbWVudCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nQ29tbWVudCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLnBvc3RDb21tZW50KHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBjb21tZW50ID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBjb21tZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC50MCA9IF9jb250ZXh0MTBbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdlcnJvcicsIF9jb250ZXh0MTAudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQxMC50MDsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDE1OwogICAgICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuZmluaXNoKDE1KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwLCB0aGlzLCBbWzEsIDExLCAxNSwgMThdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHBvc3RDb21tZW50KF94MikgewogICAgICAgIHJldHVybiBfcG9zdENvbW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvc3RDb21tZW50OwogICAgfSgpCiAgICAvKioKICAgICAqIEVkaXQgYSBjb21tZW50CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicHV0Q29tbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3B1dENvbW1lbnQyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoX3JlZjcpIHsKICAgICAgICB2YXIgY29tbWVudElkLCBjb250ZW50LCBjb21tZW50OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWVudElkID0gX3JlZjcuY29tbWVudElkLCBjb250ZW50ID0gX3JlZjcuY29udGVudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLmlzc3VlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLnB1dENvbW1lbnQoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVJZDogdGhpcy5pc3N1ZS5pZCwKICAgICAgICAgICAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjb21tZW50ID0gX2NvbnRleHQxMS5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBjb21tZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS50MCA9IF9jb250ZXh0MTFbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdlcnJvcicsIF9jb250ZXh0MTEudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQxMS50MDsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExLCB0aGlzLCBbWzEsIDEwXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwdXRDb21tZW50KF94MykgewogICAgICAgIHJldHVybiBfcHV0Q29tbWVudDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHB1dENvbW1lbnQ7CiAgICB9KCkKICAgIC8qKgogICAgICogRGVsZXRlIGEgbmV3IGNvbW1lbnQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZWxldGVDb21tZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVsZXRlQ29tbWVudDIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihfcmVmOCkgewogICAgICAgIHZhciBjb21tZW50SWQsIHN1Y2Nlc3M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21tZW50SWQgPSBfcmVmOC5jb21tZW50SWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAxOwoKICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLkFQSSB8fCAhdGhpcy5pc3N1ZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5kZWxldGVDb21tZW50KHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQsCiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgc3VjY2VzcyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgc3VjY2Vzcyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIudDAgPSBfY29udGV4dDEyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBfY29udGV4dDEyLnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0MTIudDA7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcywgW1sxLCAxMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZGVsZXRlQ29tbWVudChfeDQpIHsKICAgICAgICByZXR1cm4gX2RlbGV0ZUNvbW1lbnQyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWxldGVDb21tZW50OwogICAgfSgpCiAgICAvKioKICAgICAqIEdldCByZWFjdGlvbnMgb2YgYSBjb21tZW50CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Q29tbWVudFJlYWN0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldENvbW1lbnRSZWFjdGlvbnMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMyhfcmVmOSkgewogICAgICAgIHZhciBjb21tZW50SWQsIHJlYWN0aW9uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1lbnRJZCA9IF9yZWY5LmNvbW1lbnRJZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLmlzc3VlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmdldENvbW1lbnRSZWFjdGlvbnMoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVJZDogdGhpcy5pc3N1ZS5pZCwKICAgICAgICAgICAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZWFjdGlvbnMgPSBfY29udGV4dDEzLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIHJlYWN0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMudDAgPSBfY29udGV4dDEzWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBfY29udGV4dDEzLnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0MTMudDA7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMywgdGhpcywgW1sxLCAxMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0Q29tbWVudFJlYWN0aW9ucyhfeDUpIHsKICAgICAgICByZXR1cm4gX2dldENvbW1lbnRSZWFjdGlvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENvbW1lbnRSZWFjdGlvbnM7CiAgICB9KCkKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IHJlYWN0aW9uIHRvIGEgY2VydGFpbiBjb21tZW50CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicG9zdENvbW1lbnRSZWFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3Bvc3RDb21tZW50UmVhY3Rpb24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNChfcmVmMTApIHsKICAgICAgICB2YXIgY29tbWVudElkLCByZWFjdGlvbiwgc3VjY2VzczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1lbnRJZCA9IF9yZWYxMC5jb21tZW50SWQsIHJlYWN0aW9uID0gX3JlZjEwLnJlYWN0aW9uOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5BUEkgfHwgIXRoaXMuaXNzdWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLnBvc3RDb21tZW50UmVhY3Rpb24oewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgaXNzdWVJZDogdGhpcy5pc3N1ZS5pZCwKICAgICAgICAgICAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQsCiAgICAgICAgICAgICAgICAgIHJlYWN0aW9uOiByZWFjdGlvbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHN1Y2Nlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDE0LnQwID0gX2NvbnRleHQxNFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9yJywgX2NvbnRleHQxNC50MCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDE0LnQwOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTQsIHRoaXMsIFtbMSwgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHBvc3RDb21tZW50UmVhY3Rpb24oX3g2KSB7CiAgICAgICAgcmV0dXJuIF9wb3N0Q29tbWVudFJlYWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwb3N0Q29tbWVudFJlYWN0aW9uOwogICAgfSgpCiAgICAvKioKICAgICAqIFJlZGlyZWN0IHRvIHRoZSBwbGF0Zm9ybSdzIGF1dGhvcml6YXRpb24gcGFnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgaWYgKCF0aGlzLkFQSSkgcmV0dXJuOwogICAgICB0aGlzLkFQSS5yZWRpcmVjdEF1dGgoKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xlYW4gdGhlIGFjY2VzcyB0b2tlbiBzdG9yZWQgaW4gbG9jYWwgc3RvcmFnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICB0aGlzLnNldEFjY2Vzc1Rva2VuKG51bGwpOwogICAgICB0aGlzLnVzZXIgPSBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBIYW5kbGUgYXV0aG9yaXphdGlvbiBhbmQgc2V0IGFjY2Vzc190b2tlbgogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZUF1dGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVBdXRoID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgICAgdmFyIGFjY2Vzc1Rva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHRoaXMuQVBJKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5BUEkuaGFuZGxlQXV0aCgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IF9jb250ZXh0MTUuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBuZXcgYWNjZXNzX3Rva2VuCiAgICAgICAgICAgICAgICB0aGlzLnNldEFjY2Vzc1Rva2VuKGFjY2Vzc1Rva2VuKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5BUEkuZ2V0VXNlcih7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZ2V0QWNjZXNzVG9rZW4oKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5BUEkuZ2V0VXNlcih7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAvLyBubyBhY2Nlc3NfdG9rZW4KICAgICAgICAgICAgICAgIHRoaXMuc2V0QWNjZXNzVG9rZW4obnVsbCk7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBudWxsOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBoYW5kbGVBdXRoKCkgewogICAgICAgIHJldHVybiBfaGFuZGxlQXV0aC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlQXV0aDsKICAgIH0oKQogICAgLyoqCiAgICAgKiBHZXQgYWNjZXNzIHRva2VuIGZyb20gbG9jYWwgc3RvcmFnZQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldEFjY2Vzc1Rva2VuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpIHsKICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmFjY2Vzc1Rva2VuS2V5KTsKICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47CiAgICB9CiAgICAvKioKICAgICAqIFNhdmUgYWNjZXNzIHRva2VuIHRvIGxvY2FsIHN0b3JhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZXRBY2Nlc3NUb2tlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWNjZXNzVG9rZW4odG9rZW4pIHsKICAgICAgaWYgKHRva2VuID09PSBudWxsKSB7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuYWNjZXNzVG9rZW5LZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmFjY2Vzc1Rva2VuS2V5LCB0b2tlbik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB0b2tlbjsKICAgIH0KICB9XSk7CgogIHJldHVybiBWc3N1ZVN0b3JlOwp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdxdWVyeS5wZXJQYWdlJyldLCBWc3N1ZVN0b3JlLnByb3RvdHlwZSwgIm9uUXVlcnlQZXJQYWdlQ2hhbmdlIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgncXVlcnkucGFnZScpLCBXYXRjaCgncXVlcnkuc29ydCcpXSwgVnNzdWVTdG9yZS5wcm90b3R5cGUsICJvblF1ZXJ5Q2hhbmdlIiwgbnVsbCk7CgpWc3N1ZVN0b3JlID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBpMThuOiBpMThuCn0pXSwgVnNzdWVTdG9yZSk7CnZhciBWc3N1ZVN0b3JlJDEgPSBWc3N1ZVN0b3JlOwoKdmFyIFZzc3VlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDEwKSB7CiAgX2luaGVyaXRzKFZzc3VlLCBfVnVlJDEwKTsKCiAgdmFyIF9zdXBlcjEwID0gX2NyZWF0ZVN1cGVyKFZzc3VlKTsKCiAgZnVuY3Rpb24gVnNzdWUoKSB7CiAgICB2YXIgX3RoaXMxMzsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWUpOwoKICAgIF90aGlzMTMgPSBfc3VwZXIxMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgLyoqCiAgICAgKiBQcm92aWRlIHRoZSBWc3N1ZVN0b3JlIGZvciB0aGUgY2hpbGQgY29tcG9uZW50cwogICAgICovCgogICAgX3RoaXMxMy52c3N1ZSA9IG5ldyBWc3N1ZVN0b3JlJDEoKTsKICAgIHJldHVybiBfdGhpczEzOwogIH0KICAvKioKICAgKiBTZXQgb3B0aW9ucyBvZiBWc3N1ZSBpZiBgb3B0aW9uc2AgcHJvcCBpcyBjaGFuZ2VkCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVnNzdWUsIFt7CiAgICBrZXk6ICJvbk9wdGlvbnNDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3B0aW9uc0NoYW5nZShvcHRpb25zKSB7CiAgICAgIHRoaXMudnNzdWUuc2V0T3B0aW9ucyhvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogbW91bnRlZCBob29rCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAibW91bnRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgLy8gc2V0IGlzc3VlIHRpdGxlIGFuZCBpc3N1ZSBpZAogICAgICBpZiAodGhpcy50aXRsZSAhPT0gbnVsbCkgewogICAgICAgIHRoaXMudnNzdWUudGl0bGUgPSB0aGlzLnRpdGxlOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc3N1ZUlkICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy52c3N1ZS5pc3N1ZUlkID0gdGhpcy5pc3N1ZUlkOwogICAgICB9IC8vIHNldCBvcHRpb25zCgoKICAgICAgdGhpcy52c3N1ZS5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyk7IC8vIGluaXQgdnNzdWUKCiAgICAgIHRoaXMudnNzdWUuaW5pdCgpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZzc3VlOwp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICByZXF1aXJlZDogZmFsc2UsCiAgImRlZmF1bHQiOiBudWxsCn0pXSwgVnNzdWUucHJvdG90eXBlLCAidGl0bGUiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICByZXF1aXJlZDogZmFsc2UsCiAgImRlZmF1bHQiOiBudWxsCn0pXSwgVnNzdWUucHJvdG90eXBlLCAiaXNzdWVJZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICB0eXBlOiBPYmplY3QsCiAgcmVxdWlyZWQ6IGZhbHNlLAogICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICByZXR1cm4ge307CiAgfQp9KV0sIFZzc3VlLnByb3RvdHlwZSwgIm9wdGlvbnMiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvdmlkZSgndnNzdWUnKV0sIFZzc3VlLnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdvcHRpb25zJywgewogIGRlZXA6IHRydWUKfSldLCBWc3N1ZS5wcm90b3R5cGUsICJvbk9wdGlvbnNDaGFuZ2UiLCBudWxsKTsKClZzc3VlID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBJY29uZm9udDogX192dWVfY29tcG9uZW50X18sCiAgICBWc3N1ZUJvZHk6IF9fdnVlX2NvbXBvbmVudF9fJGEsCiAgICBWc3N1ZUhlYWRlcjogX192dWVfY29tcG9uZW50X18kYgogIH0KfSldLCBWc3N1ZSk7CnZhciBzY3JpcHQkYyA9IFZzc3VlOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyRjID0gc2NyaXB0JGM7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kOSA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fJDkoKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUiCiAgfSwgW19jKCdJY29uZm9udCcpLCBfdm0uX3YoIiAiKSwgX2MoJ1Zzc3VlSGVhZGVyJyksIF92bS5fdigiICIpLCBfYygnVnNzdWVCb2R5JyldLCAxKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ5ID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJGMgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kYyA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJGMgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kYyA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kYyA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQ5LAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kOQp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kYywgX192dWVfc2NyaXB0X18kYywgX192dWVfc2NvcGVfaWRfXyRjLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kYywgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyRjLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVQbHVnaW4gPSB7CiAgZ2V0IHZlcnNpb24oKSB7CiAgICByZXR1cm4gIjEuNC43IjsKICB9LAoKICBpbnN0YWxsZWQ6IGZhbHNlLAogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlLCBvcHRpb25zKSB7CiAgICBpZiAodGhpcy5pbnN0YWxsZWQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHRoaXMuaW5zdGFsbGVkID0gdHJ1ZTsKICAgIFZ1ZS5jb21wb25lbnQoJ1Zzc3VlJywgewogICAgICBmdW5jdGlvbmFsOiB0cnVlLAogICAgICBwcm9wczogewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgICAgIH0sCiAgICAgICAgaXNzdWVJZDogewogICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICJkZWZhdWx0IjogdW5kZWZpbmVkCiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgICAgIH0KICAgICAgfSwKICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgX3JlZjExKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMTEuZGF0YSwKICAgICAgICAgICAgcHJvcHMgPSBfcmVmMTEucHJvcHM7CiAgICAgICAgcmV0dXJuIGgoX192dWVfY29tcG9uZW50X18kYywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkYXRhKSwgewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgdGl0bGU6IHByb3BzLnRpdGxlLAogICAgICAgICAgICBpc3N1ZUlkOiBwcm9wcy5pc3N1ZUlkLAogICAgICAgICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCBwcm9wcy5vcHRpb25zKQogICAgICAgICAgfQogICAgICAgIH0pKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBWc3N1ZUNvbXBvbmVudDogX192dWVfY29tcG9uZW50X18kYwp9OwpleHBvcnQgZGVmYXVsdCBWc3N1ZVBsdWdpbjsKZXhwb3J0IHsgX192dWVfY29tcG9uZW50X18kYyBhcyBWc3N1ZUNvbXBvbmVudCB9Ow=="},null]}